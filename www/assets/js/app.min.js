(()=>{var hs=Object.defineProperty;var Ke=(e,t)=>{for(var r in t)hs(e,r,{get:t[r],enumerable:!0})};var $i={position:function(e,t){let r=e.value;this.dataset.simplyPositionX=r.x||0,this.dataset.simplyPositionY=r.y||0,this.style.transform=`translate(${r.x}px, ${r.y}px`},hideHidden:function(e,t){return e.value&&this.closest(".zett-entity").classList.add("zett-hidden"),t(e)}};var Tt={};Ke(Tt,{client:()=>it,formdata:()=>zi,metroError:()=>Ce,request:()=>bt,response:()=>It,trace:()=>_s,url:()=>Ge});var _t="https://metro.muze.nl/details/";Symbol.metroProxy||(Symbol.metroProxy=Symbol("isProxy"));Symbol.metroSource||(Symbol.metroSource=Symbol("source"));var At=class e{#e={url:typeof window<"u"?window.location:"https://localhost"};#t=["get","post","put","delete","patch","head","options","query"];static tracers={};constructor(...t){for(let r of t)if(typeof r=="string"||r instanceof String)this.#e.url=""+r;else if(r instanceof e)Object.assign(this.#e,r.#e);else if(r instanceof Function)this.#r([r]);else if(r&&typeof r=="object")for(let i in r)i=="middlewares"?this.#r(r[i]):typeof r[i]=="function"?this.#e[i]=r[i](this.#e[i],this.#e):this.#e[i]=r[i];this.#e.verbs&&(this.#t=this.#e.verbs,delete this.#e.verbs);for(let r of this.#t)this[r]=async function(...i){return this.fetch(bt(this.#e,...i,{method:r.toUpperCase()}))};Object.freeze(this)}#r(t){typeof t=="function"&&(t=[t]);let r=t.findIndex(i=>typeof i!="function");if(r>=0)throw Ce("metro.client: middlewares must be a function or an array of functions "+_t+"client/invalid-middlewares/",t[r]);Array.isArray(this.#e.middlewares)||(this.#e.middlewares=[]),this.#e.middlewares=this.#e.middlewares.concat(t)}fetch(t,r){if(t=bt(t,r),!t.url)throw Ce("metro.client."+t.method.toLowerCase()+": Missing url parameter "+_t+"client/fetch-missing-url/",t);if(r||(r={}),typeof r!="object"||r instanceof String)throw Ce("metro.client.fetch: Invalid options parameter "+_t+"client/fetch-invalid-options/",r);let n=[async function(o){o[Symbol.metroProxy]&&(o=o[Symbol.metroSource]);let m=await fetch(o);return It(m)}].concat(this.#e?.middlewares?.slice()||[]);r=Object.assign({},this.#e,r);let l;for(let u of n)l=function(o,m){return async function(d){let p,_=Object.values(e.tracers);for(let y of _)y.request&&y.request.call(y,d,m);p=await m(d,o);for(let y of _)y.response&&y.response.call(y,p,m);return p}}(l,u);return l(t)}with(...t){return new e(this,...t)}};function it(...e){return new At(...e)}function ps(e,t){let r=t||{};!r.url&&t.url&&(r.url=t.url);for(let i of["method","headers","body","mode","credentials","cache","redirect","referrer","referrerPolicy","integrity","keepalive","signal","priority","url"]){let n=e[i];if(!(typeof n>"u"||n==null))if(n?.[Symbol.metroProxy]&&(n=n[Symbol.metroSource]),typeof n=="function")r[i]=n(r[i],r);else if(i=="url")r.url=Ge(r.url,n);else if(i=="headers"){r.headers=new Headers(t.headers),n instanceof Headers||(n=new Headers(e.headers));for(let[l,u]of n.entries())r.headers.set(l,u)}else r[i]=n}return e instanceof Request&&e.data&&(r.body=e.data),r}function bt(...e){let t={url:typeof window<"u"?window.location:"https://localhost/",duplex:"half"};for(let n of e)typeof n=="string"||n instanceof URL||n instanceof URLSearchParams?t.url=Ge(t.url,n):n&&(n instanceof FormData||n instanceof ReadableStream||n instanceof Blob||n instanceof ArrayBuffer||n instanceof DataView)?t.body=n:n&&typeof n=="object"&&Object.assign(t,ps(n,t));let r=new Request(t.url,t),i=t.body;return i&&typeof i=="object"&&!(i instanceof String)&&!(i instanceof ReadableStream)&&!(i instanceof Blob)&&!(i instanceof ArrayBuffer)&&!(i instanceof DataView)&&!(i instanceof FormData)&&!(i instanceof URLSearchParams)&&(typeof TypedArray>"u"||!(i instanceof TypedArray))&&typeof i.toString=="function"&&(t.body=i.toString({headers:r.headers}),r=new Request(t.url,t)),Object.freeze(r),new Proxy(r,{get(n,l,u){switch(l){case Symbol.metroSource:return n;case Symbol.metroProxy:return!0;case"with":return function(...o){return i&&o.unshift({body:i}),bt(n,...o)};case"data":return i}return n[l]instanceof Function?n[l].bind(n):n[l]}})}function Fi(e,t){let r=t||{};!r.url&&t.url&&(r.url=t.url);for(let i of["status","statusText","headers","body","url","type","redirected"]){let n=e[i];typeof n>"u"||n==null||(n?.[Symbol.metroProxy]&&(n=n[Symbol.metroSource]),typeof n=="function"?r[i]=n(r[i],r):i=="url"?r.url=new URL(n,r.url||"https://localhost/"):r[i]=n)}return e instanceof Response&&e.data&&(r.body=e.data),r}function It(...e){let t={};for(let n of e)typeof n=="string"?t.body=n:n instanceof Response?Object.assign(t,Fi(n,t)):n&&typeof n=="object"&&(n instanceof FormData||n instanceof Blob||n instanceof ArrayBuffer||n instanceof DataView||n instanceof ReadableStream||n instanceof URLSearchParams||n instanceof String||typeof TypedArray<"u"&&n instanceof TypedArray?t.body=n:Object.assign(t,Fi(n,t)));let r;t.body&&(r=t.body),[101,204,205,304].includes(t.status)&&(t.body=null);let i=new Response(t.body,t);return Object.freeze(i),new Proxy(i,{get(n,l,u){switch(l){case Symbol.metroProxy:return!0;case Symbol.metroSource:return n;case"with":return function(...o){return It(n,...o)};case"data":return r;case"ok":return n.status>=200&&n.status<400}return typeof n[l]=="function"?n[l].bind(n):n[l]}})}function Wi(e,t){typeof t=="function"?t(e.searchParams,e):(t=new URLSearchParams(t),t.forEach((r,i)=>{e.searchParams.append(i,r)}))}function Ge(...e){let t=["hash","host","hostname","href","password","pathname","port","protocol","username","search","searchParams"],r=new URL("https://localhost/");for(let i of e)if(typeof i=="string"||i instanceof String)r=new URL(i,r);else if(i instanceof URL||typeof Location<"u"&&i instanceof Location)r=new URL(i);else if(i instanceof URLSearchParams)Wi(r,i);else if(i&&typeof i=="object")for(let n in i)switch(n){case"search":typeof i.search=="function"?i.search(r.search,r):r.search=new URLSearchParams(i.search);break;case"searchParams":Wi(r,i.searchParams);break;default:if(!t.includes(n))throw Ce("metro.url: unknown url parameter "+_t+"url/unknown-param-name/",n);if(typeof i[n]=="function")i[n](r[n],r);else if(typeof i[n]=="string"||i[n]instanceof String||typeof i[n]=="number"||i[n]instanceof Number||typeof i[n]=="boolean"||i[n]instanceof Boolean)r[n]=""+i[n];else if(typeof i[n]=="object"&&i[n].toString)r[n]=i[n].toString();else throw Ce("metro.url: unsupported value for "+n+" "+_t+"url/unsupported-param-value/",e[n]);break}else throw Ce("metro.url: unsupported option value "+_t+"url/unsupported-option-value/",i);return Object.freeze(r),new Proxy(r,{get(i,n,l){switch(n){case Symbol.metroProxy:return!0;case Symbol.metroSource:return i;case"with":return function(...u){return Ge(i,...u)};case"filename":return i.pathname.split("/").pop();case"folderpath":return i.pathname.substring(0,i.pathname.lastIndexOf("\\")+1)}return i[n]instanceof Function?i[n].bind(i):i[n]}})}function zi(...e){var t=new FormData;for(let r of e)if(r instanceof HTMLFormElement&&(r=new FormData(r)),r instanceof FormData)for(let i of r.entries())t.append(i[0],i[1]);else if(r&&typeof r=="object")for(let i of Object.entries(r))if(Array.isArray(i[1]))for(let n of i[1])t.append(i[0],n);else t.append(i[0],i[1]);else throw new Ce("metro.formdata: unknown option type "+_t+"formdata/unknown-option-value/",r);return Object.freeze(t),new Proxy(t,{get:(r,i,n)=>{switch(i){case Symbol.metroProxy:return!0;case Symbol.metroSource:return r;case"with":return function(...l){return zi(r,...l)}}return r[i]instanceof Function?r[i].bind(r):r[i]}})}var Ft={error:(e,...t)=>{console.error("\u24C2\uFE0F  ",e,...t)},info:(e,...t)=>{console.info("\u24C2\uFE0F  ",e,...t)},group:e=>{console.group("\u24C2\uFE0F  "+e)},groupEnd:e=>{console.groupEnd("\u24C2\uFE0F  "+e)}};function Ce(e,...t){return Ft.error(e,...t),new Error(e,...t)}var _s={add(e,t){At.tracers[e]=t},delete(e){delete At.tracers[e]},clear(){At.tracers={}},group(){let e=0;return{request:(t,r)=>{e++,Ft.group(e),Ft.info(t?.url,t,r)},response:(t,r)=>{Ft.info(t?.body?t.body[Symbol.metroSource]:null,t,r),Ft.groupEnd(e),e--}}}};function Ze(e){return async(t,r)=>{let i=await r(t);if(!i.ok)if(e&&typeof e[i.status]=="function")i=e[i.status].apply(i,t);else throw new Error(i.status+": "+i.statusText,{cause:i});return i}}function mt(e){return e=Object.assign({mimetype:"application/json",reviver:null,replacer:null,space:""},e),async(t,r)=>{Mr(t.headers.get("Accept"))||(t=t.with({headers:{Accept:e.mimetype}})),["POST","PUT","PATCH","QUERY"].includes(t.method)&&t.data&&typeof t.data=="object"&&!(t.data instanceof ReadableStream)&&(Mr(t.headers.get("content-type"))||(t=t.with({headers:{"Content-Type":e.mimetype}})),t=t.with({body:JSON.stringify(t.data,e.replacer,e.space)}));let i=await r(t);if(Mr(i.headers.get("content-type"))){let l=await i.clone().text();try{let u=JSON.parse(l,e.reviver);return i.with({body:u})}catch{}}return i}}var bs=/^application\/([a-zA-Z0-9\-_]+\+)?json\b/;function Mr(e){return bs.exec(e)}var qi=Object.assign({},Tt,{mw:{jsonmw:mt,thrower:Ze}});globalThis.metro||(globalThis.metro=qi);var Ie=qi;var cr={};Ke(cr,{base64url_encode:()=>$r,createState:()=>Vi,default:()=>jt,generateCodeChallenge:()=>Qi,generateCodeVerifier:()=>Ki,getExpires:()=>Dr,isAuthorized:()=>ys,isExpired:()=>Ur,isRedirected:()=>Fr});globalThis.assertEnabled=!1;function Le(e,t){if(globalThis.assertEnabled){let r=Me(e,t);if(r)throw console.error("\u{1F170}\uFE0F  Assertions failed because of:",r,"in this source:",e),new Error("Assertions failed",{cause:{problems:r,source:e}})}}function ie(e){return function(r,i,n){if(typeof r<"u"&&r!=null&&typeof e<"u")return Me(r,e,i,n)}}function Ee(e){return function(r,i,n){return r==null||typeof r>"u"?je("data is required",r,e||"any value",n):typeof e<"u"?Me(r,e,i,n):!1}}function yt(e){return function(r,i,n){return r==null||typeof r>"u"?(console.warn("data does not contain recommended value",r,e,n),!1):Me(r,e,i,n)}}function Oe(...e){return function(r,i,n){for(let l of e)if(!Me(r,l,i,n))return!1;return je("data does not match oneOf patterns",r,e,n)}}function nt(...e){return function(r,i,n){if(!Array.isArray(r))return je("data is not an array",r,"anyOf",n);for(let l of r)if(Oe(...e)(l))return je("data does not match anyOf patterns",l,e,n);return!1}}function Gi(...e){return function(r,i,n){let l=[];for(let u of e)l=l.concat(Me(r,u,i,n));if(l=l.filter(Boolean),l.length)return je("data does not match all given patterns",r,e,n,l)}}function we(e,t,r){try{e instanceof URL&&(e=e.href);let i=new URL(e);if(i.href!=e&&!(i.href+"/"==e||i.href==e+"/"))return je("data is not a valid url",e,"validURL",r)}catch{return je("data is not a valid url",e,"validURL",r)}}function Hi(e,t,r){if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e))return je("data is not a valid email",e,"validEmail",r)}function kt(e){return function(r,i,n){if(!(r instanceof e))return je("data is not an instanceof pattern",r,e,n)}}function Wt(e){return function(r,i,n){if(!Me(r,e,i,n))return je("data matches pattern, when required not to",r,e,n)}}function Me(e,t,r,i=""){r||(r=e);let n=[];if(t===Boolean)typeof e!="boolean"&&!(e instanceof Boolean)&&n.push(je("data is not a boolean",e,t,i));else if(t===Number)typeof e!="number"&&!(e instanceof Number)&&n.push(je("data is not a number",e,t,i));else if(t===String)typeof e!="string"&&!(e instanceof String)&&n.push(je("data is not a string",e,t,i)),e==""&&n.push(je("data is an empty string, which is not allowed",e,t,i));else if(t instanceof RegExp)if(Array.isArray(e)){let l=e.findIndex((u,o)=>Me(u,t,r,i+"["+o+"]"));l>-1&&n.push(je("data["+l+"] does not match pattern",e[l],t,i+"["+l+"]"))}else typeof e>"u"?n.push(je("data is undefined, should match pattern",e,t,i)):t.test(e)||n.push(je("data does not match pattern",e,t,i));else if(t instanceof Function){let l=t(e,r,i);l&&(Array.isArray(l)?n=n.concat(l):n.push(l))}else if(Array.isArray(t)){Array.isArray(e)||n.push(je("data is not an array",e,[],i));for(let l of t)for(let u of e.keys()){let o=Me(e[u],l,r,i+"["+u+"]");Array.isArray(o)?n=n.concat(o):o&&n.push(o)}}else if(t&&typeof t=="object")if(Array.isArray(e)){let l=e.findIndex((u,o)=>Me(u,t,r,i+"["+o+"]"));l>-1&&n.push(je("data["+l+"] does not match pattern",e[l],t,i+"["+l+"]"))}else if(!e||typeof e!="object")n.push(je("data is not an object, pattern is",e,t,i));else if(e instanceof URLSearchParams&&(e=Object.fromEntries(e)),t instanceof Function){let l=Me(e,t,r,i);l&&(n=n.concat(l))}else for(let[l,u]of Object.entries(t)){let o=Me(e[l],u,r,i+"."+l);o&&(n=n.concat(o))}else t!=e&&n.push(je("data and pattern are not equal",e,t,i));return n.length?n:!1}function je(e,t,r,i,n){let l={message:e,found:t,expected:r,path:i};return n&&(l.problems=n),l}function zt(e){let t,r;if(typeof localStorage<"u")t={get:()=>localStorage.getItem("metro/state:"+e),set:i=>localStorage.setItem("metro/state:"+e,i),has:()=>localStorage.getItem("metro/state:"+e)!==null},r={get:i=>JSON.parse(localStorage.getItem(e+":"+i)),set:(i,n)=>localStorage.setItem(e+":"+i,JSON.stringify(n)),has:i=>localStorage.getItem(e+":"+i)!==null};else{let i=new Map;t={get:()=>i.get("metro/state:"+e),set:n=>i.set("metro/state:"+e,n),has:()=>i.has("metro/state:"+e)},r=new Map}return{state:t,tokens:r}}function jt(e){let t={client:it(),force_authorization:!1,site:"default",oauth2_configuration:{authorization_endpoint:"/authorize",token_endpoint:"/token",redirect_uri:globalThis.document?.location.href,grant_type:"authorization_code",code_verifier:Ki(64)},authorize_callback:async p=>(window.location.href!=p.href&&window.location.replace(p.href),!1)};Le(e,{});let r=Object.assign({},t.oauth2_configuration,e?.oauth2_configuration);e=Object.assign({},t,e),e.oauth2_configuration=r;let i=zt(e.site);e.tokens||(e.tokens=i.tokens),e.state||(e.state=i.state),Le(e,{oauth2_configuration:{client_id:Ee(/.+/),grant_type:"authorization_code",authorization_endpoint:Ee(we),token_endpoint:Ee(we),redirect_uri:Ee(we)}});for(let p in r)switch(p){case"access_token":case"authorization_code":case"refresh_token":e.tokens.set(p,r[p]);break}return async function(p,_){if(e.force_authorization)return n(p,_);let y;try{if(y=await _(p),y.ok)return y}catch(S){switch(y.status){case 400:case 401:return n(p,_)}throw S}if(!y.ok)switch(y.status){case 400:case 401:return n(p,_)}return y};async function n(p,_){l();let y=e.tokens.get("access_token");if(y)if(Ur(y)){try{if(!await o())return It("false")}catch(S){throw S}return n(p,_)}else return p=bt(p,{headers:{Authorization:y.type+" "+y.value}}),_(p);else{try{if(!await u())return It("false")}catch(S){throw S}return n(p,_)}}function l(){if(typeof window<"u"&&window?.location){let p=Ge(window.location),_,y,S;if(p.searchParams.has("code"))S=p.searchParams,p=p.with({search:""}),history.pushState({},"",p.href);else if(p.hash){let R=p.hash.substr(1);S=new URLSearchParams("?"+R),p=p.with({hash:""}),history.pushState({},"",p.href)}if(S){_=S.get("code"),y=S.get("state");let R=e.state.get("metro/state");if(!y||y!==R)return;_&&e.tokens.set("authorization_code",_)}}}async function u(){if(r.grant_type==="authorization_code"&&!e.tokens.has("authorization_code")){let S=await m();if(!e.authorize_callback||typeof e.authorize_callback!="function")throw Ce("oauth2mw: oauth2 with grant_type:authorization_code requires a callback function in client options.authorize_callback");let R=await e.authorize_callback(S);if(R)e.tokens.set("authorization_code",R);else return!1}let p=d(),_=await e.client.post(p);if(!_.ok){let S=await _.text();throw Ce("OAuth2mw: fetch access_token: "+_.status+": "+_.statusText,{cause:p})}let y=await _.json();if(e.tokens.set("access_token",{value:y.access_token,expires:Dr(y.expires_in),type:y.token_type,scope:y.scope}),y.refresh_token){let S={value:y.refresh_token};e.tokens.set("refresh_token",S)}return y}async function o(){let p=d("refresh_token"),_=await e.client.post(p);if(!_.ok)throw Ce("OAuth2mw: refresh access_token: "+_.status+": "+_.statusText,{cause:p});let y=await _.json();if(e.tokens.set("access_token",{value:y.access_token,expires:Dr(y.expires_in),type:y.token_type,scope:y.scope}),y.refresh_token){let S={value:y.refresh_token};e.tokens.set("refresh_token",S)}else return!1;return y}async function m(){if(!r.authorization_endpoint)throw Ce("oauth2mw: Missing options.oauth2_configuration.authorization_endpoint");let p=Ge(r.authorization_endpoint,{hash:""});Le(r,{client_id:/.+/,redirect_uri:/.+/,scope:/.*/});let _={response_type:"code",client_id:r.client_id,redirect_uri:r.redirect_uri,state:r.state||Vi(40)};return r.response_type&&(_.response_type=r.response_type),r.response_mode&&(_.response_mode=r.response_mode),e.state.set(_.state),r.client_secret&&(_.client_secret=r.client_secret),r.code_verifier&&(_.code_challenge=await Qi(r.code_verifier),_.code_challenge_method="S256"),r.scope&&(_.scope=r.scope),r.prompt&&(_.prompt=r.prompt),Ge(p,{search:_})}function d(p=null){if(Le(r,{client_id:/.+/,redirect_uri:/.+/}),!r.token_endpoint)throw Ce("oauth2mw: Missing options.endpoints.token url");let _=Ge(r.token_endpoint,{hash:""}),y={grant_type:p||r.grant_type,client_id:r.client_id};switch(r.code_verifier&&(y.code_verifier=r.code_verifier),r.client_secret&&(y.client_secret=r.client_secret),r.scope&&(y.scope=r.scope),r.grant_type){case"authorization_code":y.redirect_uri=r.redirect_uri,y.code=e.tokens.get("authorization_code");break;case"client_credentials":break;case"refresh_token":y.refresh_token=r.refresh_token;break;default:throw new Error("Unknown grant_type: ".oauth2.grant_type)}return bt(_,{method:"POST",body:new URLSearchParams(y)})}}function Ur(e){if(!e)return!0;let t=new Date(e.expires);return new Date().getTime()>t.getTime()}function Dr(e){if(e instanceof Date)return new Date(e.getTime());if(typeof e=="number"){let t=new Date;return t.setSeconds(t.getSeconds()+e),t}throw new TypeError("Unknown expires type "+e)}function Ki(e=64){let t=new Uint8Array(e);return globalThis.crypto.getRandomValues(t),$r(t)}async function Qi(e){let r=new TextEncoder().encode(e),i=await globalThis.crypto.subtle.digest("SHA-256",r);return $r(i)}function $r(e){let t=Array.from(new Uint8Array(e),r=>String.fromCharCode(r)).join("");return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function Vi(e){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r="",i=0;for(;i<e;)r+=t.charAt(Math.floor(Math.random()*t.length)),i++;return r}function Fr(){let e=new URL(document.location.href);if(!e.searchParams.has("code")){if(e.hash){let t=e.hash.substr(1);if(params=new URLSearchParams("?"+t),params.has("code"))return!0}return!1}return!0}function ys(e){typeof e=="string"&&(e=zt(e).tokens);let t=e.get("access_token");return!!(t&&!Ur(t)||e.get("refresh_token"))}var Wr={};Ke(Wr,{default:()=>Yi});var fr={status:200,statusText:"OK",headers:{"Content-Type":"application/json"}},qt=e=>({status:400,statusText:"Bad Request",headers:{"Content-Type":"application/json"},body:JSON.stringify({error:"invalid_request",error_description:e})}),st,Ji={};function Yi(e={}){return e=Object.assign({},{PKCE:!1,DPoP:!1},e),async(r,i)=>{let n=Ie.url(r.url);switch(n.pathname){case"/authorize/":if(st=Me(n.searchParams,{response_type:"code",client_id:"mockClientId",state:ie(/.*/)}))return Ie.response(qt(st));if(n.searchParams.has("code_challenge")){if(!n.searchParams.has("code_challenge_method"))return Ie.response(qt("missing code_challenge_method"));Ji.code_challenge=n.searchParams.get("code_challenge"),Ji.code_challenge_method=n.searchParams.get("code_challenge_method")}return Ie.response(fr,{body:JSON.stringify({code:"mockAuthorizeToken",state:n.searchParams.get("state")})});case"/token/":if(r.data instanceof URLSearchParams){let m={};r.data.forEach((d,p)=>m[p]=d),r=r.with({body:m})}if(st=Me(r,{method:"POST",data:{grant_type:Oe("refresh_token","authorization_code")}}))return Ie.response(qt(st));switch(r.data.grant_type){case"refresh_token":if(st=Me(r.data,Oe({refresh_token:"mockRefreshToken",client_id:"mockClientId",client_secret:"mockClientSecret"},{refresh_token:"mockRefreshToken",client_id:"mockClientId",code_verifier:/.+/})))return Ie.response(qt(st));break;case"access_token":if(st=Me(r.data,Oe({client_id:"mockClientId",client_secret:"mockClientSecret"},{client_id:"mockClientId",code_challenge:/.*/,code_challenge_method:"S256"})))return Ie.response(qt(st));break}return Ie.response(fr,{body:JSON.stringify({access_token:"mockAccessToken",token_type:"mockExample",expires_in:3600,refresh_token:"mockRefreshToken",example_parameter:"mockExampleValue"})});case"/protected/":let l=r.headers.get("Authorization"),[u,o]=l?l.split(" "):[];return!o||o!=="mockAccessToken"?Ie.response({status:401,statusText:"Forbidden",body:"401 Forbidden"}):Ie.response(fr,{body:JSON.stringify({result:"Success"})});case"/public/":return Ie.response(fr,{body:JSON.stringify({result:"Success"})});default:return Ie.response({status:404,statusText:"not found",body:"404 Not Found "+n})}}}var zr={};Ke(zr,{default:()=>en});var Zi=["HS256","HS384","HS512","RS256","RS384","RS512","ES256","ES384","ES512"],Xi=["client_secret_post","client_secret_base","client_secret_jwt","private_key_jwt"],gs={issuer:Ee(we),authorization_endpoint:Ee(we),token_endpoint:Ee(we),jwks_uri:ie(we),registration_endpoint:ie(we),scopes_supported:yt([]),response_types_supported:Ee(nt("code","token")),response_modes_supported:ie([]),grant_types_supported:ie([]),token_endpoint_auth_methods_supported:ie([]),token_endpoint_auth_signing_alg_values_supported:ie([]),service_documentation:ie(we),ui_locales_supported:ie([]),op_policy_uri:ie(we),op_tos_uri:ie(we),revocation_endpoint:ie(we),revocation_endpoint_auth_methods_supported:ie(Xi),revocation_endpoint_auth_signing_alg_values_supported:ie(Zi),introspection_endpoint:ie(we),introspection_endpoint_auth_methods_supported:ie(Xi),introspection_endpoint_auth_signing_alg_values_supported:ie(Zi),code_challendge_methods_supported:ie([])};function en(e={}){let t={client:Ie.client()};e=Object.assign({},t,e),Le(e,{issuer:Ee(we)});let r=ws(e.issuer),i=e.client.with(e.issuer)}async function ws(e,t){let r=t.get(Ie.url(e,".wellknown/oauth_authorization_server"));if(r.ok){Le(r.headers.get("Content-Type"),/application\/json.*/);let i=await r.json();return Le(i,gs),i}throw Ie.metroError("metro.oidcmw: Error while fetching "+e+".wellknown/oauth_authorization_server",r)}function tn(){let e=new URLSearchParams(window.location.search);if(!e.has("code")&&window.location.hash){let r=window.location.hash.substr(1);e=new URLSearchParams("?"+r)}let t=window.parent?window.parent:window.opener;e.has("code")?t.postMessage({authorization_code:e.get("code")},window.location.origin):e.has("error")?t.postMessage({error},window.location.origin):t.postMessage({error:"Could not find an authorization_code"},window.location.origin)}function rn(e){return new Promise((t,r)=>{addEventListener("message",i=>{event.data.authorization_code?t(event.data.authorization_code):event.data.error?r(event.data.error):r("Unknown authorization error")},{once:!0}),window.open(e)})}function Gt(){return new Promise((e,t)=>{let r=globalThis.indexedDB.open("metro",1);r.onupgradeneeded=()=>r.result.createObjectStore("keyPairs",{keyPath:"domain"}),r.onerror=i=>{t(i)},r.onsuccess=i=>{let n=i.target.result;e({set:function(l,u){return new Promise((o,m)=>{let d=n.transaction("keyPairs","readwrite",{durability:"strict"}),p=d.objectStore("keyPairs");d.oncomplete=()=>{o()},d.onerror=m,p.put(l,u)})},get:function(l){return new Promise((u,o)=>{let m=n.transaction("keyPairs","readonly"),p=m.objectStore("keyPairs").get(l);p.onsuccess=()=>{u(p.result)},p.onerror=o,m.onerror=o})},clear:function(){return new Promise((l,u)=>{let o=n.transaction("keyPairs","readwrite"),d=o.objectStore("keyPairs").clear();d.onsuccess=()=>{l()},d.onerror=u,o.onerror=u})}})}})}var vs=new TextEncoder,Ss=new TextDecoder;function dr(e){return typeof e=="string"?vs.encode(e):Ss.decode(e)}function nn(e){if(typeof e.modulusLength!="number"||e.modulusLength<2048)throw new qr(`${e.name} modulusLength must be at least 2048 bits`)}function xs(e){switch(e.algorithm.name){case"ECDSA":return{name:e.algorithm.name,hash:"SHA-256"};case"RSA-PSS":return nn(e.algorithm),{name:e.algorithm.name,saltLength:32};case"RSASSA-PKCS1-v1_5":return nn(e.algorithm),{name:e.algorithm.name};case"Ed25519":return{name:e.algorithm.name}}throw new ot}async function Es(e,t,r){if(r.usages.includes("sign")===!1)throw new TypeError('private CryptoKey instances used for signing assertions must include "sign" in their "usages"');let i=`${Ht(dr(JSON.stringify(e)))}.${Ht(dr(JSON.stringify(t)))}`,n=Ht(await crypto.subtle.sign(xs(r),r,dr(i)));return`${i}.${n}`}var sn=32768;function Rs(e){e instanceof ArrayBuffer&&(e=new Uint8Array(e));let t=[];for(let r=0;r<e.byteLength;r+=sn)t.push(String.fromCharCode.apply(null,e.subarray(r,r+sn)));return btoa(t.join("")).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ht(e){return Rs(e)}function As(){return Ht(crypto.getRandomValues(new Uint8Array(32)))}var ot=class extends Error{constructor(t){super(t??"operation not supported"),this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}},qr=class extends Error{constructor(t){super(t),this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}};function Is(e){switch(e.algorithm.hash.name){case"SHA-256":return"PS256";default:throw new ot("unsupported RsaHashedKeyAlgorithm hash name")}}function Ts(e){switch(e.algorithm.hash.name){case"SHA-256":return"RS256";default:throw new ot("unsupported RsaHashedKeyAlgorithm hash name")}}function ks(e){switch(e.algorithm.namedCurve){case"P-256":return"ES256";default:throw new ot("unsupported EcKeyAlgorithm namedCurve")}}function js(e){switch(e.algorithm.name){case"RSA-PSS":return Is(e);case"RSASSA-PKCS1-v1_5":return Ts(e);case"ECDSA":return ks(e);case"Ed25519":return"EdDSA";default:throw new ot("unsupported CryptoKey algorithm name")}}function on(e){return e instanceof CryptoKey}function Ns(e){return on(e)&&e.type==="private"}function Ps(e){return on(e)&&e.type==="public"}function Ls(){return Math.floor(Date.now()/1e3)}async function hr(e,t,r,i,n,l){let u=e?.privateKey,o=e?.publicKey;if(!Ns(u))throw new TypeError('"keypair.privateKey" must be a private CryptoKey');if(!Ps(o))throw new TypeError('"keypair.publicKey" must be a public CryptoKey');if(o.extractable!==!0)throw new TypeError('"keypair.publicKey.extractable" must be true');if(typeof t!="string")throw new TypeError('"htu" must be a string');if(typeof r!="string")throw new TypeError('"htm" must be a string');if(i!==void 0&&typeof i!="string")throw new TypeError('"nonce" must be a string or undefined');if(n!==void 0&&typeof n!="string")throw new TypeError('"accessToken" must be a string or undefined');if(l!==void 0&&(typeof l!="object"||l===null||Array.isArray(l)))throw new TypeError('"additional" must be an object');return Es({alg:js(u),typ:"dpop+jwt",jwk:await Os(o)},{...l,iat:Ls(),jti:As(),htm:r,nonce:i,htu:t,ath:n?Ht(await crypto.subtle.digest("SHA-256",dr(n))):void 0},u)}async function Os(e){let{kty:t,e:r,n:i,x:n,y:l,crv:u}=await crypto.subtle.exportKey("jwk",e);return{kty:t,crv:u,e:r,n:i,x:n,y:l}}async function an(e,t){let r;if(typeof e!="string"||e.length===0)throw new TypeError('"alg" must be a non-empty string');switch(e){case"PS256":r={name:"RSA-PSS",hash:"SHA-256",modulusLength:t?.modulusLength??2048,publicExponent:new Uint8Array([1,0,1])};break;case"RS256":r={name:"RSASSA-PKCS1-v1_5",hash:"SHA-256",modulusLength:t?.modulusLength??2048,publicExponent:new Uint8Array([1,0,1])};break;case"ES256":r={name:"ECDSA",namedCurve:"P-256"};break;case"EdDSA":r={name:"Ed25519"};break;default:throw new ot}return crypto.subtle.generateKey(r,t?.extractable??!1,["sign","verify"])}function Kt(e){return Le(e,{site:Ee(we),authorization_endpoint:Ee(we),token_endpoint:Ee(we),dpop_signing_alg_values_supported:ie([])}),async(t,r)=>{let i=await Gt(),n=await i.get(e.site);if(!n){let o=await an("ES256");n={domain:e.site,keyPair:o},await i.set(n)}let l=Ie.url(t.url);if(t.url.startsWith(e.authorization_endpoint)){let o=t.body;o instanceof URLSearchParams||o instanceof FormData?o.set("dpop_jkt",n.keyPair.publicKey):o.dpop_jkt=n.keyPair.publicKey}else if(t.url.startsWith(e.token_endpoint)){let o=await hr(n.keyPair,t.url,t.method);t=t.with({headers:{DPoP:o}})}else if(t.headers.has("Authorization")){let o=localStorage.getItem(l.host+":nonce")||void 0,m=t.headers.get("Authorization").split(" ")[1],d=await hr(n.keyPair,t.url,t.method,o,m);t=t.with({headers:{Authorization:"DPoP "+m,DPoP:d}})}let u=await r(t);return u.headers.get("DPoP-Nonce")&&localStorage.setItem(l.host+":nonce",u.headers.get("DPoP-Nonce")),u}}var Bs=Object.assign(cr,{oauth2mw:jt,mockserver:Wr,discover:zr,tokenstore:zt,dpopmw:Kt,keysstore:Gt,authorizePopup:rn,popupHandleRedirect:tn});globalThis.metro.oauth2||(globalThis.metro.oauth2=Bs);var Qt=(...e)=>(t,r)=>e.filter(i=>r.hasOwnKey(i)).length>0?!1:je("root data must have all of",r,e),at=(...e)=>t=>Array.isArray(t)&&e.filter(r=>!t.includes(r)).length==0?!1:je("data must be an array which includes",t,e);var He=["HS256","HS384","HS512","RS256","RS384","RS512","ES256","ES384","ES512"],pr=["client_secret_post","client_secret_basic","client_secret_jwt","private_key_jwt"];async function Vt(e={}){Le(e,{client:ie(kt(Ie.client().constructor)),issuer:Ee(we)});let t={client:Ie.client().with(Ze()).with(mt()),requireDynamicRegistration:!1};e=Object.assign({},t,e);let r=!1;function i(m){return r}let n={issuer:Ee(Gi(e.issuer,i)),authorization_endpoint:Ee(we),token_endpoint:Ee(we),userinfo_endpoint:yt(we),jwks_uri:Ee(we),registration_endpoint:e.requireDynamicRegistration?Ee(we):yt(we),scopes_supported:yt(at("openid")),response_types_supported:e.requireDynamicRegistration?Ee(at("code","id_token","id_token token")):Ee([]),response_modes_supported:ie([]),grant_types_supported:e.requireDynamicRegistration?ie(at("authorization_code")):ie([]),acr_values_supported:ie([]),subject_types_supported:Ee([]),id_token_signing_alg_values_supported:Ee(at("RS256")),id_token_encryption_alg_values_supported:ie([]),id_token_encryption_enc_values_supported:ie([]),userinfo_signing_alg_values_supported:ie([]),userinfo_encryption_alg_values_supported:ie([]),userinfo_encryption_enc_values_supported:ie([]),request_object_signing_alg_values_supported:ie(at("RS256")),request_object_encryption_alg_values_supported:ie([]),request_object_encryption_enc_values_supported:ie([]),token_endpoint_auth_methods_supported:ie(nt(...pr)),token_endpoint_auth_signing_alg_values_supported:ie(at("RS256"),Wt(at("none"))),display_values_supported:ie(nt("page","popup","touch","wap")),claim_types_supported:ie(nt("normal","aggregated","distributed")),claims_supported:yt([]),service_documentation:ie(we),claims_locales_supported:ie([]),ui_locales_supported:ie([]),claims_parameter_supported:ie(Boolean),request_parameter_supported:ie(Boolean),request_uri_parameter_supported:ie(Boolean),op_policy_uri:ie(we),op_tos_uri:ie(we)},l=Ie.url(e.issuer,".well-known/openid-configuration"),o=(await e.client.get(l)).data;return Le(o,n),Le(o.issuer,e.issuer),o}async function Jt(e){let t={redirect_uris:Ee([we]),response_types:ie([]),grant_types:ie(nt("authorization_code","refresh_token")),application_type:ie(Oe("native","web")),contacts:ie([Hi]),client_name:ie(String),logo_uri:ie(we),client_uri:ie(we),policy_uri:ie(we),tos_uri:ie(we),jwks_uri:ie(we,Wt(Qt("jwks"))),jwks:ie(we,Wt(Qt("jwks_uri"))),sector_identifier_uri:ie(we),subject_type:ie(String),id_token_signed_response_alg:ie(Oe(...He)),id_token_encrypted_response_alg:ie(Oe(...He)),id_token_encrypted_response_enc:ie(Oe(...He),Qt("id_token_encrypted_response_alg")),userinfo_signed_response_alg:ie(Oe(...He)),userinfo_encrypted_response_alg:ie(Oe(...He)),userinfo_encrypted_response_enc:ie(Oe(...He),Qt("userinfo_encrypted_response_alg")),request_object_signing_alg:ie(Oe(...He)),request_object_encryption_alg:ie(Oe(...He)),request_object_encryption_enc:ie(Oe(...He)),token_endpoint_auth_method:ie(Oe(...pr)),token_endpoint_auth_signing_alg:ie(Oe(...He)),default_max_age:ie(Number),require_auth_time:ie(Boolean),default_acr_values:ie([String]),initiate_login_uri:ie([we]),request_uris:ie([we])};Le(e,{client:ie(kt(Ie.client().constructor)),registration_endpoint:we,client_info:t});let r={client:Ie.client().with(Ze()).with(mt())};e=Object.assign({},r,e);let i=await e.client.post(e.registration_endpoint,{body:e.client_info}),n=i.data;if(!n.client_id||!n.client_secret)throw Ie.metroError("metro.oidc: Error: dynamic registration of client failed, no client_id or client_secret returned",i);return e.client_info=Object.assign(e.client_info,n),e.client_info}function _r(e){let t;if(typeof localStorage<"u")t={get:r=>JSON.parse(localStorage.getItem("metro/oidc:"+e+":"+r)),set:(r,i)=>localStorage.setItem("metro/oidc:"+e+":"+r,JSON.stringify(i)),has:r=>localStorage.getItem("metro/oidc:"+e+":"+r)!==null};else{let r=new Map;t={get:i=>JSON.parse(r.get("metro/oidc:"+e+":"+i)||null),set:(i,n)=>r.set("metro/oidc:"+e+":"+i,JSON.stringify(n)),has:i=>r.has("metro/oidc:"+e+":"+i)}}return t}function Gr(e={}){let t={client:it(),force_authorization:!1,use_dpop:!0,authorize_callback:async r=>(window.location.href!=r.href&&window.location.replace(r.href),!1)};return e=Object.assign({},t,e),Le(e,{client:Ee(kt(it().constructor)),client_info:Ee(),issuer:Ee(we),oauth2:ie({}),openid_configuration:ie()}),e.store||(e.store=_r(e.issuer)),!e.openid_configuration&&e.store.has("openid_configuration")&&(e.openid_configuration=e.store.get("openid_configuration")),!e.client_info.client_id&&e.store.has("client_info")&&(e.client_info=e.store.get("client_info")),async(r,i)=>{let n;if(!e.force_authorization){try{n=await i(r)}catch(d){if(n.status!=401&&n.status!=403)throw d}if(n.ok||n.status!=401&&n.status!=403)return n}if(e.openid_configuration||(e.openid_configuration=await Vt({issuer:e.issuer}),e.store.set("openid_configuration",e.openid_configuration)),!e.client_info?.client_id){if(Le(e.client_info?.client_name,Ee()),!e.openid_configuration.registration_endpoint)throw Ce("metro.oidcmw: Error: issuer "+e.issuer+" does not support dynamic client registration, but you haven't specified a client_id");e.client_info=await Jt({registration_endpoint:e.openid_configuration.registration_endpoint,client_info:e.client_info}),e.store.set("client_info",e.client_info)}let l=e.scope||"openid",u=Object.assign({site:e.issuer,client:e.client,force_authorization:!0,authorize_callback:e.authorize_callback,oauth2_configuration:{client_id:e.client_info.client_id,client_secret:e.client_info.client_secret,grant_type:"authorization_code",response_type:"code",response_mode:"query",authorization_endpoint:e.openid_configuration.authorization_endpoint,token_endpoint:e.openid_configuration.token_endpoint,scope:l,redirect_uri:e.client_info.redirect_uris[0]}}),o=async(d,p)=>{let _=await p(d);if(_.headers.get("content-type")?.startsWith("application/json")){let S=_.data?.id_token;if(!S){let R=_.clone();try{let M=await R.json();M&&M.id_token&&(S=M.id_token)}catch{}}S&&e.store.set("id_token",S)}return _},m=e.client.with(e.issuer).with(o);if(e.use_dpop){let d={site:e.issuer,authorization_endpoint:e.openid_configuration.authorization_endpoint,token_endpoint:e.openid_configuration.token_endpoint,dpop_signing_alg_values_supported:e.openid_configuration.dpop_signing_alg_values_supported};m=m.with(Kt(d)),u.client=m}return m=m.with(jt(u)),n=await m.fetch(r),n}}function ln(){return Fr()}function un(e){if(!e.store){if(!e.issuer)throw Ce("Must supply options.issuer or options.store to get the id_token");e.store=_r(e.issuer)}return e.store.get("id_token")}var cn={oidcmw:Gr,discover:Vt,register:Jt,isRedirected:ln,idToken:un};globalThis.metro.oidc||(globalThis.metro.oidc=cn);var fn=cn;var Cs=Object.create,ei=Object.defineProperty,Ms=Object.getOwnPropertyDescriptor,gn=Object.getOwnPropertyNames,Ds=Object.getPrototypeOf,Us=Object.prototype.hasOwnProperty,xe=(e,t)=>function(){return t||(0,e[gn(e)[0]])((t={exports:{}}).exports,t),t.exports},$s=(e,t)=>{for(var r in t)ei(e,r,{get:t[r],enumerable:!0})},Fs=(e,t,r,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of gn(t))!Us.call(e,n)&&n!==r&&ei(e,n,{get:()=>t[n],enumerable:!(i=Ms(t,n))||i.enumerable});return e},or=(e,t,r)=>(r=e!=null?Cs(Ds(e)):{},Fs(t||!e||!e.__esModule?ei(r,"default",{value:e,enumerable:!0}):r,e)),Ws=xe({"node_modules/base64-js/index.js"(e){"use strict";e.byteLength=m,e.toByteArray=p,e.fromByteArray=S;var t=[],r=[],i=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(l=0,u=n.length;l<u;++l)t[l]=n[l],r[n.charCodeAt(l)]=l;var l,u;r[45]=62,r[95]=63;function o(R){var M=R.length;if(M%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var N=R.indexOf("=");N===-1&&(N=M);var P=N===M?0:4-N%4;return[N,P]}function m(R){var M=o(R),N=M[0],P=M[1];return(N+P)*3/4-P}function d(R,M,N){return(M+N)*3/4-N}function p(R){var M,N=o(R),P=N[0],f=N[1],v=new i(d(R,P,f)),x=0,A=f>0?P-4:P,T;for(T=0;T<A;T+=4)M=r[R.charCodeAt(T)]<<18|r[R.charCodeAt(T+1)]<<12|r[R.charCodeAt(T+2)]<<6|r[R.charCodeAt(T+3)],v[x++]=M>>16&255,v[x++]=M>>8&255,v[x++]=M&255;return f===2&&(M=r[R.charCodeAt(T)]<<2|r[R.charCodeAt(T+1)]>>4,v[x++]=M&255),f===1&&(M=r[R.charCodeAt(T)]<<10|r[R.charCodeAt(T+1)]<<4|r[R.charCodeAt(T+2)]>>2,v[x++]=M>>8&255,v[x++]=M&255),v}function _(R){return t[R>>18&63]+t[R>>12&63]+t[R>>6&63]+t[R&63]}function y(R,M,N){for(var P,f=[],v=M;v<N;v+=3)P=(R[v]<<16&16711680)+(R[v+1]<<8&65280)+(R[v+2]&255),f.push(_(P));return f.join("")}function S(R){for(var M,N=R.length,P=N%3,f=[],v=16383,x=0,A=N-P;x<A;x+=v)f.push(y(R,x,x+v>A?A:x+v));return P===1?(M=R[N-1],f.push(t[M>>2]+t[M<<4&63]+"==")):P===2&&(M=(R[N-2]<<8)+R[N-1],f.push(t[M>>10]+t[M>>4&63]+t[M<<2&63]+"=")),f.join("")}}}),zs=xe({"node_modules/ieee754/index.js"(e){e.read=function(t,r,i,n,l){var u,o,m=l*8-n-1,d=(1<<m)-1,p=d>>1,_=-7,y=i?l-1:0,S=i?-1:1,R=t[r+y];for(y+=S,u=R&(1<<-_)-1,R>>=-_,_+=m;_>0;u=u*256+t[r+y],y+=S,_-=8);for(o=u&(1<<-_)-1,u>>=-_,_+=n;_>0;o=o*256+t[r+y],y+=S,_-=8);if(u===0)u=1-p;else{if(u===d)return o?NaN:(R?-1:1)*(1/0);o=o+Math.pow(2,n),u=u-p}return(R?-1:1)*o*Math.pow(2,u-n)},e.write=function(t,r,i,n,l,u){var o,m,d,p=u*8-l-1,_=(1<<p)-1,y=_>>1,S=l===23?Math.pow(2,-24)-Math.pow(2,-77):0,R=n?0:u-1,M=n?1:-1,N=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(m=isNaN(r)?1:0,o=_):(o=Math.floor(Math.log(r)/Math.LN2),r*(d=Math.pow(2,-o))<1&&(o--,d*=2),o+y>=1?r+=S/d:r+=S*Math.pow(2,1-y),r*d>=2&&(o++,d/=2),o+y>=_?(m=0,o=_):o+y>=1?(m=(r*d-1)*Math.pow(2,l),o=o+y):(m=r*Math.pow(2,y-1)*Math.pow(2,l),o=0));l>=8;t[i+R]=m&255,R+=M,m/=256,l-=8);for(o=o<<l|m,p+=l;p>0;t[i+R]=o&255,R+=M,o/=256,p-=8);t[i+R-M]|=N*128}}}),et=xe({"node_modules/buffer/index.js"(e){"use strict";var t=Ws(),r=zs(),i=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=o,e.SlowBuffer=f,e.INSPECT_MAX_BYTES=50;var n=2147483647;e.kMaxLength=n,o.TYPED_ARRAY_SUPPORT=l(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function l(){try{let c=new Uint8Array(1),s={foo:function(){return 42}};return Object.setPrototypeOf(s,Uint8Array.prototype),Object.setPrototypeOf(c,s),c.foo()===42}catch{return!1}}Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}});function u(c){if(c>n)throw new RangeError('The value "'+c+'" is invalid for option "size"');let s=new Uint8Array(c);return Object.setPrototypeOf(s,o.prototype),s}function o(c,s,a){if(typeof c=="number"){if(typeof s=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return _(c)}return m(c,s,a)}o.poolSize=8192;function m(c,s,a){if(typeof c=="string")return y(c,s);if(ArrayBuffer.isView(c))return R(c);if(c==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof c);if(W(c,ArrayBuffer)||c&&W(c.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(W(c,SharedArrayBuffer)||c&&W(c.buffer,SharedArrayBuffer)))return M(c,s,a);if(typeof c=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let h=c.valueOf&&c.valueOf();if(h!=null&&h!==c)return o.from(h,s,a);let E=N(c);if(E)return E;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof c[Symbol.toPrimitive]=="function")return o.from(c[Symbol.toPrimitive]("string"),s,a);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof c)}o.from=function(c,s,a){return m(c,s,a)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array);function d(c){if(typeof c!="number")throw new TypeError('"size" argument must be of type number');if(c<0)throw new RangeError('The value "'+c+'" is invalid for option "size"')}function p(c,s,a){return d(c),c<=0?u(c):s!==void 0?typeof a=="string"?u(c).fill(s,a):u(c).fill(s):u(c)}o.alloc=function(c,s,a){return p(c,s,a)};function _(c){return d(c),u(c<0?0:P(c)|0)}o.allocUnsafe=function(c){return _(c)},o.allocUnsafeSlow=function(c){return _(c)};function y(c,s){if((typeof s!="string"||s==="")&&(s="utf8"),!o.isEncoding(s))throw new TypeError("Unknown encoding: "+s);let a=v(c,s)|0,h=u(a),E=h.write(c,s);return E!==a&&(h=h.slice(0,E)),h}function S(c){let s=c.length<0?0:P(c.length)|0,a=u(s);for(let h=0;h<s;h+=1)a[h]=c[h]&255;return a}function R(c){if(W(c,Uint8Array)){let s=new Uint8Array(c);return M(s.buffer,s.byteOffset,s.byteLength)}return S(c)}function M(c,s,a){if(s<0||c.byteLength<s)throw new RangeError('"offset" is outside of buffer bounds');if(c.byteLength<s+(a||0))throw new RangeError('"length" is outside of buffer bounds');let h;return s===void 0&&a===void 0?h=new Uint8Array(c):a===void 0?h=new Uint8Array(c,s):h=new Uint8Array(c,s,a),Object.setPrototypeOf(h,o.prototype),h}function N(c){if(o.isBuffer(c)){let s=P(c.length)|0,a=u(s);return a.length===0||c.copy(a,0,0,s),a}if(c.length!==void 0)return typeof c.length!="number"||oe(c.length)?u(0):S(c);if(c.type==="Buffer"&&Array.isArray(c.data))return S(c.data)}function P(c){if(c>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return c|0}function f(c){return+c!=c&&(c=0),o.alloc(+c)}o.isBuffer=function(s){return s!=null&&s._isBuffer===!0&&s!==o.prototype},o.compare=function(s,a){if(W(s,Uint8Array)&&(s=o.from(s,s.offset,s.byteLength)),W(a,Uint8Array)&&(a=o.from(a,a.offset,a.byteLength)),!o.isBuffer(s)||!o.isBuffer(a))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(s===a)return 0;let h=s.length,E=a.length;for(let C=0,$=Math.min(h,E);C<$;++C)if(s[C]!==a[C]){h=s[C],E=a[C];break}return h<E?-1:E<h?1:0},o.isEncoding=function(s){switch(String(s).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(s,a){if(!Array.isArray(s))throw new TypeError('"list" argument must be an Array of Buffers');if(s.length===0)return o.alloc(0);let h;if(a===void 0)for(a=0,h=0;h<s.length;++h)a+=s[h].length;let E=o.allocUnsafe(a),C=0;for(h=0;h<s.length;++h){let $=s[h];if(W($,Uint8Array))C+$.length>E.length?(o.isBuffer($)||($=o.from($)),$.copy(E,C)):Uint8Array.prototype.set.call(E,$,C);else if(o.isBuffer($))$.copy(E,C);else throw new TypeError('"list" argument must be an Array of Buffers');C+=$.length}return E};function v(c,s){if(o.isBuffer(c))return c.length;if(ArrayBuffer.isView(c)||W(c,ArrayBuffer))return c.byteLength;if(typeof c!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof c);let a=c.length,h=arguments.length>2&&arguments[2]===!0;if(!h&&a===0)return 0;let E=!1;for(;;)switch(s){case"ascii":case"latin1":case"binary":return a;case"utf8":case"utf-8":return U(c).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return a*2;case"hex":return a>>>1;case"base64":return Z(c).length;default:if(E)return h?-1:U(c).length;s=(""+s).toLowerCase(),E=!0}}o.byteLength=v;function x(c,s,a){let h=!1;if((s===void 0||s<0)&&(s=0),s>this.length||((a===void 0||a>this.length)&&(a=this.length),a<=0)||(a>>>=0,s>>>=0,a<=s))return"";for(c||(c="utf8");;)switch(c){case"hex":return Se(this,s,a);case"utf8":case"utf-8":return V(this,s,a);case"ascii":return ue(this,s,a);case"latin1":case"binary":return he(this,s,a);case"base64":return D(this,s,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return G(this,s,a);default:if(h)throw new TypeError("Unknown encoding: "+c);c=(c+"").toLowerCase(),h=!0}}o.prototype._isBuffer=!0;function A(c,s,a){let h=c[s];c[s]=c[a],c[a]=h}o.prototype.swap16=function(){let s=this.length;if(s%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let a=0;a<s;a+=2)A(this,a,a+1);return this},o.prototype.swap32=function(){let s=this.length;if(s%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let a=0;a<s;a+=4)A(this,a,a+3),A(this,a+1,a+2);return this},o.prototype.swap64=function(){let s=this.length;if(s%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let a=0;a<s;a+=8)A(this,a,a+7),A(this,a+1,a+6),A(this,a+2,a+5),A(this,a+3,a+4);return this},o.prototype.toString=function(){let s=this.length;return s===0?"":arguments.length===0?V(this,0,s):x.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(s){if(!o.isBuffer(s))throw new TypeError("Argument must be a Buffer");return this===s?!0:o.compare(this,s)===0},o.prototype.inspect=function(){let s="",a=e.INSPECT_MAX_BYTES;return s=this.toString("hex",0,a).replace(/(.{2})/g,"$1 ").trim(),this.length>a&&(s+=" ... "),"<Buffer "+s+">"},i&&(o.prototype[i]=o.prototype.inspect),o.prototype.compare=function(s,a,h,E,C){if(W(s,Uint8Array)&&(s=o.from(s,s.offset,s.byteLength)),!o.isBuffer(s))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof s);if(a===void 0&&(a=0),h===void 0&&(h=s?s.length:0),E===void 0&&(E=0),C===void 0&&(C=this.length),a<0||h>s.length||E<0||C>this.length)throw new RangeError("out of range index");if(E>=C&&a>=h)return 0;if(E>=C)return-1;if(a>=h)return 1;if(a>>>=0,h>>>=0,E>>>=0,C>>>=0,this===s)return 0;let $=C-E,ye=h-a,Te=Math.min($,ye),Ae=this.slice(E,C),ke=s.slice(a,h);for(let Re=0;Re<Te;++Re)if(Ae[Re]!==ke[Re]){$=Ae[Re],ye=ke[Re];break}return $<ye?-1:ye<$?1:0};function T(c,s,a,h,E){if(c.length===0)return-1;if(typeof a=="string"?(h=a,a=0):a>2147483647?a=2147483647:a<-2147483648&&(a=-2147483648),a=+a,oe(a)&&(a=E?0:c.length-1),a<0&&(a=c.length+a),a>=c.length){if(E)return-1;a=c.length-1}else if(a<0)if(E)a=0;else return-1;if(typeof s=="string"&&(s=o.from(s,h)),o.isBuffer(s))return s.length===0?-1:L(c,s,a,h,E);if(typeof s=="number")return s=s&255,typeof Uint8Array.prototype.indexOf=="function"?E?Uint8Array.prototype.indexOf.call(c,s,a):Uint8Array.prototype.lastIndexOf.call(c,s,a):L(c,[s],a,h,E);throw new TypeError("val must be string, number or Buffer")}function L(c,s,a,h,E){let C=1,$=c.length,ye=s.length;if(h!==void 0&&(h=String(h).toLowerCase(),h==="ucs2"||h==="ucs-2"||h==="utf16le"||h==="utf-16le")){if(c.length<2||s.length<2)return-1;C=2,$/=2,ye/=2,a/=2}function Te(ke,Re){return C===1?ke[Re]:ke.readUInt16BE(Re*C)}let Ae;if(E){let ke=-1;for(Ae=a;Ae<$;Ae++)if(Te(c,Ae)===Te(s,ke===-1?0:Ae-ke)){if(ke===-1&&(ke=Ae),Ae-ke+1===ye)return ke*C}else ke!==-1&&(Ae-=Ae-ke),ke=-1}else for(a+ye>$&&(a=$-ye),Ae=a;Ae>=0;Ae--){let ke=!0;for(let Re=0;Re<ye;Re++)if(Te(c,Ae+Re)!==Te(s,Re)){ke=!1;break}if(ke)return Ae}return-1}o.prototype.includes=function(s,a,h){return this.indexOf(s,a,h)!==-1},o.prototype.indexOf=function(s,a,h){return T(this,s,a,h,!0)},o.prototype.lastIndexOf=function(s,a,h){return T(this,s,a,h,!1)};function z(c,s,a,h){a=Number(a)||0;let E=c.length-a;h?(h=Number(h),h>E&&(h=E)):h=E;let C=s.length;h>C/2&&(h=C/2);let $;for($=0;$<h;++$){let ye=parseInt(s.substr($*2,2),16);if(oe(ye))return $;c[a+$]=ye}return $}function Y(c,s,a,h){return I(U(s,c.length-a),c,a,h)}function K(c,s,a,h){return I(ee(s),c,a,h)}function pe(c,s,a,h){return I(Z(s),c,a,h)}function O(c,s,a,h){return I(X(s,c.length-a),c,a,h)}o.prototype.write=function(s,a,h,E){if(a===void 0)E="utf8",h=this.length,a=0;else if(h===void 0&&typeof a=="string")E=a,h=this.length,a=0;else if(isFinite(a))a=a>>>0,isFinite(h)?(h=h>>>0,E===void 0&&(E="utf8")):(E=h,h=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let C=this.length-a;if((h===void 0||h>C)&&(h=C),s.length>0&&(h<0||a<0)||a>this.length)throw new RangeError("Attempt to write outside buffer bounds");E||(E="utf8");let $=!1;for(;;)switch(E){case"hex":return z(this,s,a,h);case"utf8":case"utf-8":return Y(this,s,a,h);case"ascii":case"latin1":case"binary":return K(this,s,a,h);case"base64":return pe(this,s,a,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,s,a,h);default:if($)throw new TypeError("Unknown encoding: "+E);E=(""+E).toLowerCase(),$=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function D(c,s,a){return s===0&&a===c.length?t.fromByteArray(c):t.fromByteArray(c.slice(s,a))}function V(c,s,a){a=Math.min(c.length,a);let h=[],E=s;for(;E<a;){let C=c[E],$=null,ye=C>239?4:C>223?3:C>191?2:1;if(E+ye<=a){let Te,Ae,ke,Re;switch(ye){case 1:C<128&&($=C);break;case 2:Te=c[E+1],(Te&192)===128&&(Re=(C&31)<<6|Te&63,Re>127&&($=Re));break;case 3:Te=c[E+1],Ae=c[E+2],(Te&192)===128&&(Ae&192)===128&&(Re=(C&15)<<12|(Te&63)<<6|Ae&63,Re>2047&&(Re<55296||Re>57343)&&($=Re));break;case 4:Te=c[E+1],Ae=c[E+2],ke=c[E+3],(Te&192)===128&&(Ae&192)===128&&(ke&192)===128&&(Re=(C&15)<<18|(Te&63)<<12|(Ae&63)<<6|ke&63,Re>65535&&Re<1114112&&($=Re))}}$===null?($=65533,ye=1):$>65535&&($-=65536,h.push($>>>10&1023|55296),$=56320|$&1023),h.push($),E+=ye}return ae(h)}var B=4096;function ae(c){let s=c.length;if(s<=B)return String.fromCharCode.apply(String,c);let a="",h=0;for(;h<s;)a+=String.fromCharCode.apply(String,c.slice(h,h+=B));return a}function ue(c,s,a){let h="";a=Math.min(c.length,a);for(let E=s;E<a;++E)h+=String.fromCharCode(c[E]&127);return h}function he(c,s,a){let h="";a=Math.min(c.length,a);for(let E=s;E<a;++E)h+=String.fromCharCode(c[E]);return h}function Se(c,s,a){let h=c.length;(!s||s<0)&&(s=0),(!a||a<0||a>h)&&(a=h);let E="";for(let C=s;C<a;++C)E+=J[c[C]];return E}function G(c,s,a){let h=c.slice(s,a),E="";for(let C=0;C<h.length-1;C+=2)E+=String.fromCharCode(h[C]+h[C+1]*256);return E}o.prototype.slice=function(s,a){let h=this.length;s=~~s,a=a===void 0?h:~~a,s<0?(s+=h,s<0&&(s=0)):s>h&&(s=h),a<0?(a+=h,a<0&&(a=0)):a>h&&(a=h),a<s&&(a=s);let E=this.subarray(s,a);return Object.setPrototypeOf(E,o.prototype),E};function ne(c,s,a){if(c%1!==0||c<0)throw new RangeError("offset is not uint");if(c+s>a)throw new RangeError("Trying to access beyond buffer length")}o.prototype.readUintLE=o.prototype.readUIntLE=function(s,a,h){s=s>>>0,a=a>>>0,h||ne(s,a,this.length);let E=this[s],C=1,$=0;for(;++$<a&&(C*=256);)E+=this[s+$]*C;return E},o.prototype.readUintBE=o.prototype.readUIntBE=function(s,a,h){s=s>>>0,a=a>>>0,h||ne(s,a,this.length);let E=this[s+--a],C=1;for(;a>0&&(C*=256);)E+=this[s+--a]*C;return E},o.prototype.readUint8=o.prototype.readUInt8=function(s,a){return s=s>>>0,a||ne(s,1,this.length),this[s]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(s,a){return s=s>>>0,a||ne(s,2,this.length),this[s]|this[s+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(s,a){return s=s>>>0,a||ne(s,2,this.length),this[s]<<8|this[s+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(s,a){return s=s>>>0,a||ne(s,4,this.length),(this[s]|this[s+1]<<8|this[s+2]<<16)+this[s+3]*16777216},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(s,a){return s=s>>>0,a||ne(s,4,this.length),this[s]*16777216+(this[s+1]<<16|this[s+2]<<8|this[s+3])},o.prototype.readBigUInt64LE=fe(function(s){s=s>>>0,be(s,"offset");let a=this[s],h=this[s+7];(a===void 0||h===void 0)&&_e(s,this.length-8);let E=a+this[++s]*2**8+this[++s]*2**16+this[++s]*2**24,C=this[++s]+this[++s]*2**8+this[++s]*2**16+h*2**24;return BigInt(E)+(BigInt(C)<<BigInt(32))}),o.prototype.readBigUInt64BE=fe(function(s){s=s>>>0,be(s,"offset");let a=this[s],h=this[s+7];(a===void 0||h===void 0)&&_e(s,this.length-8);let E=a*2**24+this[++s]*2**16+this[++s]*2**8+this[++s],C=this[++s]*2**24+this[++s]*2**16+this[++s]*2**8+h;return(BigInt(E)<<BigInt(32))+BigInt(C)}),o.prototype.readIntLE=function(s,a,h){s=s>>>0,a=a>>>0,h||ne(s,a,this.length);let E=this[s],C=1,$=0;for(;++$<a&&(C*=256);)E+=this[s+$]*C;return C*=128,E>=C&&(E-=Math.pow(2,8*a)),E},o.prototype.readIntBE=function(s,a,h){s=s>>>0,a=a>>>0,h||ne(s,a,this.length);let E=a,C=1,$=this[s+--E];for(;E>0&&(C*=256);)$+=this[s+--E]*C;return C*=128,$>=C&&($-=Math.pow(2,8*a)),$},o.prototype.readInt8=function(s,a){return s=s>>>0,a||ne(s,1,this.length),this[s]&128?(255-this[s]+1)*-1:this[s]},o.prototype.readInt16LE=function(s,a){s=s>>>0,a||ne(s,2,this.length);let h=this[s]|this[s+1]<<8;return h&32768?h|4294901760:h},o.prototype.readInt16BE=function(s,a){s=s>>>0,a||ne(s,2,this.length);let h=this[s+1]|this[s]<<8;return h&32768?h|4294901760:h},o.prototype.readInt32LE=function(s,a){return s=s>>>0,a||ne(s,4,this.length),this[s]|this[s+1]<<8|this[s+2]<<16|this[s+3]<<24},o.prototype.readInt32BE=function(s,a){return s=s>>>0,a||ne(s,4,this.length),this[s]<<24|this[s+1]<<16|this[s+2]<<8|this[s+3]},o.prototype.readBigInt64LE=fe(function(s){s=s>>>0,be(s,"offset");let a=this[s],h=this[s+7];(a===void 0||h===void 0)&&_e(s,this.length-8);let E=this[s+4]+this[s+5]*2**8+this[s+6]*2**16+(h<<24);return(BigInt(E)<<BigInt(32))+BigInt(a+this[++s]*2**8+this[++s]*2**16+this[++s]*2**24)}),o.prototype.readBigInt64BE=fe(function(s){s=s>>>0,be(s,"offset");let a=this[s],h=this[s+7];(a===void 0||h===void 0)&&_e(s,this.length-8);let E=(a<<24)+this[++s]*2**16+this[++s]*2**8+this[++s];return(BigInt(E)<<BigInt(32))+BigInt(this[++s]*2**24+this[++s]*2**16+this[++s]*2**8+h)}),o.prototype.readFloatLE=function(s,a){return s=s>>>0,a||ne(s,4,this.length),r.read(this,s,!0,23,4)},o.prototype.readFloatBE=function(s,a){return s=s>>>0,a||ne(s,4,this.length),r.read(this,s,!1,23,4)},o.prototype.readDoubleLE=function(s,a){return s=s>>>0,a||ne(s,8,this.length),r.read(this,s,!0,52,8)},o.prototype.readDoubleBE=function(s,a){return s=s>>>0,a||ne(s,8,this.length),r.read(this,s,!1,52,8)};function w(c,s,a,h,E,C){if(!o.isBuffer(c))throw new TypeError('"buffer" argument must be a Buffer instance');if(s>E||s<C)throw new RangeError('"value" argument is out of bounds');if(a+h>c.length)throw new RangeError("Index out of range")}o.prototype.writeUintLE=o.prototype.writeUIntLE=function(s,a,h,E){if(s=+s,a=a>>>0,h=h>>>0,!E){let ye=Math.pow(2,8*h)-1;w(this,s,a,h,ye,0)}let C=1,$=0;for(this[a]=s&255;++$<h&&(C*=256);)this[a+$]=s/C&255;return a+h},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(s,a,h,E){if(s=+s,a=a>>>0,h=h>>>0,!E){let ye=Math.pow(2,8*h)-1;w(this,s,a,h,ye,0)}let C=h-1,$=1;for(this[a+C]=s&255;--C>=0&&($*=256);)this[a+C]=s/$&255;return a+h},o.prototype.writeUint8=o.prototype.writeUInt8=function(s,a,h){return s=+s,a=a>>>0,h||w(this,s,a,1,255,0),this[a]=s&255,a+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(s,a,h){return s=+s,a=a>>>0,h||w(this,s,a,2,65535,0),this[a]=s&255,this[a+1]=s>>>8,a+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(s,a,h){return s=+s,a=a>>>0,h||w(this,s,a,2,65535,0),this[a]=s>>>8,this[a+1]=s&255,a+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(s,a,h){return s=+s,a=a>>>0,h||w(this,s,a,4,4294967295,0),this[a+3]=s>>>24,this[a+2]=s>>>16,this[a+1]=s>>>8,this[a]=s&255,a+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(s,a,h){return s=+s,a=a>>>0,h||w(this,s,a,4,4294967295,0),this[a]=s>>>24,this[a+1]=s>>>16,this[a+2]=s>>>8,this[a+3]=s&255,a+4};function Q(c,s,a,h,E){se(s,h,E,c,a,7);let C=Number(s&BigInt(4294967295));c[a++]=C,C=C>>8,c[a++]=C,C=C>>8,c[a++]=C,C=C>>8,c[a++]=C;let $=Number(s>>BigInt(32)&BigInt(4294967295));return c[a++]=$,$=$>>8,c[a++]=$,$=$>>8,c[a++]=$,$=$>>8,c[a++]=$,a}function le(c,s,a,h,E){se(s,h,E,c,a,7);let C=Number(s&BigInt(4294967295));c[a+7]=C,C=C>>8,c[a+6]=C,C=C>>8,c[a+5]=C,C=C>>8,c[a+4]=C;let $=Number(s>>BigInt(32)&BigInt(4294967295));return c[a+3]=$,$=$>>8,c[a+2]=$,$=$>>8,c[a+1]=$,$=$>>8,c[a]=$,a+8}o.prototype.writeBigUInt64LE=fe(function(s,a=0){return Q(this,s,a,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeBigUInt64BE=fe(function(s,a=0){return le(this,s,a,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeIntLE=function(s,a,h,E){if(s=+s,a=a>>>0,!E){let Te=Math.pow(2,8*h-1);w(this,s,a,h,Te-1,-Te)}let C=0,$=1,ye=0;for(this[a]=s&255;++C<h&&($*=256);)s<0&&ye===0&&this[a+C-1]!==0&&(ye=1),this[a+C]=(s/$>>0)-ye&255;return a+h},o.prototype.writeIntBE=function(s,a,h,E){if(s=+s,a=a>>>0,!E){let Te=Math.pow(2,8*h-1);w(this,s,a,h,Te-1,-Te)}let C=h-1,$=1,ye=0;for(this[a+C]=s&255;--C>=0&&($*=256);)s<0&&ye===0&&this[a+C+1]!==0&&(ye=1),this[a+C]=(s/$>>0)-ye&255;return a+h},o.prototype.writeInt8=function(s,a,h){return s=+s,a=a>>>0,h||w(this,s,a,1,127,-128),s<0&&(s=255+s+1),this[a]=s&255,a+1},o.prototype.writeInt16LE=function(s,a,h){return s=+s,a=a>>>0,h||w(this,s,a,2,32767,-32768),this[a]=s&255,this[a+1]=s>>>8,a+2},o.prototype.writeInt16BE=function(s,a,h){return s=+s,a=a>>>0,h||w(this,s,a,2,32767,-32768),this[a]=s>>>8,this[a+1]=s&255,a+2},o.prototype.writeInt32LE=function(s,a,h){return s=+s,a=a>>>0,h||w(this,s,a,4,2147483647,-2147483648),this[a]=s&255,this[a+1]=s>>>8,this[a+2]=s>>>16,this[a+3]=s>>>24,a+4},o.prototype.writeInt32BE=function(s,a,h){return s=+s,a=a>>>0,h||w(this,s,a,4,2147483647,-2147483648),s<0&&(s=4294967295+s+1),this[a]=s>>>24,this[a+1]=s>>>16,this[a+2]=s>>>8,this[a+3]=s&255,a+4},o.prototype.writeBigInt64LE=fe(function(s,a=0){return Q(this,s,a,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),o.prototype.writeBigInt64BE=fe(function(s,a=0){return le(this,s,a,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function F(c,s,a,h,E,C){if(a+h>c.length)throw new RangeError("Index out of range");if(a<0)throw new RangeError("Index out of range")}function ce(c,s,a,h,E){return s=+s,a=a>>>0,E||F(c,s,a,4,34028234663852886e22,-34028234663852886e22),r.write(c,s,a,h,23,4),a+4}o.prototype.writeFloatLE=function(s,a,h){return ce(this,s,a,!0,h)},o.prototype.writeFloatBE=function(s,a,h){return ce(this,s,a,!1,h)};function me(c,s,a,h,E){return s=+s,a=a>>>0,E||F(c,s,a,8,17976931348623157e292,-17976931348623157e292),r.write(c,s,a,h,52,8),a+8}o.prototype.writeDoubleLE=function(s,a,h){return me(this,s,a,!0,h)},o.prototype.writeDoubleBE=function(s,a,h){return me(this,s,a,!1,h)},o.prototype.copy=function(s,a,h,E){if(!o.isBuffer(s))throw new TypeError("argument should be a Buffer");if(h||(h=0),!E&&E!==0&&(E=this.length),a>=s.length&&(a=s.length),a||(a=0),E>0&&E<h&&(E=h),E===h||s.length===0||this.length===0)return 0;if(a<0)throw new RangeError("targetStart out of bounds");if(h<0||h>=this.length)throw new RangeError("Index out of range");if(E<0)throw new RangeError("sourceEnd out of bounds");E>this.length&&(E=this.length),s.length-a<E-h&&(E=s.length-a+h);let C=E-h;return this===s&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(a,h,E):Uint8Array.prototype.set.call(s,this.subarray(h,E),a),C},o.prototype.fill=function(s,a,h,E){if(typeof s=="string"){if(typeof a=="string"?(E=a,a=0,h=this.length):typeof h=="string"&&(E=h,h=this.length),E!==void 0&&typeof E!="string")throw new TypeError("encoding must be a string");if(typeof E=="string"&&!o.isEncoding(E))throw new TypeError("Unknown encoding: "+E);if(s.length===1){let $=s.charCodeAt(0);(E==="utf8"&&$<128||E==="latin1")&&(s=$)}}else typeof s=="number"?s=s&255:typeof s=="boolean"&&(s=Number(s));if(a<0||this.length<a||this.length<h)throw new RangeError("Out of range index");if(h<=a)return this;a=a>>>0,h=h===void 0?this.length:h>>>0,s||(s=0);let C;if(typeof s=="number")for(C=a;C<h;++C)this[C]=s;else{let $=o.isBuffer(s)?s:o.from(s,E),ye=$.length;if(ye===0)throw new TypeError('The value "'+s+'" is invalid for argument "value"');for(C=0;C<h-a;++C)this[C+a]=$[C%ye]}return this};var ve={};function ge(c,s,a){ve[c]=class extends a{constructor(){super(),Object.defineProperty(this,"message",{value:s.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${c}]`,this.stack,delete this.name}get code(){return c}set code(E){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:E,writable:!0})}toString(){return`${this.name} [${c}]: ${this.message}`}}}ge("ERR_BUFFER_OUT_OF_BOUNDS",function(c){return c?`${c} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ge("ERR_INVALID_ARG_TYPE",function(c,s){return`The "${c}" argument must be of type number. Received type ${typeof s}`},TypeError),ge("ERR_OUT_OF_RANGE",function(c,s,a){let h=`The value of "${c}" is out of range.`,E=a;return Number.isInteger(a)&&Math.abs(a)>2**32?E=q(String(a)):typeof a=="bigint"&&(E=String(a),(a>BigInt(2)**BigInt(32)||a<-(BigInt(2)**BigInt(32)))&&(E=q(E)),E+="n"),h+=` It must be ${s}. Received ${E}`,h},RangeError);function q(c){let s="",a=c.length,h=c[0]==="-"?1:0;for(;a>=h+4;a-=3)s=`_${c.slice(a-3,a)}${s}`;return`${c.slice(0,a)}${s}`}function H(c,s,a){be(s,"offset"),(c[s]===void 0||c[s+a]===void 0)&&_e(s,c.length-(a+1))}function se(c,s,a,h,E,C){if(c>a||c<s){let $=typeof s=="bigint"?"n":"",ye;throw C>3?s===0||s===BigInt(0)?ye=`>= 0${$} and < 2${$} ** ${(C+1)*8}${$}`:ye=`>= -(2${$} ** ${(C+1)*8-1}${$}) and < 2 ** ${(C+1)*8-1}${$}`:ye=`>= ${s}${$} and <= ${a}${$}`,new ve.ERR_OUT_OF_RANGE("value",ye,c)}H(h,E,C)}function be(c,s){if(typeof c!="number")throw new ve.ERR_INVALID_ARG_TYPE(s,"number",c)}function _e(c,s,a){throw Math.floor(c)!==c?(be(c,a),new ve.ERR_OUT_OF_RANGE(a||"offset","an integer",c)):s<0?new ve.ERR_BUFFER_OUT_OF_BOUNDS:new ve.ERR_OUT_OF_RANGE(a||"offset",`>= ${a?1:0} and <= ${s}`,c)}var k=/[^+/0-9A-Za-z-_]/g;function j(c){if(c=c.split("=")[0],c=c.trim().replace(k,""),c.length<2)return"";for(;c.length%4!==0;)c=c+"=";return c}function U(c,s){s=s||1/0;let a,h=c.length,E=null,C=[];for(let $=0;$<h;++$){if(a=c.charCodeAt($),a>55295&&a<57344){if(!E){if(a>56319){(s-=3)>-1&&C.push(239,191,189);continue}else if($+1===h){(s-=3)>-1&&C.push(239,191,189);continue}E=a;continue}if(a<56320){(s-=3)>-1&&C.push(239,191,189),E=a;continue}a=(E-55296<<10|a-56320)+65536}else E&&(s-=3)>-1&&C.push(239,191,189);if(E=null,a<128){if((s-=1)<0)break;C.push(a)}else if(a<2048){if((s-=2)<0)break;C.push(a>>6|192,a&63|128)}else if(a<65536){if((s-=3)<0)break;C.push(a>>12|224,a>>6&63|128,a&63|128)}else if(a<1114112){if((s-=4)<0)break;C.push(a>>18|240,a>>12&63|128,a>>6&63|128,a&63|128)}else throw new Error("Invalid code point")}return C}function ee(c){let s=[];for(let a=0;a<c.length;++a)s.push(c.charCodeAt(a)&255);return s}function X(c,s){let a,h,E,C=[];for(let $=0;$<c.length&&!((s-=2)<0);++$)a=c.charCodeAt($),h=a>>8,E=a%256,C.push(E),C.push(h);return C}function Z(c){return t.toByteArray(j(c))}function I(c,s,a,h){let E;for(E=0;E<h&&!(E+a>=s.length||E>=c.length);++E)s[E+a]=c[E];return E}function W(c,s){return c instanceof s||c!=null&&c.constructor!=null&&c.constructor.name!=null&&c.constructor.name===s.name}function oe(c){return c!==c}var J=function(){let c="0123456789abcdef",s=new Array(256);for(let a=0;a<16;++a){let h=a*16;for(let E=0;E<16;++E)s[h+E]=c[a]+c[E]}return s}();function fe(c){return typeof BigInt>"u"?Pe:c}function Pe(){throw new Error("BigInt not supported")}}}),qs=xe({"node_modules/queue-microtask/index.js"(e,t){var r;t.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:global):i=>(r||(r=Promise.resolve())).then(i).catch(n=>setTimeout(()=>{throw n},0))}}),Ne=xe({"node_modules/readable-stream/lib/ours/primordials.js"(e,t){"use strict";var r=class extends Error{constructor(i){if(!Array.isArray(i))throw new TypeError(`Expected input to be an Array, got ${typeof i}`);let n="";for(let l=0;l<i.length;l++)n+=`    ${i[l].stack}
`;super(n),this.name="AggregateError",this.errors=i}};t.exports={AggregateError:r,ArrayIsArray(i){return Array.isArray(i)},ArrayPrototypeIncludes(i,n){return i.includes(n)},ArrayPrototypeIndexOf(i,n){return i.indexOf(n)},ArrayPrototypeJoin(i,n){return i.join(n)},ArrayPrototypeMap(i,n){return i.map(n)},ArrayPrototypePop(i,n){return i.pop(n)},ArrayPrototypePush(i,n){return i.push(n)},ArrayPrototypeSlice(i,n,l){return i.slice(n,l)},Error,FunctionPrototypeCall(i,n,...l){return i.call(n,...l)},FunctionPrototypeSymbolHasInstance(i,n){return Function.prototype[Symbol.hasInstance].call(i,n)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(i,n){return Object.defineProperties(i,n)},ObjectDefineProperty(i,n,l){return Object.defineProperty(i,n,l)},ObjectGetOwnPropertyDescriptor(i,n){return Object.getOwnPropertyDescriptor(i,n)},ObjectKeys(i){return Object.keys(i)},ObjectSetPrototypeOf(i,n){return Object.setPrototypeOf(i,n)},Promise,PromisePrototypeCatch(i,n){return i.catch(n)},PromisePrototypeThen(i,n,l){return i.then(n,l)},PromiseReject(i){return Promise.reject(i)},PromiseResolve(i){return Promise.resolve(i)},ReflectApply:Reflect.apply,RegExpPrototypeTest(i,n){return i.test(n)},SafeSet:Set,String,StringPrototypeSlice(i,n,l){return i.slice(n,l)},StringPrototypeToLowerCase(i){return i.toLowerCase()},StringPrototypeToUpperCase(i){return i.toUpperCase()},StringPrototypeTrim(i){return i.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(i,n,l){return i.set(n,l)},Boolean,Uint8Array}}}),wn=xe({"node_modules/readable-stream/lib/ours/util/inspect.js"(e,t){"use strict";t.exports={format(r,...i){return r.replace(/%([sdifj])/g,function(...[n,l]){let u=i.shift();return l==="f"?u.toFixed(6):l==="j"?JSON.stringify(u):l==="s"&&typeof u=="object"?`${u.constructor!==Object?u.constructor.name:""} {}`.trim():u.toString()})},inspect(r){switch(typeof r){case"string":if(r.includes("'"))if(r.includes('"')){if(!r.includes("`")&&!r.includes("${"))return`\`${r}\``}else return`"${r}"`;return`'${r}'`;case"number":return isNaN(r)?"NaN":Object.is(r,-0)?String(r):r;case"bigint":return`${String(r)}n`;case"boolean":case"undefined":return String(r);case"object":return"{}"}}}}}),$e=xe({"node_modules/readable-stream/lib/ours/errors.js"(e,t){"use strict";var{format:r,inspect:i}=wn(),{AggregateError:n}=Ne(),l=globalThis.AggregateError||n,u=Symbol("kIsNodeError"),o=["string","function","number","object","Function","Object","boolean","bigint","symbol"],m=/^([A-Z][a-z0-9]*)+$/,d="__node_internal_",p={};function _(f,v){if(!f)throw new p.ERR_INTERNAL_ASSERTION(v)}function y(f){let v="",x=f.length,A=f[0]==="-"?1:0;for(;x>=A+4;x-=3)v=`_${f.slice(x-3,x)}${v}`;return`${f.slice(0,x)}${v}`}function S(f,v,x){if(typeof v=="function")return _(v.length<=x.length,`Code: ${f}; The provided arguments length (${x.length}) does not match the required ones (${v.length}).`),v(...x);let A=(v.match(/%[dfijoOs]/g)||[]).length;return _(A===x.length,`Code: ${f}; The provided arguments length (${x.length}) does not match the required ones (${A}).`),x.length===0?v:r(v,...x)}function R(f,v,x){x||(x=Error);class A extends x{constructor(...L){super(S(f,v,L))}toString(){return`${this.name} [${f}]: ${this.message}`}}Object.defineProperties(A.prototype,{name:{value:x.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${f}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),A.prototype.code=f,A.prototype[u]=!0,p[f]=A}function M(f){let v=d+f.name;return Object.defineProperty(f,"name",{value:v}),f}function N(f,v){if(f&&v&&f!==v){if(Array.isArray(v.errors))return v.errors.push(f),v;let x=new l([v,f],v.message);return x.code=v.code,x}return f||v}var P=class extends Error{constructor(f="The operation was aborted",v=void 0){if(v!==void 0&&typeof v!="object")throw new p.ERR_INVALID_ARG_TYPE("options","Object",v);super(f,v),this.code="ABORT_ERR",this.name="AbortError"}};R("ERR_ASSERTION","%s",Error),R("ERR_INVALID_ARG_TYPE",(f,v,x)=>{_(typeof f=="string","'name' must be a string"),Array.isArray(v)||(v=[v]);let A="The ";f.endsWith(" argument")?A+=`${f} `:A+=`"${f}" ${f.includes(".")?"property":"argument"} `,A+="must be ";let T=[],L=[],z=[];for(let K of v)_(typeof K=="string","All expected entries have to be of type string"),o.includes(K)?T.push(K.toLowerCase()):m.test(K)?L.push(K):(_(K!=="object",'The value "object" should be written as "Object"'),z.push(K));if(L.length>0){let K=T.indexOf("object");K!==-1&&(T.splice(T,K,1),L.push("Object"))}if(T.length>0){switch(T.length){case 1:A+=`of type ${T[0]}`;break;case 2:A+=`one of type ${T[0]} or ${T[1]}`;break;default:{let K=T.pop();A+=`one of type ${T.join(", ")}, or ${K}`}}(L.length>0||z.length>0)&&(A+=" or ")}if(L.length>0){switch(L.length){case 1:A+=`an instance of ${L[0]}`;break;case 2:A+=`an instance of ${L[0]} or ${L[1]}`;break;default:{let K=L.pop();A+=`an instance of ${L.join(", ")}, or ${K}`}}z.length>0&&(A+=" or ")}switch(z.length){case 0:break;case 1:z[0].toLowerCase()!==z[0]&&(A+="an "),A+=`${z[0]}`;break;case 2:A+=`one of ${z[0]} or ${z[1]}`;break;default:{let K=z.pop();A+=`one of ${z.join(", ")}, or ${K}`}}if(x==null)A+=`. Received ${x}`;else if(typeof x=="function"&&x.name)A+=`. Received function ${x.name}`;else if(typeof x=="object"){var Y;if((Y=x.constructor)!==null&&Y!==void 0&&Y.name)A+=`. Received an instance of ${x.constructor.name}`;else{let K=i(x,{depth:-1});A+=`. Received ${K}`}}else{let K=i(x,{colors:!1});K.length>25&&(K=`${K.slice(0,25)}...`),A+=`. Received type ${typeof x} (${K})`}return A},TypeError),R("ERR_INVALID_ARG_VALUE",(f,v,x="is invalid")=>{let A=i(v);return A.length>128&&(A=A.slice(0,128)+"..."),`The ${f.includes(".")?"property":"argument"} '${f}' ${x}. Received ${A}`},TypeError),R("ERR_INVALID_RETURN_VALUE",(f,v,x)=>{var A;let T=x!=null&&(A=x.constructor)!==null&&A!==void 0&&A.name?`instance of ${x.constructor.name}`:`type ${typeof x}`;return`Expected ${f} to be returned from the "${v}" function but got ${T}.`},TypeError),R("ERR_MISSING_ARGS",(...f)=>{_(f.length>0,"At least one arg needs to be specified");let v,x=f.length;switch(f=(Array.isArray(f)?f:[f]).map(A=>`"${A}"`).join(" or "),x){case 1:v+=`The ${f[0]} argument`;break;case 2:v+=`The ${f[0]} and ${f[1]} arguments`;break;default:{let A=f.pop();v+=`The ${f.join(", ")}, and ${A} arguments`}break}return`${v} must be specified`},TypeError),R("ERR_OUT_OF_RANGE",(f,v,x)=>{_(v,'Missing "range" argument');let A;if(Number.isInteger(x)&&Math.abs(x)>2**32)A=y(String(x));else if(typeof x=="bigint"){A=String(x);let T=BigInt(2)**BigInt(32);(x>T||x<-T)&&(A=y(A)),A+="n"}else A=i(x);return`The value of "${f}" is out of range. It must be ${v}. Received ${A}`},RangeError),R("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),R("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),R("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),R("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),R("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),R("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),R("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),R("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),R("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),R("ERR_STREAM_WRITE_AFTER_END","write after end",Error),R("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),t.exports={AbortError:P,aggregateTwoErrors:M(N),hideStackFrames:M,codes:p}}}),nr=xe({"node_modules/abort-controller/browser.js"(e,t){"use strict";var{AbortController:r,AbortSignal:i}=typeof self<"u"?self:typeof window<"u"?window:void 0;t.exports=r,t.exports.AbortSignal=i,t.exports.default=r}}),wr=xe({"node_modules/events/events.js"(e,t){"use strict";var r=typeof Reflect=="object"?Reflect:null,i=r&&typeof r.apply=="function"?r.apply:function(L,z,Y){return Function.prototype.apply.call(L,z,Y)},n;r&&typeof r.ownKeys=="function"?n=r.ownKeys:Object.getOwnPropertySymbols?n=function(L){return Object.getOwnPropertyNames(L).concat(Object.getOwnPropertySymbols(L))}:n=function(L){return Object.getOwnPropertyNames(L)};function l(T){console&&console.warn&&console.warn(T)}var u=Number.isNaN||function(L){return L!==L};function o(){o.init.call(this)}t.exports=o,t.exports.once=v,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var m=10;function d(T){if(typeof T!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof T)}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return m},set:function(T){if(typeof T!="number"||T<0||u(T))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+T+".");m=T}}),o.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(L){if(typeof L!="number"||L<0||u(L))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+L+".");return this._maxListeners=L,this};function p(T){return T._maxListeners===void 0?o.defaultMaxListeners:T._maxListeners}o.prototype.getMaxListeners=function(){return p(this)},o.prototype.emit=function(L){for(var z=[],Y=1;Y<arguments.length;Y++)z.push(arguments[Y]);var K=L==="error",pe=this._events;if(pe!==void 0)K=K&&pe.error===void 0;else if(!K)return!1;if(K){var O;if(z.length>0&&(O=z[0]),O instanceof Error)throw O;var D=new Error("Unhandled error."+(O?" ("+O.message+")":""));throw D.context=O,D}var V=pe[L];if(V===void 0)return!1;if(typeof V=="function")i(V,this,z);else for(var B=V.length,ae=N(V,B),Y=0;Y<B;++Y)i(ae[Y],this,z);return!0};function _(T,L,z,Y){var K,pe,O;if(d(z),pe=T._events,pe===void 0?(pe=T._events=Object.create(null),T._eventsCount=0):(pe.newListener!==void 0&&(T.emit("newListener",L,z.listener?z.listener:z),pe=T._events),O=pe[L]),O===void 0)O=pe[L]=z,++T._eventsCount;else if(typeof O=="function"?O=pe[L]=Y?[z,O]:[O,z]:Y?O.unshift(z):O.push(z),K=p(T),K>0&&O.length>K&&!O.warned){O.warned=!0;var D=new Error("Possible EventEmitter memory leak detected. "+O.length+" "+String(L)+" listeners added. Use emitter.setMaxListeners() to increase limit");D.name="MaxListenersExceededWarning",D.emitter=T,D.type=L,D.count=O.length,l(D)}return T}o.prototype.addListener=function(L,z){return _(this,L,z,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(L,z){return _(this,L,z,!0)};function y(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function S(T,L,z){var Y={fired:!1,wrapFn:void 0,target:T,type:L,listener:z},K=y.bind(Y);return K.listener=z,Y.wrapFn=K,K}o.prototype.once=function(L,z){return d(z),this.on(L,S(this,L,z)),this},o.prototype.prependOnceListener=function(L,z){return d(z),this.prependListener(L,S(this,L,z)),this},o.prototype.removeListener=function(L,z){var Y,K,pe,O,D;if(d(z),K=this._events,K===void 0)return this;if(Y=K[L],Y===void 0)return this;if(Y===z||Y.listener===z)--this._eventsCount===0?this._events=Object.create(null):(delete K[L],K.removeListener&&this.emit("removeListener",L,Y.listener||z));else if(typeof Y!="function"){for(pe=-1,O=Y.length-1;O>=0;O--)if(Y[O]===z||Y[O].listener===z){D=Y[O].listener,pe=O;break}if(pe<0)return this;pe===0?Y.shift():P(Y,pe),Y.length===1&&(K[L]=Y[0]),K.removeListener!==void 0&&this.emit("removeListener",L,D||z)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(L){var z,Y,K;if(Y=this._events,Y===void 0)return this;if(Y.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):Y[L]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete Y[L]),this;if(arguments.length===0){var pe=Object.keys(Y),O;for(K=0;K<pe.length;++K)O=pe[K],O!=="removeListener"&&this.removeAllListeners(O);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(z=Y[L],typeof z=="function")this.removeListener(L,z);else if(z!==void 0)for(K=z.length-1;K>=0;K--)this.removeListener(L,z[K]);return this};function R(T,L,z){var Y=T._events;if(Y===void 0)return[];var K=Y[L];return K===void 0?[]:typeof K=="function"?z?[K.listener||K]:[K]:z?f(K):N(K,K.length)}o.prototype.listeners=function(L){return R(this,L,!0)},o.prototype.rawListeners=function(L){return R(this,L,!1)},o.listenerCount=function(T,L){return typeof T.listenerCount=="function"?T.listenerCount(L):M.call(T,L)},o.prototype.listenerCount=M;function M(T){var L=this._events;if(L!==void 0){var z=L[T];if(typeof z=="function")return 1;if(z!==void 0)return z.length}return 0}o.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function N(T,L){for(var z=new Array(L),Y=0;Y<L;++Y)z[Y]=T[Y];return z}function P(T,L){for(;L+1<T.length;L++)T[L]=T[L+1];T.pop()}function f(T){for(var L=new Array(T.length),z=0;z<L.length;++z)L[z]=T[z].listener||T[z];return L}function v(T,L){return new Promise(function(z,Y){function K(O){T.removeListener(L,pe),Y(O)}function pe(){typeof T.removeListener=="function"&&T.removeListener("error",K),z([].slice.call(arguments))}A(T,L,pe,{once:!0}),L!=="error"&&x(T,K,{once:!0})})}function x(T,L,z){typeof T.on=="function"&&A(T,"error",L,z)}function A(T,L,z,Y){if(typeof T.on=="function")Y.once?T.once(L,z):T.on(L,z);else if(typeof T.addEventListener=="function")T.addEventListener(L,function K(pe){Y.once&&T.removeEventListener(L,K),z(pe)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof T)}}}),Fe=xe({"node_modules/readable-stream/lib/ours/util.js"(e,t){"use strict";var r=et(),{format:i,inspect:n}=wn(),{codes:{ERR_INVALID_ARG_TYPE:l}}=$e(),{kResistStopPropagation:u,AggregateError:o,SymbolDispose:m}=Ne(),d=globalThis.AbortSignal||nr().AbortSignal,p=globalThis.AbortController||nr().AbortController,_=Object.getPrototypeOf(async function(){}).constructor,y=globalThis.Blob||r.Blob,S=typeof y<"u"?function(P){return P instanceof y}:function(P){return!1},R=(N,P)=>{if(N!==void 0&&(N===null||typeof N!="object"||!("aborted"in N)))throw new l(P,"AbortSignal",N)},M=(N,P)=>{if(typeof N!="function")throw new l(P,"Function",N)};t.exports={AggregateError:o,kEmptyObject:Object.freeze({}),once(N){let P=!1;return function(...f){P||(P=!0,N.apply(this,f))}},createDeferredPromise:function(){let N,P;return{promise:new Promise((v,x)=>{N=v,P=x}),resolve:N,reject:P}},promisify(N){return new Promise((P,f)=>{N((v,...x)=>v?f(v):P(...x))})},debuglog(){return function(){}},format:i,inspect:n,types:{isAsyncFunction(N){return N instanceof _},isArrayBufferView(N){return ArrayBuffer.isView(N)}},isBlob:S,deprecate(N,P){return N},addAbortListener:wr().addAbortListener||function(P,f){if(P===void 0)throw new l("signal","AbortSignal",P);R(P,"signal"),M(f,"listener");let v;return P.aborted?queueMicrotask(()=>f()):(P.addEventListener("abort",f,{__proto__:null,once:!0,[u]:!0}),v=()=>{P.removeEventListener("abort",f)}),{__proto__:null,[m](){var x;(x=v)===null||x===void 0||x()}}},AbortSignalAny:d.any||function(P){if(P.length===1)return P[0];let f=new p,v=()=>f.abort();return P.forEach(x=>{R(x,"signals"),x.addEventListener("abort",v,{once:!0})}),f.signal.addEventListener("abort",()=>{P.forEach(x=>x.removeEventListener("abort",v))},{once:!0}),f.signal}},t.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}}),ar=xe({"node_modules/readable-stream/lib/internal/validators.js"(e,t){"use strict";var{ArrayIsArray:r,ArrayPrototypeIncludes:i,ArrayPrototypeJoin:n,ArrayPrototypeMap:l,NumberIsInteger:u,NumberIsNaN:o,NumberMAX_SAFE_INTEGER:m,NumberMIN_SAFE_INTEGER:d,NumberParseInt:p,ObjectPrototypeHasOwnProperty:_,RegExpPrototypeExec:y,String:S,StringPrototypeToUpperCase:R,StringPrototypeTrim:M}=Ne(),{hideStackFrames:N,codes:{ERR_SOCKET_BAD_PORT:P,ERR_INVALID_ARG_TYPE:f,ERR_INVALID_ARG_VALUE:v,ERR_OUT_OF_RANGE:x,ERR_UNKNOWN_SIGNAL:A}}=$e(),{normalizeEncoding:T}=Fe(),{isAsyncFunction:L,isArrayBufferView:z}=Fe().types,Y={};function K(I){return I===(I|0)}function pe(I){return I===I>>>0}var O=/^[0-7]+$/,D="must be a 32-bit unsigned integer or an octal string";function V(I,W,oe){if(typeof I>"u"&&(I=oe),typeof I=="string"){if(y(O,I)===null)throw new v(W,I,D);I=p(I,8)}return ue(I,W),I}var B=N((I,W,oe=d,J=m)=>{if(typeof I!="number")throw new f(W,"number",I);if(!u(I))throw new x(W,"an integer",I);if(I<oe||I>J)throw new x(W,`>= ${oe} && <= ${J}`,I)}),ae=N((I,W,oe=-2147483648,J=2147483647)=>{if(typeof I!="number")throw new f(W,"number",I);if(!u(I))throw new x(W,"an integer",I);if(I<oe||I>J)throw new x(W,`>= ${oe} && <= ${J}`,I)}),ue=N((I,W,oe=!1)=>{if(typeof I!="number")throw new f(W,"number",I);if(!u(I))throw new x(W,"an integer",I);let J=oe?1:0,fe=4294967295;if(I<J||I>fe)throw new x(W,`>= ${J} && <= ${fe}`,I)});function he(I,W){if(typeof I!="string")throw new f(W,"string",I)}function Se(I,W,oe=void 0,J){if(typeof I!="number")throw new f(W,"number",I);if(oe!=null&&I<oe||J!=null&&I>J||(oe!=null||J!=null)&&o(I))throw new x(W,`${oe!=null?`>= ${oe}`:""}${oe!=null&&J!=null?" && ":""}${J!=null?`<= ${J}`:""}`,I)}var G=N((I,W,oe)=>{if(!i(oe,I)){let fe="must be one of: "+n(l(oe,Pe=>typeof Pe=="string"?`'${Pe}'`:S(Pe)),", ");throw new v(W,I,fe)}});function ne(I,W){if(typeof I!="boolean")throw new f(W,"boolean",I)}function w(I,W,oe){return I==null||!_(I,W)?oe:I[W]}var Q=N((I,W,oe=null)=>{let J=w(oe,"allowArray",!1),fe=w(oe,"allowFunction",!1);if(!w(oe,"nullable",!1)&&I===null||!J&&r(I)||typeof I!="object"&&(!fe||typeof I!="function"))throw new f(W,"Object",I)}),le=N((I,W)=>{if(I!=null&&typeof I!="object"&&typeof I!="function")throw new f(W,"a dictionary",I)}),F=N((I,W,oe=0)=>{if(!r(I))throw new f(W,"Array",I);if(I.length<oe){let J=`must be longer than ${oe}`;throw new v(W,I,J)}});function ce(I,W){F(I,W);for(let oe=0;oe<I.length;oe++)he(I[oe],`${W}[${oe}]`)}function me(I,W){F(I,W);for(let oe=0;oe<I.length;oe++)ne(I[oe],`${W}[${oe}]`)}function ve(I,W){F(I,W);for(let oe=0;oe<I.length;oe++){let J=I[oe],fe=`${W}[${oe}]`;if(J==null)throw new f(fe,"AbortSignal",J);be(J,fe)}}function ge(I,W="signal"){if(he(I,W),Y[I]===void 0)throw Y[R(I)]!==void 0?new A(I+" (signals must use all capital letters)"):new A(I)}var q=N((I,W="buffer")=>{if(!z(I))throw new f(W,["Buffer","TypedArray","DataView"],I)});function H(I,W){let oe=T(W),J=I.length;if(oe==="hex"&&J%2!==0)throw new v("encoding",W,`is invalid for data of length ${J}`)}function se(I,W="Port",oe=!0){if(typeof I!="number"&&typeof I!="string"||typeof I=="string"&&M(I).length===0||+I!==+I>>>0||I>65535||I===0&&!oe)throw new P(W,I,oe);return I|0}var be=N((I,W)=>{if(I!==void 0&&(I===null||typeof I!="object"||!("aborted"in I)))throw new f(W,"AbortSignal",I)}),_e=N((I,W)=>{if(typeof I!="function")throw new f(W,"Function",I)}),k=N((I,W)=>{if(typeof I!="function"||L(I))throw new f(W,"Function",I)}),j=N((I,W)=>{if(I!==void 0)throw new f(W,"undefined",I)});function U(I,W,oe){if(!i(oe,I))throw new f(W,`('${n(oe,"|")}')`,I)}var ee=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function X(I,W){if(typeof I>"u"||!y(ee,I))throw new v(W,I,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function Z(I){if(typeof I=="string")return X(I,"hints"),I;if(r(I)){let W=I.length,oe="";if(W===0)return oe;for(let J=0;J<W;J++){let fe=I[J];X(fe,"hints"),oe+=fe,J!==W-1&&(oe+=", ")}return oe}throw new v("hints",I,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}t.exports={isInt32:K,isUint32:pe,parseFileMode:V,validateArray:F,validateStringArray:ce,validateBooleanArray:me,validateAbortSignalArray:ve,validateBoolean:ne,validateBuffer:q,validateDictionary:le,validateEncoding:H,validateFunction:_e,validateInt32:ae,validateInteger:B,validateNumber:Se,validateObject:Q,validateOneOf:G,validatePlainFunction:k,validatePort:se,validateSignalName:ge,validateString:he,validateUint32:ue,validateUndefined:j,validateUnion:U,validateAbortSignal:be,validateLinkHeaderValue:Z}}}),vt=xe({"node_modules/process/browser.js"(e,t){var r=t.exports={},i,n;function l(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?i=setTimeout:i=l}catch{i=l}try{typeof clearTimeout=="function"?n=clearTimeout:n=u}catch{n=u}})();function o(P){if(i===setTimeout)return setTimeout(P,0);if((i===l||!i)&&setTimeout)return i=setTimeout,setTimeout(P,0);try{return i(P,0)}catch{try{return i.call(null,P,0)}catch{return i.call(this,P,0)}}}function m(P){if(n===clearTimeout)return clearTimeout(P);if((n===u||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(P);try{return n(P)}catch{try{return n.call(null,P)}catch{return n.call(this,P)}}}var d=[],p=!1,_,y=-1;function S(){!p||!_||(p=!1,_.length?d=_.concat(d):y=-1,d.length&&R())}function R(){if(!p){var P=o(S);p=!0;for(var f=d.length;f;){for(_=d,d=[];++y<f;)_&&_[y].run();y=-1,f=d.length}_=null,p=!1,m(P)}}r.nextTick=function(P){var f=new Array(arguments.length-1);if(arguments.length>1)for(var v=1;v<arguments.length;v++)f[v-1]=arguments[v];d.push(new M(P,f)),d.length===1&&!p&&o(R)};function M(P,f){this.fun=P,this.array=f}M.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={};function N(){}r.on=N,r.addListener=N,r.once=N,r.off=N,r.removeListener=N,r.removeAllListeners=N,r.emit=N,r.prependListener=N,r.prependOnceListener=N,r.listeners=function(P){return[]},r.binding=function(P){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(P){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}}}),tt=xe({"node_modules/readable-stream/lib/internal/streams/utils.js"(e,t){"use strict";var{SymbolAsyncIterator:r,SymbolIterator:i,SymbolFor:n}=Ne(),l=n("nodejs.stream.destroyed"),u=n("nodejs.stream.errored"),o=n("nodejs.stream.readable"),m=n("nodejs.stream.writable"),d=n("nodejs.stream.disturbed"),p=n("nodejs.webstream.isClosedPromise"),_=n("nodejs.webstream.controllerErrorFunction");function y(w,Q=!1){var le;return!!(w&&typeof w.pipe=="function"&&typeof w.on=="function"&&(!Q||typeof w.pause=="function"&&typeof w.resume=="function")&&(!w._writableState||((le=w._readableState)===null||le===void 0?void 0:le.readable)!==!1)&&(!w._writableState||w._readableState))}function S(w){var Q;return!!(w&&typeof w.write=="function"&&typeof w.on=="function"&&(!w._readableState||((Q=w._writableState)===null||Q===void 0?void 0:Q.writable)!==!1))}function R(w){return!!(w&&typeof w.pipe=="function"&&w._readableState&&typeof w.on=="function"&&typeof w.write=="function")}function M(w){return w&&(w._readableState||w._writableState||typeof w.write=="function"&&typeof w.on=="function"||typeof w.pipe=="function"&&typeof w.on=="function")}function N(w){return!!(w&&!M(w)&&typeof w.pipeThrough=="function"&&typeof w.getReader=="function"&&typeof w.cancel=="function")}function P(w){return!!(w&&!M(w)&&typeof w.getWriter=="function"&&typeof w.abort=="function")}function f(w){return!!(w&&!M(w)&&typeof w.readable=="object"&&typeof w.writable=="object")}function v(w){return N(w)||P(w)||f(w)}function x(w,Q){return w==null?!1:Q===!0?typeof w[r]=="function":Q===!1?typeof w[i]=="function":typeof w[r]=="function"||typeof w[i]=="function"}function A(w){if(!M(w))return null;let Q=w._writableState,le=w._readableState,F=Q||le;return!!(w.destroyed||w[l]||F!=null&&F.destroyed)}function T(w){if(!S(w))return null;if(w.writableEnded===!0)return!0;let Q=w._writableState;return Q!=null&&Q.errored?!1:typeof Q?.ended!="boolean"?null:Q.ended}function L(w,Q){if(!S(w))return null;if(w.writableFinished===!0)return!0;let le=w._writableState;return le!=null&&le.errored?!1:typeof le?.finished!="boolean"?null:!!(le.finished||Q===!1&&le.ended===!0&&le.length===0)}function z(w){if(!y(w))return null;if(w.readableEnded===!0)return!0;let Q=w._readableState;return!Q||Q.errored?!1:typeof Q?.ended!="boolean"?null:Q.ended}function Y(w,Q){if(!y(w))return null;let le=w._readableState;return le!=null&&le.errored?!1:typeof le?.endEmitted!="boolean"?null:!!(le.endEmitted||Q===!1&&le.ended===!0&&le.length===0)}function K(w){return w&&w[o]!=null?w[o]:typeof w?.readable!="boolean"?null:A(w)?!1:y(w)&&w.readable&&!Y(w)}function pe(w){return w&&w[m]!=null?w[m]:typeof w?.writable!="boolean"?null:A(w)?!1:S(w)&&w.writable&&!T(w)}function O(w,Q){return M(w)?A(w)?!0:!(Q?.readable!==!1&&K(w)||Q?.writable!==!1&&pe(w)):null}function D(w){var Q,le;return M(w)?w.writableErrored?w.writableErrored:(Q=(le=w._writableState)===null||le===void 0?void 0:le.errored)!==null&&Q!==void 0?Q:null:null}function V(w){var Q,le;return M(w)?w.readableErrored?w.readableErrored:(Q=(le=w._readableState)===null||le===void 0?void 0:le.errored)!==null&&Q!==void 0?Q:null:null}function B(w){if(!M(w))return null;if(typeof w.closed=="boolean")return w.closed;let Q=w._writableState,le=w._readableState;return typeof Q?.closed=="boolean"||typeof le?.closed=="boolean"?Q?.closed||le?.closed:typeof w._closed=="boolean"&&ae(w)?w._closed:null}function ae(w){return typeof w._closed=="boolean"&&typeof w._defaultKeepAlive=="boolean"&&typeof w._removedConnection=="boolean"&&typeof w._removedContLen=="boolean"}function ue(w){return typeof w._sent100=="boolean"&&ae(w)}function he(w){var Q;return typeof w._consuming=="boolean"&&typeof w._dumped=="boolean"&&((Q=w.req)===null||Q===void 0?void 0:Q.upgradeOrConnect)===void 0}function Se(w){if(!M(w))return null;let Q=w._writableState,le=w._readableState,F=Q||le;return!F&&ue(w)||!!(F&&F.autoDestroy&&F.emitClose&&F.closed===!1)}function G(w){var Q;return!!(w&&((Q=w[d])!==null&&Q!==void 0?Q:w.readableDidRead||w.readableAborted))}function ne(w){var Q,le,F,ce,me,ve,ge,q,H,se;return!!(w&&((Q=(le=(F=(ce=(me=(ve=w[u])!==null&&ve!==void 0?ve:w.readableErrored)!==null&&me!==void 0?me:w.writableErrored)!==null&&ce!==void 0?ce:(ge=w._readableState)===null||ge===void 0?void 0:ge.errorEmitted)!==null&&F!==void 0?F:(q=w._writableState)===null||q===void 0?void 0:q.errorEmitted)!==null&&le!==void 0?le:(H=w._readableState)===null||H===void 0?void 0:H.errored)!==null&&Q!==void 0?Q:!((se=w._writableState)===null||se===void 0)&&se.errored))}t.exports={isDestroyed:A,kIsDestroyed:l,isDisturbed:G,kIsDisturbed:d,isErrored:ne,kIsErrored:u,isReadable:K,kIsReadable:o,kIsClosedPromise:p,kControllerErrorFunction:_,kIsWritable:m,isClosed:B,isDuplexNodeStream:R,isFinished:O,isIterable:x,isReadableNodeStream:y,isReadableStream:N,isReadableEnded:z,isReadableFinished:Y,isReadableErrored:V,isNodeStream:M,isWebStream:v,isWritable:pe,isWritableNodeStream:S,isWritableStream:P,isWritableEnded:T,isWritableFinished:L,isWritableErrored:D,isServerRequest:he,isServerResponse:ue,willEmitClose:Se,isTransformStream:f}}}),ut=xe({"node_modules/readable-stream/lib/internal/streams/end-of-stream.js"(e,t){"use strict";var r=vt(),{AbortError:i,codes:n}=$e(),{ERR_INVALID_ARG_TYPE:l,ERR_STREAM_PREMATURE_CLOSE:u}=n,{kEmptyObject:o,once:m}=Fe(),{validateAbortSignal:d,validateFunction:p,validateObject:_,validateBoolean:y}=ar(),{Promise:S,PromisePrototypeThen:R,SymbolDispose:M}=Ne(),{isClosed:N,isReadable:P,isReadableNodeStream:f,isReadableStream:v,isReadableFinished:x,isReadableErrored:A,isWritable:T,isWritableNodeStream:L,isWritableStream:z,isWritableFinished:Y,isWritableErrored:K,isNodeStream:pe,willEmitClose:O,kIsClosedPromise:D}=tt(),V;function B(G){return G.setHeader&&typeof G.abort=="function"}var ae=()=>{};function ue(G,ne,w){var Q,le;if(arguments.length===2?(w=ne,ne=o):ne==null?ne=o:_(ne,"options"),p(w,"callback"),d(ne.signal,"options.signal"),w=m(w),v(G)||z(G))return he(G,ne,w);if(!pe(G))throw new l("stream",["ReadableStream","WritableStream","Stream"],G);let F=(Q=ne.readable)!==null&&Q!==void 0?Q:f(G),ce=(le=ne.writable)!==null&&le!==void 0?le:L(G),me=G._writableState,ve=G._readableState,ge=()=>{G.writable||se()},q=O(G)&&f(G)===F&&L(G)===ce,H=Y(G,!1),se=()=>{H=!0,G.destroyed&&(q=!1),!(q&&(!G.readable||F))&&(!F||be)&&w.call(G)},be=x(G,!1),_e=()=>{be=!0,G.destroyed&&(q=!1),!(q&&(!G.writable||ce))&&(!ce||H)&&w.call(G)},k=I=>{w.call(G,I)},j=N(G),U=()=>{j=!0;let I=K(G)||A(G);if(I&&typeof I!="boolean")return w.call(G,I);if(F&&!be&&f(G,!0)&&!x(G,!1))return w.call(G,new u);if(ce&&!H&&!Y(G,!1))return w.call(G,new u);w.call(G)},ee=()=>{j=!0;let I=K(G)||A(G);if(I&&typeof I!="boolean")return w.call(G,I);w.call(G)},X=()=>{G.req.on("finish",se)};B(G)?(G.on("complete",se),q||G.on("abort",U),G.req?X():G.on("request",X)):ce&&!me&&(G.on("end",ge),G.on("close",ge)),!q&&typeof G.aborted=="boolean"&&G.on("aborted",U),G.on("end",_e),G.on("finish",se),ne.error!==!1&&G.on("error",k),G.on("close",U),j?r.nextTick(U):me!=null&&me.errorEmitted||ve!=null&&ve.errorEmitted?q||r.nextTick(ee):(!F&&(!q||P(G))&&(H||T(G)===!1)||!ce&&(!q||T(G))&&(be||P(G)===!1)||ve&&G.req&&G.aborted)&&r.nextTick(ee);let Z=()=>{w=ae,G.removeListener("aborted",U),G.removeListener("complete",se),G.removeListener("abort",U),G.removeListener("request",X),G.req&&G.req.removeListener("finish",se),G.removeListener("end",ge),G.removeListener("close",ge),G.removeListener("finish",se),G.removeListener("end",_e),G.removeListener("error",k),G.removeListener("close",U)};if(ne.signal&&!j){let I=()=>{let W=w;Z(),W.call(G,new i(void 0,{cause:ne.signal.reason}))};if(ne.signal.aborted)r.nextTick(I);else{V=V||Fe().addAbortListener;let W=V(ne.signal,I),oe=w;w=m((...J)=>{W[M](),oe.apply(G,J)})}}return Z}function he(G,ne,w){let Q=!1,le=ae;if(ne.signal)if(le=()=>{Q=!0,w.call(G,new i(void 0,{cause:ne.signal.reason}))},ne.signal.aborted)r.nextTick(le);else{V=V||Fe().addAbortListener;let ce=V(ne.signal,le),me=w;w=m((...ve)=>{ce[M](),me.apply(G,ve)})}let F=(...ce)=>{Q||r.nextTick(()=>w.apply(G,ce))};return R(G[D].promise,F,F),ae}function Se(G,ne){var w;let Q=!1;return ne===null&&(ne=o),(w=ne)!==null&&w!==void 0&&w.cleanup&&(y(ne.cleanup,"cleanup"),Q=ne.cleanup),new S((le,F)=>{let ce=ue(G,ne,me=>{Q&&ce(),me?F(me):le()})})}t.exports=ue,t.exports.finished=Se}}),Ot=xe({"node_modules/readable-stream/lib/internal/streams/destroy.js"(e,t){"use strict";var r=vt(),{aggregateTwoErrors:i,codes:{ERR_MULTIPLE_CALLBACK:n},AbortError:l}=$e(),{Symbol:u}=Ne(),{kIsDestroyed:o,isDestroyed:m,isFinished:d,isServerRequest:p}=tt(),_=u("kDestroy"),y=u("kConstruct");function S(O,D,V){O&&(O.stack,D&&!D.errored&&(D.errored=O),V&&!V.errored&&(V.errored=O))}function R(O,D){let V=this._readableState,B=this._writableState,ae=B||V;return B!=null&&B.destroyed||V!=null&&V.destroyed?(typeof D=="function"&&D(),this):(S(O,B,V),B&&(B.destroyed=!0),V&&(V.destroyed=!0),ae.constructed?M(this,O,D):this.once(_,function(ue){M(this,i(ue,O),D)}),this)}function M(O,D,V){let B=!1;function ae(ue){if(B)return;B=!0;let he=O._readableState,Se=O._writableState;S(ue,Se,he),Se&&(Se.closed=!0),he&&(he.closed=!0),typeof V=="function"&&V(ue),ue?r.nextTick(N,O,ue):r.nextTick(P,O)}try{O._destroy(D||null,ae)}catch(ue){ae(ue)}}function N(O,D){f(O,D),P(O)}function P(O){let D=O._readableState,V=O._writableState;V&&(V.closeEmitted=!0),D&&(D.closeEmitted=!0),(V!=null&&V.emitClose||D!=null&&D.emitClose)&&O.emit("close")}function f(O,D){let V=O._readableState,B=O._writableState;B!=null&&B.errorEmitted||V!=null&&V.errorEmitted||(B&&(B.errorEmitted=!0),V&&(V.errorEmitted=!0),O.emit("error",D))}function v(){let O=this._readableState,D=this._writableState;O&&(O.constructed=!0,O.closed=!1,O.closeEmitted=!1,O.destroyed=!1,O.errored=null,O.errorEmitted=!1,O.reading=!1,O.ended=O.readable===!1,O.endEmitted=O.readable===!1),D&&(D.constructed=!0,D.destroyed=!1,D.closed=!1,D.closeEmitted=!1,D.errored=null,D.errorEmitted=!1,D.finalCalled=!1,D.prefinished=!1,D.ended=D.writable===!1,D.ending=D.writable===!1,D.finished=D.writable===!1)}function x(O,D,V){let B=O._readableState,ae=O._writableState;if(ae!=null&&ae.destroyed||B!=null&&B.destroyed)return this;B!=null&&B.autoDestroy||ae!=null&&ae.autoDestroy?O.destroy(D):D&&(D.stack,ae&&!ae.errored&&(ae.errored=D),B&&!B.errored&&(B.errored=D),V?r.nextTick(f,O,D):f(O,D))}function A(O,D){if(typeof O._construct!="function")return;let V=O._readableState,B=O._writableState;V&&(V.constructed=!1),B&&(B.constructed=!1),O.once(y,D),!(O.listenerCount(y)>1)&&r.nextTick(T,O)}function T(O){let D=!1;function V(B){if(D){x(O,B??new n);return}D=!0;let ae=O._readableState,ue=O._writableState,he=ue||ae;ae&&(ae.constructed=!0),ue&&(ue.constructed=!0),he.destroyed?O.emit(_,B):B?x(O,B,!0):r.nextTick(L,O)}try{O._construct(B=>{r.nextTick(V,B)})}catch(B){r.nextTick(V,B)}}function L(O){O.emit(y)}function z(O){return O?.setHeader&&typeof O.abort=="function"}function Y(O){O.emit("close")}function K(O,D){O.emit("error",D),r.nextTick(Y,O)}function pe(O,D){!O||m(O)||(!D&&!d(O)&&(D=new l),p(O)?(O.socket=null,O.destroy(D)):z(O)?O.abort():z(O.req)?O.req.abort():typeof O.destroy=="function"?O.destroy(D):typeof O.close=="function"?O.close():D?r.nextTick(K,O,D):r.nextTick(Y,O),O.destroyed||(O[o]=!0))}t.exports={construct:A,destroyer:pe,destroy:R,undestroy:v,errorOrDestroy:x}}}),ti=xe({"node_modules/readable-stream/lib/internal/streams/legacy.js"(e,t){"use strict";var{ArrayIsArray:r,ObjectSetPrototypeOf:i}=Ne(),{EventEmitter:n}=wr();function l(o){n.call(this,o)}i(l.prototype,n.prototype),i(l,n),l.prototype.pipe=function(o,m){let d=this;function p(P){o.writable&&o.write(P)===!1&&d.pause&&d.pause()}d.on("data",p);function _(){d.readable&&d.resume&&d.resume()}o.on("drain",_),!o._isStdio&&(!m||m.end!==!1)&&(d.on("end",S),d.on("close",R));let y=!1;function S(){y||(y=!0,o.end())}function R(){y||(y=!0,typeof o.destroy=="function"&&o.destroy())}function M(P){N(),n.listenerCount(this,"error")===0&&this.emit("error",P)}u(d,"error",M),u(o,"error",M);function N(){d.removeListener("data",p),o.removeListener("drain",_),d.removeListener("end",S),d.removeListener("close",R),d.removeListener("error",M),o.removeListener("error",M),d.removeListener("end",N),d.removeListener("close",N),o.removeListener("close",N)}return d.on("end",N),d.on("close",N),o.on("close",N),o.emit("pipe",d),o};function u(o,m,d){if(typeof o.prependListener=="function")return o.prependListener(m,d);!o._events||!o._events[m]?o.on(m,d):r(o._events[m])?o._events[m].unshift(d):o._events[m]=[d,o._events[m]]}t.exports={Stream:l,prependListener:u}}}),vr=xe({"node_modules/readable-stream/lib/internal/streams/add-abort-signal.js"(e,t){"use strict";var{SymbolDispose:r}=Ne(),{AbortError:i,codes:n}=$e(),{isNodeStream:l,isWebStream:u,kControllerErrorFunction:o}=tt(),m=ut(),{ERR_INVALID_ARG_TYPE:d}=n,p,_=(y,S)=>{if(typeof y!="object"||!("aborted"in y))throw new d(S,"AbortSignal",y)};t.exports.addAbortSignal=function(S,R){if(_(S,"signal"),!l(R)&&!u(R))throw new d("stream",["ReadableStream","WritableStream","Stream"],R);return t.exports.addAbortSignalNoValidate(S,R)},t.exports.addAbortSignalNoValidate=function(y,S){if(typeof y!="object"||!("aborted"in y))return S;let R=l(S)?()=>{S.destroy(new i(void 0,{cause:y.reason}))}:()=>{S[o](new i(void 0,{cause:y.reason}))};if(y.aborted)R();else{p=p||Fe().addAbortListener;let M=p(y,R);m(S,M[r])}return S}}}),Gs=xe({"node_modules/readable-stream/lib/internal/streams/buffer_list.js"(e,t){"use strict";var{StringPrototypeSlice:r,SymbolIterator:i,TypedArrayPrototypeSet:n,Uint8Array:l}=Ne(),{Buffer:u}=et(),{inspect:o}=Fe();t.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(d){let p={data:d,next:null};this.length>0?this.tail.next=p:this.head=p,this.tail=p,++this.length}unshift(d){let p={data:d,next:this.head};this.length===0&&(this.tail=p),this.head=p,++this.length}shift(){if(this.length===0)return;let d=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,d}clear(){this.head=this.tail=null,this.length=0}join(d){if(this.length===0)return"";let p=this.head,_=""+p.data;for(;(p=p.next)!==null;)_+=d+p.data;return _}concat(d){if(this.length===0)return u.alloc(0);let p=u.allocUnsafe(d>>>0),_=this.head,y=0;for(;_;)n(p,_.data,y),y+=_.data.length,_=_.next;return p}consume(d,p){let _=this.head.data;if(d<_.length){let y=_.slice(0,d);return this.head.data=_.slice(d),y}return d===_.length?this.shift():p?this._getString(d):this._getBuffer(d)}first(){return this.head.data}*[i](){for(let d=this.head;d;d=d.next)yield d.data}_getString(d){let p="",_=this.head,y=0;do{let S=_.data;if(d>S.length)p+=S,d-=S.length;else{d===S.length?(p+=S,++y,_.next?this.head=_.next:this.head=this.tail=null):(p+=r(S,0,d),this.head=_,_.data=r(S,d));break}++y}while((_=_.next)!==null);return this.length-=y,p}_getBuffer(d){let p=u.allocUnsafe(d),_=d,y=this.head,S=0;do{let R=y.data;if(d>R.length)n(p,R,_-d),d-=R.length;else{d===R.length?(n(p,R,_-d),++S,y.next?this.head=y.next:this.head=this.tail=null):(n(p,new l(R.buffer,R.byteOffset,d),_-d),this.head=y,y.data=R.slice(d));break}++S}while((y=y.next)!==null);return this.length-=S,p}[Symbol.for("nodejs.util.inspect.custom")](d,p){return o(this,{...p,depth:0,customInspect:!1})}}}}),Sr=xe({"node_modules/readable-stream/lib/internal/streams/state.js"(e,t){"use strict";var{MathFloor:r,NumberIsInteger:i}=Ne(),{validateInteger:n}=ar(),{ERR_INVALID_ARG_VALUE:l}=$e().codes,u=16*1024,o=16;function m(y,S,R){return y.highWaterMark!=null?y.highWaterMark:S?y[R]:null}function d(y){return y?o:u}function p(y,S){n(S,"value",0),y?o=S:u=S}function _(y,S,R,M){let N=m(S,M,R);if(N!=null){if(!i(N)||N<0){let P=M?`options.${R}`:"options.highWaterMark";throw new l(P,N)}return r(N)}return d(y.objectMode)}t.exports={getHighWaterMark:_,getDefaultHighWaterMark:d,setDefaultHighWaterMark:p}}}),Hs=xe({"node_modules/safe-buffer/index.js"(e,t){var r=et(),i=r.Buffer;function n(u,o){for(var m in u)o[m]=u[m]}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(n(r,e),e.Buffer=l);function l(u,o,m){return i(u,o,m)}l.prototype=Object.create(i.prototype),n(i,l),l.from=function(u,o,m){if(typeof u=="number")throw new TypeError("Argument must not be a number");return i(u,o,m)},l.alloc=function(u,o,m){if(typeof u!="number")throw new TypeError("Argument must be a number");var d=i(u);return o!==void 0?typeof m=="string"?d.fill(o,m):d.fill(o):d.fill(0),d},l.allocUnsafe=function(u){if(typeof u!="number")throw new TypeError("Argument must be a number");return i(u)},l.allocUnsafeSlow=function(u){if(typeof u!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(u)}}}),Ks=xe({"node_modules/string_decoder/lib/string_decoder.js"(e){"use strict";var t=Hs().Buffer,r=t.isEncoding||function(f){switch(f=""+f,f&&f.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function i(f){if(!f)return"utf8";for(var v;;)switch(f){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return f;default:if(v)return;f=(""+f).toLowerCase(),v=!0}}function n(f){var v=i(f);if(typeof v!="string"&&(t.isEncoding===r||!r(f)))throw new Error("Unknown encoding: "+f);return v||f}e.StringDecoder=l;function l(f){this.encoding=n(f);var v;switch(this.encoding){case"utf16le":this.text=y,this.end=S,v=4;break;case"utf8":this.fillLast=d,v=4;break;case"base64":this.text=R,this.end=M,v=3;break;default:this.write=N,this.end=P;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=t.allocUnsafe(v)}l.prototype.write=function(f){if(f.length===0)return"";var v,x;if(this.lastNeed){if(v=this.fillLast(f),v===void 0)return"";x=this.lastNeed,this.lastNeed=0}else x=0;return x<f.length?v?v+this.text(f,x):this.text(f,x):v||""},l.prototype.end=_,l.prototype.text=p,l.prototype.fillLast=function(f){if(this.lastNeed<=f.length)return f.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);f.copy(this.lastChar,this.lastTotal-this.lastNeed,0,f.length),this.lastNeed-=f.length};function u(f){return f<=127?0:f>>5===6?2:f>>4===14?3:f>>3===30?4:f>>6===2?-1:-2}function o(f,v,x){var A=v.length-1;if(A<x)return 0;var T=u(v[A]);return T>=0?(T>0&&(f.lastNeed=T-1),T):--A<x||T===-2?0:(T=u(v[A]),T>=0?(T>0&&(f.lastNeed=T-2),T):--A<x||T===-2?0:(T=u(v[A]),T>=0?(T>0&&(T===2?T=0:f.lastNeed=T-3),T):0))}function m(f,v,x){if((v[0]&192)!==128)return f.lastNeed=0,"\uFFFD";if(f.lastNeed>1&&v.length>1){if((v[1]&192)!==128)return f.lastNeed=1,"\uFFFD";if(f.lastNeed>2&&v.length>2&&(v[2]&192)!==128)return f.lastNeed=2,"\uFFFD"}}function d(f){var v=this.lastTotal-this.lastNeed,x=m(this,f,v);if(x!==void 0)return x;if(this.lastNeed<=f.length)return f.copy(this.lastChar,v,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);f.copy(this.lastChar,v,0,f.length),this.lastNeed-=f.length}function p(f,v){var x=o(this,f,v);if(!this.lastNeed)return f.toString("utf8",v);this.lastTotal=x;var A=f.length-(x-this.lastNeed);return f.copy(this.lastChar,0,A),f.toString("utf8",v,A)}function _(f){var v=f&&f.length?this.write(f):"";return this.lastNeed?v+"\uFFFD":v}function y(f,v){if((f.length-v)%2===0){var x=f.toString("utf16le",v);if(x){var A=x.charCodeAt(x.length-1);if(A>=55296&&A<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=f[f.length-2],this.lastChar[1]=f[f.length-1],x.slice(0,-1)}return x}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=f[f.length-1],f.toString("utf16le",v,f.length-1)}function S(f){var v=f&&f.length?this.write(f):"";if(this.lastNeed){var x=this.lastTotal-this.lastNeed;return v+this.lastChar.toString("utf16le",0,x)}return v}function R(f,v){var x=(f.length-v)%3;return x===0?f.toString("base64",v):(this.lastNeed=3-x,this.lastTotal=3,x===1?this.lastChar[0]=f[f.length-1]:(this.lastChar[0]=f[f.length-2],this.lastChar[1]=f[f.length-1]),f.toString("base64",v,f.length-x))}function M(f){var v=f&&f.length?this.write(f):"";return this.lastNeed?v+this.lastChar.toString("base64",0,3-this.lastNeed):v}function N(f){return f.toString(this.encoding)}function P(f){return f&&f.length?this.write(f):""}}}),vn=xe({"node_modules/readable-stream/lib/internal/streams/from.js"(e,t){"use strict";var r=vt(),{PromisePrototypeThen:i,SymbolAsyncIterator:n,SymbolIterator:l}=Ne(),{Buffer:u}=et(),{ERR_INVALID_ARG_TYPE:o,ERR_STREAM_NULL_VALUES:m}=$e().codes;function d(p,_,y){let S;if(typeof _=="string"||_ instanceof u)return new p({objectMode:!0,...y,read(){this.push(_),this.push(null)}});let R;if(_&&_[n])R=!0,S=_[n]();else if(_&&_[l])R=!1,S=_[l]();else throw new o("iterable",["Iterable"],_);let M=new p({objectMode:!0,highWaterMark:1,...y}),N=!1;M._read=function(){N||(N=!0,f())},M._destroy=function(v,x){i(P(v),()=>r.nextTick(x,v),A=>r.nextTick(x,A||v))};async function P(v){let x=v!=null,A=typeof S.throw=="function";if(x&&A){let{value:T,done:L}=await S.throw(v);if(await T,L)return}if(typeof S.return=="function"){let{value:T}=await S.return();await T}}async function f(){for(;;){try{let{value:v,done:x}=R?await S.next():S.next();if(x)M.push(null);else{let A=v&&typeof v.then=="function"?await v:v;if(A===null)throw N=!1,new m;if(M.push(A))continue;N=!1}}catch(v){M.destroy(v)}break}}return M}t.exports=d}}),xr=xe({"node_modules/readable-stream/lib/internal/streams/readable.js"(e,t){"use strict";var r=vt(),{ArrayPrototypeIndexOf:i,NumberIsInteger:n,NumberIsNaN:l,NumberParseInt:u,ObjectDefineProperties:o,ObjectKeys:m,ObjectSetPrototypeOf:d,Promise:p,SafeSet:_,SymbolAsyncDispose:y,SymbolAsyncIterator:S,Symbol:R}=Ne();t.exports=J,J.ReadableState=oe;var{EventEmitter:M}=wr(),{Stream:N,prependListener:P}=ti(),{Buffer:f}=et(),{addAbortSignal:v}=vr(),x=ut(),A=Fe().debuglog("stream",b=>{A=b}),T=Gs(),L=Ot(),{getHighWaterMark:z,getDefaultHighWaterMark:Y}=Sr(),{aggregateTwoErrors:K,codes:{ERR_INVALID_ARG_TYPE:pe,ERR_METHOD_NOT_IMPLEMENTED:O,ERR_OUT_OF_RANGE:D,ERR_STREAM_PUSH_AFTER_EOF:V,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:B},AbortError:ae}=$e(),{validateObject:ue}=ar(),he=R("kPaused"),{StringDecoder:Se}=Ks(),G=vn();d(J.prototype,N.prototype),d(J,N);var ne=()=>{},{errorOrDestroy:w}=L,Q=1,le=2,F=4,ce=8,me=16,ve=32,ge=64,q=128,H=256,se=512,be=1024,_e=2048,k=4096,j=8192,U=16384,ee=32768,X=65536,Z=1<<17,I=1<<18;function W(b){return{enumerable:!1,get(){return(this.state&b)!==0},set(g){g?this.state|=b:this.state&=~b}}}o(oe.prototype,{objectMode:W(Q),ended:W(le),endEmitted:W(F),reading:W(ce),constructed:W(me),sync:W(ve),needReadable:W(ge),emittedReadable:W(q),readableListening:W(H),resumeScheduled:W(se),errorEmitted:W(be),emitClose:W(_e),autoDestroy:W(k),destroyed:W(j),closed:W(U),closeEmitted:W(ee),multiAwaitDrain:W(X),readingMore:W(Z),dataEmitted:W(I)});function oe(b,g,te){typeof te!="boolean"&&(te=g instanceof Xe()),this.state=_e|k|me|ve,b&&b.objectMode&&(this.state|=Q),te&&b&&b.readableObjectMode&&(this.state|=Q),this.highWaterMark=b?z(this,b,"readableHighWaterMark",te):Y(!1),this.buffer=new T,this.length=0,this.pipes=[],this.flowing=null,this[he]=null,b&&b.emitClose===!1&&(this.state&=~_e),b&&b.autoDestroy===!1&&(this.state&=~k),this.errored=null,this.defaultEncoding=b&&b.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,b&&b.encoding&&(this.decoder=new Se(b.encoding),this.encoding=b.encoding)}function J(b){if(!(this instanceof J))return new J(b);let g=this instanceof Xe();this._readableState=new oe(b,this,g),b&&(typeof b.read=="function"&&(this._read=b.read),typeof b.destroy=="function"&&(this._destroy=b.destroy),typeof b.construct=="function"&&(this._construct=b.construct),b.signal&&!g&&v(b.signal,this)),N.call(this,b),L.construct(this,()=>{this._readableState.needReadable&&$(this,this._readableState)})}J.prototype.destroy=L.destroy,J.prototype._undestroy=L.undestroy,J.prototype._destroy=function(b,g){g(b)},J.prototype[M.captureRejectionSymbol]=function(b){this.destroy(b)},J.prototype[y]=function(){let b;return this.destroyed||(b=this.readableEnded?null:new ae,this.destroy(b)),new p((g,te)=>x(this,re=>re&&re!==b?te(re):g(null)))},J.prototype.push=function(b,g){return fe(this,b,g,!1)},J.prototype.unshift=function(b,g){return fe(this,b,g,!0)};function fe(b,g,te,re){A("readableAddChunk",g);let de=b._readableState,De;if((de.state&Q)===0&&(typeof g=="string"?(te=te||de.defaultEncoding,de.encoding!==te&&(re&&de.encoding?g=f.from(g,te).toString(de.encoding):(g=f.from(g,te),te=""))):g instanceof f?te="":N._isUint8Array(g)?(g=N._uint8ArrayToBuffer(g),te=""):g!=null&&(De=new pe("chunk",["string","Buffer","Uint8Array"],g))),De)w(b,De);else if(g===null)de.state&=~ce,h(b,de);else if((de.state&Q)!==0||g&&g.length>0)if(re)if((de.state&F)!==0)w(b,new B);else{if(de.destroyed||de.errored)return!1;Pe(b,de,g,!0)}else if(de.ended)w(b,new V);else{if(de.destroyed||de.errored)return!1;de.state&=~ce,de.decoder&&!te?(g=de.decoder.write(g),de.objectMode||g.length!==0?Pe(b,de,g,!1):$(b,de)):Pe(b,de,g,!1)}else re||(de.state&=~ce,$(b,de));return!de.ended&&(de.length<de.highWaterMark||de.length===0)}function Pe(b,g,te,re){g.flowing&&g.length===0&&!g.sync&&b.listenerCount("data")>0?((g.state&X)!==0?g.awaitDrainWriters.clear():g.awaitDrainWriters=null,g.dataEmitted=!0,b.emit("data",te)):(g.length+=g.objectMode?1:te.length,re?g.buffer.unshift(te):g.buffer.push(te),(g.state&ge)!==0&&E(b)),$(b,g)}J.prototype.isPaused=function(){let b=this._readableState;return b[he]===!0||b.flowing===!1},J.prototype.setEncoding=function(b){let g=new Se(b);this._readableState.decoder=g,this._readableState.encoding=this._readableState.decoder.encoding;let te=this._readableState.buffer,re="";for(let de of te)re+=g.write(de);return te.clear(),re!==""&&te.push(re),this._readableState.length=re.length,this};var c=1073741824;function s(b){if(b>c)throw new D("size","<= 1GiB",b);return b--,b|=b>>>1,b|=b>>>2,b|=b>>>4,b|=b>>>8,b|=b>>>16,b++,b}function a(b,g){return b<=0||g.length===0&&g.ended?0:(g.state&Q)!==0?1:l(b)?g.flowing&&g.length?g.buffer.first().length:g.length:b<=g.length?b:g.ended?g.length:0}J.prototype.read=function(b){A("read",b),b===void 0?b=NaN:n(b)||(b=u(b,10));let g=this._readableState,te=b;if(b>g.highWaterMark&&(g.highWaterMark=s(b)),b!==0&&(g.state&=~q),b===0&&g.needReadable&&((g.highWaterMark!==0?g.length>=g.highWaterMark:g.length>0)||g.ended))return A("read: emitReadable",g.length,g.ended),g.length===0&&g.ended?Pr(this):E(this),null;if(b=a(b,g),b===0&&g.ended)return g.length===0&&Pr(this),null;let re=(g.state&ge)!==0;if(A("need readable",re),(g.length===0||g.length-b<g.highWaterMark)&&(re=!0,A("length less than watermark",re)),g.ended||g.reading||g.destroyed||g.errored||!g.constructed)re=!1,A("reading, ended or constructing",re);else if(re){A("do read"),g.state|=ce|ve,g.length===0&&(g.state|=ge);try{this._read(g.highWaterMark)}catch(De){w(this,De)}g.state&=~ve,g.reading||(b=a(te,g))}let de;return b>0?de=Oi(b,g):de=null,de===null?(g.needReadable=g.length<=g.highWaterMark,b=0):(g.length-=b,g.multiAwaitDrain?g.awaitDrainWriters.clear():g.awaitDrainWriters=null),g.length===0&&(g.ended||(g.needReadable=!0),te!==b&&g.ended&&Pr(this)),de!==null&&!g.errorEmitted&&!g.closeEmitted&&(g.dataEmitted=!0,this.emit("data",de)),de};function h(b,g){if(A("onEofChunk"),!g.ended){if(g.decoder){let te=g.decoder.end();te&&te.length&&(g.buffer.push(te),g.length+=g.objectMode?1:te.length)}g.ended=!0,g.sync?E(b):(g.needReadable=!1,g.emittedReadable=!0,C(b))}}function E(b){let g=b._readableState;A("emitReadable",g.needReadable,g.emittedReadable),g.needReadable=!1,g.emittedReadable||(A("emitReadable",g.flowing),g.emittedReadable=!0,r.nextTick(C,b))}function C(b){let g=b._readableState;A("emitReadable_",g.destroyed,g.length,g.ended),!g.destroyed&&!g.errored&&(g.length||g.ended)&&(b.emit("readable"),g.emittedReadable=!1),g.needReadable=!g.flowing&&!g.ended&&g.length<=g.highWaterMark,Pi(b)}function $(b,g){!g.readingMore&&g.constructed&&(g.readingMore=!0,r.nextTick(ye,b,g))}function ye(b,g){for(;!g.reading&&!g.ended&&(g.length<g.highWaterMark||g.flowing&&g.length===0);){let te=g.length;if(A("maybeReadMore read 0"),b.read(0),te===g.length)break}g.readingMore=!1}J.prototype._read=function(b){throw new O("_read()")},J.prototype.pipe=function(b,g){let te=this,re=this._readableState;re.pipes.length===1&&(re.multiAwaitDrain||(re.multiAwaitDrain=!0,re.awaitDrainWriters=new _(re.awaitDrainWriters?[re.awaitDrainWriters]:[]))),re.pipes.push(b),A("pipe count=%d opts=%j",re.pipes.length,g);let De=(!g||g.end!==!1)&&b!==r.stdout&&b!==r.stderr?Ci:$t;re.endEmitted?r.nextTick(De):te.once("end",De),b.on("unpipe",ze);function ze(pt,Ye){A("onunpipe"),pt===te&&Ye&&Ye.hasUnpiped===!1&&(Ye.hasUnpiped=!0,ds())}function Ci(){A("onend"),b.end()}let ht,Mi=!1;function ds(){A("cleanup"),b.removeListener("close",Br),b.removeListener("finish",Cr),ht&&b.removeListener("drain",ht),b.removeListener("error",Or),b.removeListener("unpipe",ze),te.removeListener("end",Ci),te.removeListener("end",$t),te.removeListener("data",Ui),Mi=!0,ht&&re.awaitDrainWriters&&(!b._writableState||b._writableState.needDrain)&&ht()}function Di(){Mi||(re.pipes.length===1&&re.pipes[0]===b?(A("false write response, pause",0),re.awaitDrainWriters=b,re.multiAwaitDrain=!1):re.pipes.length>1&&re.pipes.includes(b)&&(A("false write response, pause",re.awaitDrainWriters.size),re.awaitDrainWriters.add(b)),te.pause()),ht||(ht=Te(te,b),b.on("drain",ht))}te.on("data",Ui);function Ui(pt){A("ondata");let Ye=b.write(pt);A("dest.write",Ye),Ye===!1&&Di()}function Or(pt){if(A("onerror",pt),$t(),b.removeListener("error",Or),b.listenerCount("error")===0){let Ye=b._writableState||b._readableState;Ye&&!Ye.errorEmitted?w(b,pt):b.emit("error",pt)}}P(b,"error",Or);function Br(){b.removeListener("finish",Cr),$t()}b.once("close",Br);function Cr(){A("onfinish"),b.removeListener("close",Br),$t()}b.once("finish",Cr);function $t(){A("unpipe"),te.unpipe(b)}return b.emit("pipe",te),b.writableNeedDrain===!0?Di():re.flowing||(A("pipe resume"),te.resume()),b};function Te(b,g){return function(){let re=b._readableState;re.awaitDrainWriters===g?(A("pipeOnDrain",1),re.awaitDrainWriters=null):re.multiAwaitDrain&&(A("pipeOnDrain",re.awaitDrainWriters.size),re.awaitDrainWriters.delete(g)),(!re.awaitDrainWriters||re.awaitDrainWriters.size===0)&&b.listenerCount("data")&&b.resume()}}J.prototype.unpipe=function(b){let g=this._readableState,te={hasUnpiped:!1};if(g.pipes.length===0)return this;if(!b){let de=g.pipes;g.pipes=[],this.pause();for(let De=0;De<de.length;De++)de[De].emit("unpipe",this,{hasUnpiped:!1});return this}let re=i(g.pipes,b);return re===-1?this:(g.pipes.splice(re,1),g.pipes.length===0&&this.pause(),b.emit("unpipe",this,te),this)},J.prototype.on=function(b,g){let te=N.prototype.on.call(this,b,g),re=this._readableState;return b==="data"?(re.readableListening=this.listenerCount("readable")>0,re.flowing!==!1&&this.resume()):b==="readable"&&!re.endEmitted&&!re.readableListening&&(re.readableListening=re.needReadable=!0,re.flowing=!1,re.emittedReadable=!1,A("on readable",re.length,re.reading),re.length?E(this):re.reading||r.nextTick(ke,this)),te},J.prototype.addListener=J.prototype.on,J.prototype.removeListener=function(b,g){let te=N.prototype.removeListener.call(this,b,g);return b==="readable"&&r.nextTick(Ae,this),te},J.prototype.off=J.prototype.removeListener,J.prototype.removeAllListeners=function(b){let g=N.prototype.removeAllListeners.apply(this,arguments);return(b==="readable"||b===void 0)&&r.nextTick(Ae,this),g};function Ae(b){let g=b._readableState;g.readableListening=b.listenerCount("readable")>0,g.resumeScheduled&&g[he]===!1?g.flowing=!0:b.listenerCount("data")>0?b.resume():g.readableListening||(g.flowing=null)}function ke(b){A("readable nexttick read 0"),b.read(0)}J.prototype.resume=function(){let b=this._readableState;return b.flowing||(A("resume"),b.flowing=!b.readableListening,Re(this,b)),b[he]=!1,this};function Re(b,g){g.resumeScheduled||(g.resumeScheduled=!0,r.nextTick(ls,b,g))}function ls(b,g){A("resume",g.reading),g.reading||b.read(0),g.resumeScheduled=!1,b.emit("resume"),Pi(b),g.flowing&&!g.reading&&b.read(0)}J.prototype.pause=function(){return A("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(A("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[he]=!0,this};function Pi(b){let g=b._readableState;for(A("flow",g.flowing);g.flowing&&b.read()!==null;);}J.prototype.wrap=function(b){let g=!1;b.on("data",re=>{!this.push(re)&&b.pause&&(g=!0,b.pause())}),b.on("end",()=>{this.push(null)}),b.on("error",re=>{w(this,re)}),b.on("close",()=>{this.destroy()}),b.on("destroy",()=>{this.destroy()}),this._read=()=>{g&&b.resume&&(g=!1,b.resume())};let te=m(b);for(let re=1;re<te.length;re++){let de=te[re];this[de]===void 0&&typeof b[de]=="function"&&(this[de]=b[de].bind(b))}return this},J.prototype[S]=function(){return Li(this)},J.prototype.iterator=function(b){return b!==void 0&&ue(b,"options"),Li(this,b)};function Li(b,g){typeof b.read!="function"&&(b=J.wrap(b,{objectMode:!0}));let te=us(b,g);return te.stream=b,te}async function*us(b,g){let te=ne;function re(ze){this===b?(te(),te=ne):te=ze}b.on("readable",re);let de,De=x(b,{writable:!1},ze=>{de=ze?K(de,ze):null,te(),te=ne});try{for(;;){let ze=b.destroyed?null:b.read();if(ze!==null)yield ze;else{if(de)throw de;if(de===null)return;await new p(re)}}}catch(ze){throw de=K(de,ze),de}finally{(de||g?.destroyOnReturn!==!1)&&(de===void 0||b._readableState.autoDestroy)?L.destroyer(b,null):(b.off("readable",re),De())}}o(J.prototype,{readable:{__proto__:null,get(){let b=this._readableState;return!!b&&b.readable!==!1&&!b.destroyed&&!b.errorEmitted&&!b.endEmitted},set(b){this._readableState&&(this._readableState.readable=!!b)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(b){this._readableState&&(this._readableState.flowing=b)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(b){this._readableState&&(this._readableState.destroyed=b)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),o(oe.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[he]!==!1},set(b){this[he]=!!b}}}),J._fromList=Oi;function Oi(b,g){if(g.length===0)return null;let te;return g.objectMode?te=g.buffer.shift():!b||b>=g.length?(g.decoder?te=g.buffer.join(""):g.buffer.length===1?te=g.buffer.first():te=g.buffer.concat(g.length),g.buffer.clear()):te=g.buffer.consume(b,g.decoder),te}function Pr(b){let g=b._readableState;A("endReadable",g.endEmitted),g.endEmitted||(g.ended=!0,r.nextTick(cs,g,b))}function cs(b,g){if(A("endReadableNT",b.endEmitted,b.length),!b.errored&&!b.closeEmitted&&!b.endEmitted&&b.length===0){if(b.endEmitted=!0,g.emit("end"),g.writable&&g.allowHalfOpen===!1)r.nextTick(fs,g);else if(b.autoDestroy){let te=g._writableState;(!te||te.autoDestroy&&(te.finished||te.writable===!1))&&g.destroy()}}}function fs(b){b.writable&&!b.writableEnded&&!b.destroyed&&b.end()}J.from=function(b,g){return G(J,b,g)};var Lr;function Bi(){return Lr===void 0&&(Lr={}),Lr}J.fromWeb=function(b,g){return Bi().newStreamReadableFromReadableStream(b,g)},J.toWeb=function(b,g){return Bi().newReadableStreamFromStreamReadable(b,g)},J.wrap=function(b,g){var te,re;return new J({objectMode:(te=(re=b.readableObjectMode)!==null&&re!==void 0?re:b.objectMode)!==null&&te!==void 0?te:!0,...g,destroy(de,De){L.destroyer(b,de),De(de)}}).wrap(b)}}}),ri=xe({"node_modules/readable-stream/lib/internal/streams/writable.js"(e,t){"use strict";var r=vt(),{ArrayPrototypeSlice:i,Error:n,FunctionPrototypeSymbolHasInstance:l,ObjectDefineProperty:u,ObjectDefineProperties:o,ObjectSetPrototypeOf:m,StringPrototypeToLowerCase:d,Symbol:p,SymbolHasInstance:_}=Ne();t.exports=ue,ue.WritableState=B;var{EventEmitter:y}=wr(),S=ti().Stream,{Buffer:R}=et(),M=Ot(),{addAbortSignal:N}=vr(),{getHighWaterMark:P,getDefaultHighWaterMark:f}=Sr(),{ERR_INVALID_ARG_TYPE:v,ERR_METHOD_NOT_IMPLEMENTED:x,ERR_MULTIPLE_CALLBACK:A,ERR_STREAM_CANNOT_PIPE:T,ERR_STREAM_DESTROYED:L,ERR_STREAM_ALREADY_FINISHED:z,ERR_STREAM_NULL_VALUES:Y,ERR_STREAM_WRITE_AFTER_END:K,ERR_UNKNOWN_ENCODING:pe}=$e().codes,{errorOrDestroy:O}=M;m(ue.prototype,S.prototype),m(ue,S);function D(){}var V=p("kOnFinished");function B(k,j,U){typeof U!="boolean"&&(U=j instanceof Xe()),this.objectMode=!!(k&&k.objectMode),U&&(this.objectMode=this.objectMode||!!(k&&k.writableObjectMode)),this.highWaterMark=k?P(this,k,"writableHighWaterMark",U):f(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let ee=!!(k&&k.decodeStrings===!1);this.decodeStrings=!ee,this.defaultEncoding=k&&k.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=w.bind(void 0,j),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,ae(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!k||k.emitClose!==!1,this.autoDestroy=!k||k.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[V]=[]}function ae(k){k.buffered=[],k.bufferedIndex=0,k.allBuffers=!0,k.allNoop=!0}B.prototype.getBuffer=function(){return i(this.buffered,this.bufferedIndex)},u(B.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function ue(k){let j=this instanceof Xe();if(!j&&!l(ue,this))return new ue(k);this._writableState=new B(k,this,j),k&&(typeof k.write=="function"&&(this._write=k.write),typeof k.writev=="function"&&(this._writev=k.writev),typeof k.destroy=="function"&&(this._destroy=k.destroy),typeof k.final=="function"&&(this._final=k.final),typeof k.construct=="function"&&(this._construct=k.construct),k.signal&&N(k.signal,this)),S.call(this,k),M.construct(this,()=>{let U=this._writableState;U.writing||ce(this,U),q(this,U)})}u(ue,_,{__proto__:null,value:function(k){return l(this,k)?!0:this!==ue?!1:k&&k._writableState instanceof B}}),ue.prototype.pipe=function(){O(this,new T)};function he(k,j,U,ee){let X=k._writableState;if(typeof U=="function")ee=U,U=X.defaultEncoding;else{if(!U)U=X.defaultEncoding;else if(U!=="buffer"&&!R.isEncoding(U))throw new pe(U);typeof ee!="function"&&(ee=D)}if(j===null)throw new Y;if(!X.objectMode)if(typeof j=="string")X.decodeStrings!==!1&&(j=R.from(j,U),U="buffer");else if(j instanceof R)U="buffer";else if(S._isUint8Array(j))j=S._uint8ArrayToBuffer(j),U="buffer";else throw new v("chunk",["string","Buffer","Uint8Array"],j);let Z;return X.ending?Z=new K:X.destroyed&&(Z=new L("write")),Z?(r.nextTick(ee,Z),O(k,Z,!0),Z):(X.pendingcb++,Se(k,X,j,U,ee))}ue.prototype.write=function(k,j,U){return he(this,k,j,U)===!0},ue.prototype.cork=function(){this._writableState.corked++},ue.prototype.uncork=function(){let k=this._writableState;k.corked&&(k.corked--,k.writing||ce(this,k))},ue.prototype.setDefaultEncoding=function(j){if(typeof j=="string"&&(j=d(j)),!R.isEncoding(j))throw new pe(j);return this._writableState.defaultEncoding=j,this};function Se(k,j,U,ee,X){let Z=j.objectMode?1:U.length;j.length+=Z;let I=j.length<j.highWaterMark;return I||(j.needDrain=!0),j.writing||j.corked||j.errored||!j.constructed?(j.buffered.push({chunk:U,encoding:ee,callback:X}),j.allBuffers&&ee!=="buffer"&&(j.allBuffers=!1),j.allNoop&&X!==D&&(j.allNoop=!1)):(j.writelen=Z,j.writecb=X,j.writing=!0,j.sync=!0,k._write(U,ee,j.onwrite),j.sync=!1),I&&!j.errored&&!j.destroyed}function G(k,j,U,ee,X,Z,I){j.writelen=ee,j.writecb=I,j.writing=!0,j.sync=!0,j.destroyed?j.onwrite(new L("write")):U?k._writev(X,j.onwrite):k._write(X,Z,j.onwrite),j.sync=!1}function ne(k,j,U,ee){--j.pendingcb,ee(U),F(j),O(k,U)}function w(k,j){let U=k._writableState,ee=U.sync,X=U.writecb;if(typeof X!="function"){O(k,new A);return}U.writing=!1,U.writecb=null,U.length-=U.writelen,U.writelen=0,j?(j.stack,U.errored||(U.errored=j),k._readableState&&!k._readableState.errored&&(k._readableState.errored=j),ee?r.nextTick(ne,k,U,j,X):ne(k,U,j,X)):(U.buffered.length>U.bufferedIndex&&ce(k,U),ee?U.afterWriteTickInfo!==null&&U.afterWriteTickInfo.cb===X?U.afterWriteTickInfo.count++:(U.afterWriteTickInfo={count:1,cb:X,stream:k,state:U},r.nextTick(Q,U.afterWriteTickInfo)):le(k,U,1,X))}function Q({stream:k,state:j,count:U,cb:ee}){return j.afterWriteTickInfo=null,le(k,j,U,ee)}function le(k,j,U,ee){for(!j.ending&&!k.destroyed&&j.length===0&&j.needDrain&&(j.needDrain=!1,k.emit("drain"));U-- >0;)j.pendingcb--,ee();j.destroyed&&F(j),q(k,j)}function F(k){if(k.writing)return;for(let X=k.bufferedIndex;X<k.buffered.length;++X){var j;let{chunk:Z,callback:I}=k.buffered[X],W=k.objectMode?1:Z.length;k.length-=W,I((j=k.errored)!==null&&j!==void 0?j:new L("write"))}let U=k[V].splice(0);for(let X=0;X<U.length;X++){var ee;U[X]((ee=k.errored)!==null&&ee!==void 0?ee:new L("end"))}ae(k)}function ce(k,j){if(j.corked||j.bufferProcessing||j.destroyed||!j.constructed)return;let{buffered:U,bufferedIndex:ee,objectMode:X}=j,Z=U.length-ee;if(!Z)return;let I=ee;if(j.bufferProcessing=!0,Z>1&&k._writev){j.pendingcb-=Z-1;let W=j.allNoop?D:J=>{for(let fe=I;fe<U.length;++fe)U[fe].callback(J)},oe=j.allNoop&&I===0?U:i(U,I);oe.allBuffers=j.allBuffers,G(k,j,!0,j.length,oe,"",W),ae(j)}else{do{let{chunk:W,encoding:oe,callback:J}=U[I];U[I++]=null;let fe=X?1:W.length;G(k,j,!1,fe,W,oe,J)}while(I<U.length&&!j.writing);I===U.length?ae(j):I>256?(U.splice(0,I),j.bufferedIndex=0):j.bufferedIndex=I}j.bufferProcessing=!1}ue.prototype._write=function(k,j,U){if(this._writev)this._writev([{chunk:k,encoding:j}],U);else throw new x("_write()")},ue.prototype._writev=null,ue.prototype.end=function(k,j,U){let ee=this._writableState;typeof k=="function"?(U=k,k=null,j=null):typeof j=="function"&&(U=j,j=null);let X;if(k!=null){let Z=he(this,k,j);Z instanceof n&&(X=Z)}return ee.corked&&(ee.corked=1,this.uncork()),X||(!ee.errored&&!ee.ending?(ee.ending=!0,q(this,ee,!0),ee.ended=!0):ee.finished?X=new z("end"):ee.destroyed&&(X=new L("end"))),typeof U=="function"&&(X||ee.finished?r.nextTick(U,X):ee[V].push(U)),this};function me(k){return k.ending&&!k.destroyed&&k.constructed&&k.length===0&&!k.errored&&k.buffered.length===0&&!k.finished&&!k.writing&&!k.errorEmitted&&!k.closeEmitted}function ve(k,j){let U=!1;function ee(X){if(U){O(k,X??A());return}if(U=!0,j.pendingcb--,X){let Z=j[V].splice(0);for(let I=0;I<Z.length;I++)Z[I](X);O(k,X,j.sync)}else me(j)&&(j.prefinished=!0,k.emit("prefinish"),j.pendingcb++,r.nextTick(H,k,j))}j.sync=!0,j.pendingcb++;try{k._final(ee)}catch(X){ee(X)}j.sync=!1}function ge(k,j){!j.prefinished&&!j.finalCalled&&(typeof k._final=="function"&&!j.destroyed?(j.finalCalled=!0,ve(k,j)):(j.prefinished=!0,k.emit("prefinish")))}function q(k,j,U){me(j)&&(ge(k,j),j.pendingcb===0&&(U?(j.pendingcb++,r.nextTick((ee,X)=>{me(X)?H(ee,X):X.pendingcb--},k,j)):me(j)&&(j.pendingcb++,H(k,j))))}function H(k,j){j.pendingcb--,j.finished=!0;let U=j[V].splice(0);for(let ee=0;ee<U.length;ee++)U[ee]();if(k.emit("finish"),j.autoDestroy){let ee=k._readableState;(!ee||ee.autoDestroy&&(ee.endEmitted||ee.readable===!1))&&k.destroy()}}o(ue.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(k){this._writableState&&(this._writableState.destroyed=k)}},writable:{__proto__:null,get(){let k=this._writableState;return!!k&&k.writable!==!1&&!k.destroyed&&!k.errored&&!k.ending&&!k.ended},set(k){this._writableState&&(this._writableState.writable=!!k)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let k=this._writableState;return k?!k.destroyed&&!k.ending&&k.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var se=M.destroy;ue.prototype.destroy=function(k,j){let U=this._writableState;return!U.destroyed&&(U.bufferedIndex<U.buffered.length||U[V].length)&&r.nextTick(F,U),se.call(this,k,j),this},ue.prototype._undestroy=M.undestroy,ue.prototype._destroy=function(k,j){j(k)},ue.prototype[y.captureRejectionSymbol]=function(k){this.destroy(k)};var be;function _e(){return be===void 0&&(be={}),be}ue.fromWeb=function(k,j){return _e().newStreamWritableFromWritableStream(k,j)},ue.toWeb=function(k){return _e().newWritableStreamFromStreamWritable(k)}}}),Qs=xe({"node_modules/readable-stream/lib/internal/streams/duplexify.js"(e,t){var r=vt(),i=et(),{isReadable:n,isWritable:l,isIterable:u,isNodeStream:o,isReadableNodeStream:m,isWritableNodeStream:d,isDuplexNodeStream:p,isReadableStream:_,isWritableStream:y}=tt(),S=ut(),{AbortError:R,codes:{ERR_INVALID_ARG_TYPE:M,ERR_INVALID_RETURN_VALUE:N}}=$e(),{destroyer:P}=Ot(),f=Xe(),v=xr(),x=ri(),{createDeferredPromise:A}=Fe(),T=vn(),L=globalThis.Blob||i.Blob,z=typeof L<"u"?function(B){return B instanceof L}:function(B){return!1},Y=globalThis.AbortController||nr().AbortController,{FunctionPrototypeCall:K}=Ne(),pe=class extends f{constructor(V){super(V),V?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),V?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};t.exports=function V(B,ae){if(p(B))return B;if(m(B))return D({readable:B});if(d(B))return D({writable:B});if(o(B))return D({writable:!1,readable:!1});if(_(B))return D({readable:v.fromWeb(B)});if(y(B))return D({writable:x.fromWeb(B)});if(typeof B=="function"){let{value:he,write:Se,final:G,destroy:ne}=O(B);if(u(he))return T(pe,he,{objectMode:!0,write:Se,final:G,destroy:ne});let w=he?.then;if(typeof w=="function"){let Q,le=K(w,he,F=>{if(F!=null)throw new N("nully","body",F)},F=>{P(Q,F)});return Q=new pe({objectMode:!0,readable:!1,write:Se,final(F){G(async()=>{try{await le,r.nextTick(F,null)}catch(ce){r.nextTick(F,ce)}})},destroy:ne})}throw new N("Iterable, AsyncIterable or AsyncFunction",ae,he)}if(z(B))return V(B.arrayBuffer());if(u(B))return T(pe,B,{objectMode:!0,writable:!1});if(_(B?.readable)&&y(B?.writable))return pe.fromWeb(B);if(typeof B?.writable=="object"||typeof B?.readable=="object"){let he=B!=null&&B.readable?m(B?.readable)?B?.readable:V(B.readable):void 0,Se=B!=null&&B.writable?d(B?.writable)?B?.writable:V(B.writable):void 0;return D({readable:he,writable:Se})}let ue=B?.then;if(typeof ue=="function"){let he;return K(ue,B,Se=>{Se!=null&&he.push(Se),he.push(null)},Se=>{P(he,Se)}),he=new pe({objectMode:!0,writable:!1,read(){}})}throw new M(ae,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],B)};function O(V){let{promise:B,resolve:ae}=A(),ue=new Y,he=ue.signal;return{value:V(async function*(){for(;;){let G=B;B=null;let{chunk:ne,done:w,cb:Q}=await G;if(r.nextTick(Q),w)return;if(he.aborted)throw new R(void 0,{cause:he.reason});({promise:B,resolve:ae}=A()),yield ne}}(),{signal:he}),write(G,ne,w){let Q=ae;ae=null,Q({chunk:G,done:!1,cb:w})},final(G){let ne=ae;ae=null,ne({done:!0,cb:G})},destroy(G,ne){ue.abort(),ne(G)}}}function D(V){let B=V.readable&&typeof V.readable.read!="function"?v.wrap(V.readable):V.readable,ae=V.writable,ue=!!n(B),he=!!l(ae),Se,G,ne,w,Q;function le(F){let ce=w;w=null,ce?ce(F):F&&Q.destroy(F)}return Q=new pe({readableObjectMode:!!(B!=null&&B.readableObjectMode),writableObjectMode:!!(ae!=null&&ae.writableObjectMode),readable:ue,writable:he}),he&&(S(ae,F=>{he=!1,F&&P(B,F),le(F)}),Q._write=function(F,ce,me){ae.write(F,ce)?me():Se=me},Q._final=function(F){ae.end(),G=F},ae.on("drain",function(){if(Se){let F=Se;Se=null,F()}}),ae.on("finish",function(){if(G){let F=G;G=null,F()}})),ue&&(S(B,F=>{ue=!1,F&&P(B,F),le(F)}),B.on("readable",function(){if(ne){let F=ne;ne=null,F()}}),B.on("end",function(){Q.push(null)}),Q._read=function(){for(;;){let F=B.read();if(F===null){ne=Q._read;return}if(!Q.push(F))return}}),Q._destroy=function(F,ce){!F&&w!==null&&(F=new R),ne=null,Se=null,G=null,w===null?ce(F):(w=ce,P(ae,F),P(B,F))},Q}}}),Xe=xe({"node_modules/readable-stream/lib/internal/streams/duplex.js"(e,t){"use strict";var{ObjectDefineProperties:r,ObjectGetOwnPropertyDescriptor:i,ObjectKeys:n,ObjectSetPrototypeOf:l}=Ne();t.exports=m;var u=xr(),o=ri();l(m.prototype,u.prototype),l(m,u);{let y=n(o.prototype);for(let S=0;S<y.length;S++){let R=y[S];m.prototype[R]||(m.prototype[R]=o.prototype[R])}}function m(y){if(!(this instanceof m))return new m(y);u.call(this,y),o.call(this,y),y?(this.allowHalfOpen=y.allowHalfOpen!==!1,y.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),y.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}r(m.prototype,{writable:{__proto__:null,...i(o.prototype,"writable")},writableHighWaterMark:{__proto__:null,...i(o.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...i(o.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...i(o.prototype,"writableBuffer")},writableLength:{__proto__:null,...i(o.prototype,"writableLength")},writableFinished:{__proto__:null,...i(o.prototype,"writableFinished")},writableCorked:{__proto__:null,...i(o.prototype,"writableCorked")},writableEnded:{__proto__:null,...i(o.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...i(o.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(y){this._readableState&&this._writableState&&(this._readableState.destroyed=y,this._writableState.destroyed=y)}}});var d;function p(){return d===void 0&&(d={}),d}m.fromWeb=function(y,S){return p().newStreamDuplexFromReadableWritablePair(y,S)},m.toWeb=function(y){return p().newReadableWritablePairFromDuplex(y)};var _;m.from=function(y){return _||(_=Qs()),_(y,"body")}}}),Sn=xe({"node_modules/readable-stream/lib/internal/streams/transform.js"(e,t){"use strict";var{ObjectSetPrototypeOf:r,Symbol:i}=Ne();t.exports=m;var{ERR_METHOD_NOT_IMPLEMENTED:n}=$e().codes,l=Xe(),{getHighWaterMark:u}=Sr();r(m.prototype,l.prototype),r(m,l);var o=i("kCallback");function m(_){if(!(this instanceof m))return new m(_);let y=_?u(this,_,"readableHighWaterMark",!0):null;y===0&&(_={..._,highWaterMark:null,readableHighWaterMark:y,writableHighWaterMark:_.writableHighWaterMark||0}),l.call(this,_),this._readableState.sync=!1,this[o]=null,_&&(typeof _.transform=="function"&&(this._transform=_.transform),typeof _.flush=="function"&&(this._flush=_.flush)),this.on("prefinish",p)}function d(_){typeof this._flush=="function"&&!this.destroyed?this._flush((y,S)=>{if(y){_?_(y):this.destroy(y);return}S!=null&&this.push(S),this.push(null),_&&_()}):(this.push(null),_&&_())}function p(){this._final!==d&&d.call(this)}m.prototype._final=d,m.prototype._transform=function(_,y,S){throw new n("_transform()")},m.prototype._write=function(_,y,S){let R=this._readableState,M=this._writableState,N=R.length;this._transform(_,y,(P,f)=>{if(P){S(P);return}f!=null&&this.push(f),M.ended||N===R.length||R.length<R.highWaterMark?S():this[o]=S})},m.prototype._read=function(){if(this[o]){let _=this[o];this[o]=null,_()}}}}),xn=xe({"node_modules/readable-stream/lib/internal/streams/passthrough.js"(e,t){"use strict";var{ObjectSetPrototypeOf:r}=Ne();t.exports=n;var i=Sn();r(n.prototype,i.prototype),r(n,i);function n(l){if(!(this instanceof n))return new n(l);i.call(this,l)}n.prototype._transform=function(l,u,o){o(null,l)}}}),ii=xe({"node_modules/readable-stream/lib/internal/streams/pipeline.js"(e,t){var r=vt(),{ArrayIsArray:i,Promise:n,SymbolAsyncIterator:l,SymbolDispose:u}=Ne(),o=ut(),{once:m}=Fe(),d=Ot(),p=Xe(),{aggregateTwoErrors:_,codes:{ERR_INVALID_ARG_TYPE:y,ERR_INVALID_RETURN_VALUE:S,ERR_MISSING_ARGS:R,ERR_STREAM_DESTROYED:M,ERR_STREAM_PREMATURE_CLOSE:N},AbortError:P}=$e(),{validateFunction:f,validateAbortSignal:v}=ar(),{isIterable:x,isReadable:A,isReadableNodeStream:T,isNodeStream:L,isTransformStream:z,isWebStream:Y,isReadableStream:K,isReadableFinished:pe}=tt(),O=globalThis.AbortController||nr().AbortController,D,V,B;function ae(F,ce,me){let ve=!1;F.on("close",()=>{ve=!0});let ge=o(F,{readable:ce,writable:me},q=>{ve=!q});return{destroy:q=>{ve||(ve=!0,d.destroyer(F,q||new M("pipe")))},cleanup:ge}}function ue(F){return f(F[F.length-1],"streams[stream.length - 1]"),F.pop()}function he(F){if(x(F))return F;if(T(F))return Se(F);throw new y("val",["Readable","Iterable","AsyncIterable"],F)}async function*Se(F){V||(V=xr()),yield*V.prototype[l].call(F)}async function G(F,ce,me,{end:ve}){let ge,q=null,H=_e=>{if(_e&&(ge=_e),q){let k=q;q=null,k()}},se=()=>new n((_e,k)=>{ge?k(ge):q=()=>{ge?k(ge):_e()}});ce.on("drain",H);let be=o(ce,{readable:!1},H);try{ce.writableNeedDrain&&await se();for await(let _e of F)ce.write(_e)||await se();ve&&(ce.end(),await se()),me()}catch(_e){me(ge!==_e?_(ge,_e):_e)}finally{be(),ce.off("drain",H)}}async function ne(F,ce,me,{end:ve}){z(ce)&&(ce=ce.writable);let ge=ce.getWriter();try{for await(let q of F)await ge.ready,ge.write(q).catch(()=>{});await ge.ready,ve&&await ge.close(),me()}catch(q){try{await ge.abort(q),me(q)}catch(H){me(H)}}}function w(...F){return Q(F,m(ue(F)))}function Q(F,ce,me){if(F.length===1&&i(F[0])&&(F=F[0]),F.length<2)throw new R("streams");let ve=new O,ge=ve.signal,q=me?.signal,H=[];v(q,"options.signal");function se(){X(new P)}B=B||Fe().addAbortListener;let be;q&&(be=B(q,se));let _e,k,j=[],U=0;function ee(J){X(J,--U===0)}function X(J,fe){var Pe;if(J&&(!_e||_e.code==="ERR_STREAM_PREMATURE_CLOSE")&&(_e=J),!(!_e&&!fe)){for(;j.length;)j.shift()(_e);(Pe=be)===null||Pe===void 0||Pe[u](),ve.abort(),fe&&(_e||H.forEach(c=>c()),r.nextTick(ce,_e,k))}}let Z;for(let J=0;J<F.length;J++){let fe=F[J],Pe=J<F.length-1,c=J>0,s=Pe||me?.end!==!1,a=J===F.length-1;if(L(fe)){let h=function(E){E&&E.name!=="AbortError"&&E.code!=="ERR_STREAM_PREMATURE_CLOSE"&&ee(E)};var I=h;if(s){let{destroy:E,cleanup:C}=ae(fe,Pe,c);j.push(E),A(fe)&&a&&H.push(C)}fe.on("error",h),A(fe)&&a&&H.push(()=>{fe.removeListener("error",h)})}if(J===0)if(typeof fe=="function"){if(Z=fe({signal:ge}),!x(Z))throw new S("Iterable, AsyncIterable or Stream","source",Z)}else x(fe)||T(fe)||z(fe)?Z=fe:Z=p.from(fe);else if(typeof fe=="function"){if(z(Z)){var W;Z=he((W=Z)===null||W===void 0?void 0:W.readable)}else Z=he(Z);if(Z=fe(Z,{signal:ge}),Pe){if(!x(Z,!0))throw new S("AsyncIterable",`transform[${J-1}]`,Z)}else{var oe;D||(D=xn());let h=new D({objectMode:!0}),E=(oe=Z)===null||oe===void 0?void 0:oe.then;if(typeof E=="function")U++,E.call(Z,ye=>{k=ye,ye!=null&&h.write(ye),s&&h.end(),r.nextTick(ee)},ye=>{h.destroy(ye),r.nextTick(ee,ye)});else if(x(Z,!0))U++,G(Z,h,ee,{end:s});else if(K(Z)||z(Z)){let ye=Z.readable||Z;U++,G(ye,h,ee,{end:s})}else throw new S("AsyncIterable or Promise","destination",Z);Z=h;let{destroy:C,cleanup:$}=ae(Z,!1,!0);j.push(C),a&&H.push($)}}else if(L(fe)){if(T(Z)){U+=2;let h=le(Z,fe,ee,{end:s});A(fe)&&a&&H.push(h)}else if(z(Z)||K(Z)){let h=Z.readable||Z;U++,G(h,fe,ee,{end:s})}else if(x(Z))U++,G(Z,fe,ee,{end:s});else throw new y("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],Z);Z=fe}else if(Y(fe)){if(T(Z))U++,ne(he(Z),fe,ee,{end:s});else if(K(Z)||x(Z))U++,ne(Z,fe,ee,{end:s});else if(z(Z))U++,ne(Z.readable,fe,ee,{end:s});else throw new y("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],Z);Z=fe}else Z=p.from(fe)}return(ge!=null&&ge.aborted||q!=null&&q.aborted)&&r.nextTick(se),Z}function le(F,ce,me,{end:ve}){let ge=!1;if(ce.on("close",()=>{ge||me(new N)}),F.pipe(ce,{end:!1}),ve){let H=function(){ge=!0,ce.end()};var q=H;pe(F)?r.nextTick(H):F.once("end",H)}else me();return o(F,{readable:!0,writable:!1},H=>{let se=F._readableState;H&&H.code==="ERR_STREAM_PREMATURE_CLOSE"&&se&&se.ended&&!se.errored&&!se.errorEmitted?F.once("end",me).once("error",me):me(H)}),o(ce,{readable:!1,writable:!0},me)}t.exports={pipelineImpl:Q,pipeline:w}}}),En=xe({"node_modules/readable-stream/lib/internal/streams/compose.js"(e,t){"use strict";var{pipeline:r}=ii(),i=Xe(),{destroyer:n}=Ot(),{isNodeStream:l,isReadable:u,isWritable:o,isWebStream:m,isTransformStream:d,isWritableStream:p,isReadableStream:_}=tt(),{AbortError:y,codes:{ERR_INVALID_ARG_VALUE:S,ERR_MISSING_ARGS:R}}=$e(),M=ut();t.exports=function(...P){if(P.length===0)throw new R("streams");if(P.length===1)return i.from(P[0]);let f=[...P];if(typeof P[0]=="function"&&(P[0]=i.from(P[0])),typeof P[P.length-1]=="function"){let D=P.length-1;P[D]=i.from(P[D])}for(let D=0;D<P.length;++D)if(!(!l(P[D])&&!m(P[D]))){if(D<P.length-1&&!(u(P[D])||_(P[D])||d(P[D])))throw new S(`streams[${D}]`,f[D],"must be readable");if(D>0&&!(o(P[D])||p(P[D])||d(P[D])))throw new S(`streams[${D}]`,f[D],"must be writable")}let v,x,A,T,L;function z(D){let V=T;T=null,V?V(D):D?L.destroy(D):!O&&!pe&&L.destroy()}let Y=P[0],K=r(P,z),pe=!!(o(Y)||p(Y)||d(Y)),O=!!(u(K)||_(K)||d(K));if(L=new i({writableObjectMode:!!(Y!=null&&Y.writableObjectMode),readableObjectMode:!!(K!=null&&K.readableObjectMode),writable:pe,readable:O}),pe){if(l(Y))L._write=function(V,B,ae){Y.write(V,B)?ae():v=ae},L._final=function(V){Y.end(),x=V},Y.on("drain",function(){if(v){let V=v;v=null,V()}});else if(m(Y)){let B=(d(Y)?Y.writable:Y).getWriter();L._write=async function(ae,ue,he){try{await B.ready,B.write(ae).catch(()=>{}),he()}catch(Se){he(Se)}},L._final=async function(ae){try{await B.ready,B.close().catch(()=>{}),x=ae}catch(ue){ae(ue)}}}let D=d(K)?K.readable:K;M(D,()=>{if(x){let V=x;x=null,V()}})}if(O){if(l(K))K.on("readable",function(){if(A){let D=A;A=null,D()}}),K.on("end",function(){L.push(null)}),L._read=function(){for(;;){let D=K.read();if(D===null){A=L._read;return}if(!L.push(D))return}};else if(m(K)){let V=(d(K)?K.readable:K).getReader();L._read=async function(){for(;;)try{let{value:B,done:ae}=await V.read();if(!L.push(B))return;if(ae){L.push(null);return}}catch{return}}}}return L._destroy=function(D,V){!D&&T!==null&&(D=new y),A=null,v=null,x=null,T===null?V(D):(T=V,l(K)&&n(K,D))},L}}}),Vs=xe({"node_modules/readable-stream/lib/internal/streams/operators.js"(e,t){"use strict";var r=globalThis.AbortController||nr().AbortController,{codes:{ERR_INVALID_ARG_VALUE:i,ERR_INVALID_ARG_TYPE:n,ERR_MISSING_ARGS:l,ERR_OUT_OF_RANGE:u},AbortError:o}=$e(),{validateAbortSignal:m,validateInteger:d,validateObject:p}=ar(),_=Ne().Symbol("kWeak"),y=Ne().Symbol("kResistStopPropagation"),{finished:S}=ut(),R=En(),{addAbortSignalNoValidate:M}=vr(),{isWritable:N,isNodeStream:P}=tt(),{deprecate:f}=Fe(),{ArrayPrototypePush:v,Boolean:x,MathFloor:A,Number:T,NumberIsNaN:L,Promise:z,PromiseReject:Y,PromiseResolve:K,PromisePrototypeThen:pe,Symbol:O}=Ne(),D=O("kEmpty"),V=O("kEof");function B(q,H){if(H!=null&&p(H,"options"),H?.signal!=null&&m(H.signal,"options.signal"),P(q)&&!N(q))throw new i("stream",q,"must be writable");let se=R(this,q);return H!=null&&H.signal&&M(H.signal,se),se}function ae(q,H){if(typeof q!="function")throw new n("fn",["Function","AsyncFunction"],q);H!=null&&p(H,"options"),H?.signal!=null&&m(H.signal,"options.signal");let se=1;H?.concurrency!=null&&(se=A(H.concurrency));let be=se-1;return H?.highWaterMark!=null&&(be=A(H.highWaterMark)),d(se,"options.concurrency",1),d(be,"options.highWaterMark",0),be+=se,async function*(){let k=Fe().AbortSignalAny([H?.signal].filter(x)),j=this,U=[],ee={signal:k},X,Z,I=!1,W=0;function oe(){I=!0,J()}function J(){W-=1,fe()}function fe(){Z&&!I&&W<se&&U.length<be&&(Z(),Z=null)}async function Pe(){try{for await(let c of j){if(I)return;if(k.aborted)throw new o;try{if(c=q(c,ee),c===D)continue;c=K(c)}catch(s){c=Y(s)}W+=1,pe(c,J,oe),U.push(c),X&&(X(),X=null),!I&&(U.length>=be||W>=se)&&await new z(s=>{Z=s})}U.push(V)}catch(c){let s=Y(c);pe(s,J,oe),U.push(s)}finally{I=!0,X&&(X(),X=null)}}Pe();try{for(;;){for(;U.length>0;){let c=await U[0];if(c===V)return;if(k.aborted)throw new o;c!==D&&(yield c),U.shift(),fe()}await new z(c=>{X=c})}}finally{I=!0,Z&&(Z(),Z=null)}}.call(this)}function ue(q=void 0){return q!=null&&p(q,"options"),q?.signal!=null&&m(q.signal,"options.signal"),async function*(){let se=0;for await(let _e of this){var be;if(q!=null&&(be=q.signal)!==null&&be!==void 0&&be.aborted)throw new o({cause:q.signal.reason});yield[se++,_e]}}.call(this)}async function he(q,H=void 0){for await(let se of w.call(this,q,H))return!0;return!1}async function Se(q,H=void 0){if(typeof q!="function")throw new n("fn",["Function","AsyncFunction"],q);return!await he.call(this,async(...se)=>!await q(...se),H)}async function G(q,H){for await(let se of w.call(this,q,H))return se}async function ne(q,H){if(typeof q!="function")throw new n("fn",["Function","AsyncFunction"],q);async function se(be,_e){return await q(be,_e),D}for await(let be of ae.call(this,se,H));}function w(q,H){if(typeof q!="function")throw new n("fn",["Function","AsyncFunction"],q);async function se(be,_e){return await q(be,_e)?be:D}return ae.call(this,se,H)}var Q=class extends l{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function le(q,H,se){var be;if(typeof q!="function")throw new n("reducer",["Function","AsyncFunction"],q);se!=null&&p(se,"options"),se?.signal!=null&&m(se.signal,"options.signal");let _e=arguments.length>1;if(se!=null&&(be=se.signal)!==null&&be!==void 0&&be.aborted){let X=new o(void 0,{cause:se.signal.reason});throw this.once("error",()=>{}),await S(this.destroy(X)),X}let k=new r,j=k.signal;if(se!=null&&se.signal){let X={once:!0,[_]:this,[y]:!0};se.signal.addEventListener("abort",()=>k.abort(),X)}let U=!1;try{for await(let X of this){var ee;if(U=!0,se!=null&&(ee=se.signal)!==null&&ee!==void 0&&ee.aborted)throw new o;_e?H=await q(H,X,{signal:j}):(H=X,_e=!0)}if(!U&&!_e)throw new Q}finally{k.abort()}return H}async function F(q){q!=null&&p(q,"options"),q?.signal!=null&&m(q.signal,"options.signal");let H=[];for await(let be of this){var se;if(q!=null&&(se=q.signal)!==null&&se!==void 0&&se.aborted)throw new o(void 0,{cause:q.signal.reason});v(H,be)}return H}function ce(q,H){let se=ae.call(this,q,H);return async function*(){for await(let _e of se)yield*_e}.call(this)}function me(q){if(q=T(q),L(q))return 0;if(q<0)throw new u("number",">= 0",q);return q}function ve(q,H=void 0){return H!=null&&p(H,"options"),H?.signal!=null&&m(H.signal,"options.signal"),q=me(q),async function*(){var be;if(H!=null&&(be=H.signal)!==null&&be!==void 0&&be.aborted)throw new o;for await(let k of this){var _e;if(H!=null&&(_e=H.signal)!==null&&_e!==void 0&&_e.aborted)throw new o;q--<=0&&(yield k)}}.call(this)}function ge(q,H=void 0){return H!=null&&p(H,"options"),H?.signal!=null&&m(H.signal,"options.signal"),q=me(q),async function*(){var be;if(H!=null&&(be=H.signal)!==null&&be!==void 0&&be.aborted)throw new o;for await(let k of this){var _e;if(H!=null&&(_e=H.signal)!==null&&_e!==void 0&&_e.aborted)throw new o;if(q-- >0&&(yield k),q<=0)return}}.call(this)}t.exports.streamReturningOperators={asIndexedPairs:f(ue,"readable.asIndexedPairs will be removed in a future version."),drop:ve,filter:w,flatMap:ce,map:ae,take:ge,compose:B},t.exports.promiseReturningOperators={every:Se,forEach:ne,reduce:le,toArray:F,some:he,find:G}}}),Rn=xe({"node_modules/readable-stream/lib/stream/promises.js"(e,t){"use strict";var{ArrayPrototypePop:r,Promise:i}=Ne(),{isIterable:n,isNodeStream:l,isWebStream:u}=tt(),{pipelineImpl:o}=ii(),{finished:m}=ut();An();function d(...p){return new i((_,y)=>{let S,R,M=p[p.length-1];if(M&&typeof M=="object"&&!l(M)&&!n(M)&&!u(M)){let N=r(p);S=N.signal,R=N.end}o(p,(N,P)=>{N?y(N):_(P)},{signal:S,end:R})})}t.exports={finished:m,pipeline:d}}}),An=xe({"node_modules/readable-stream/lib/stream.js"(e,t){"use strict";var{Buffer:r}=et(),{ObjectDefineProperty:i,ObjectKeys:n,ReflectApply:l}=Ne(),{promisify:{custom:u}}=Fe(),{streamReturningOperators:o,promiseReturningOperators:m}=Vs(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:d}}=$e(),p=En(),{setDefaultHighWaterMark:_,getDefaultHighWaterMark:y}=Sr(),{pipeline:S}=ii(),{destroyer:R}=Ot(),M=ut(),N=Rn(),P=tt(),f=t.exports=ti().Stream;f.isDestroyed=P.isDestroyed,f.isDisturbed=P.isDisturbed,f.isErrored=P.isErrored,f.isReadable=P.isReadable,f.isWritable=P.isWritable,f.Readable=xr();for(let x of n(o)){let A=function(...L){if(new.target)throw d();return f.Readable.from(l(T,this,L))},T=o[x];i(A,"name",{__proto__:null,value:T.name}),i(A,"length",{__proto__:null,value:T.length}),i(f.Readable.prototype,x,{__proto__:null,value:A,enumerable:!1,configurable:!0,writable:!0})}for(let x of n(m)){let A=function(...L){if(new.target)throw d();return l(T,this,L)},T=m[x];i(A,"name",{__proto__:null,value:T.name}),i(A,"length",{__proto__:null,value:T.length}),i(f.Readable.prototype,x,{__proto__:null,value:A,enumerable:!1,configurable:!0,writable:!0})}f.Writable=ri(),f.Duplex=Xe(),f.Transform=Sn(),f.PassThrough=xn(),f.pipeline=S;var{addAbortSignal:v}=vr();f.addAbortSignal=v,f.finished=M,f.destroy=R,f.compose=p,f.setDefaultHighWaterMark=_,f.getDefaultHighWaterMark=y,i(f,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return N}}),i(S,u,{__proto__:null,enumerable:!0,get(){return N.pipeline}}),i(M,u,{__proto__:null,enumerable:!0,get(){return N.finished}}),f.Stream=f,f._isUint8Array=function(A){return A instanceof Uint8Array},f._uint8ArrayToBuffer=function(A){return r.from(A.buffer,A.byteOffset,A.byteLength)}}}),ni=xe({"node_modules/readable-stream/lib/ours/browser.js"(e,t){"use strict";var r=An(),i=Rn(),n=r.Readable.destroy;t.exports=r.Readable,t.exports._uint8ArrayToBuffer=r._uint8ArrayToBuffer,t.exports._isUint8Array=r._isUint8Array,t.exports.isDisturbed=r.isDisturbed,t.exports.isErrored=r.isErrored,t.exports.isReadable=r.isReadable,t.exports.Readable=r.Readable,t.exports.Writable=r.Writable,t.exports.Duplex=r.Duplex,t.exports.Transform=r.Transform,t.exports.PassThrough=r.PassThrough,t.exports.addAbortSignal=r.addAbortSignal,t.exports.finished=r.finished,t.exports.destroy=r.destroy,t.exports.destroy=n,t.exports.pipeline=r.pipeline,t.exports.compose=r.compose,Object.defineProperty(r,"promises",{configurable:!0,enumerable:!0,get(){return i}}),t.exports.Stream=r.Stream,t.exports.default=t.exports}});function Js(e){return new Zs(e)}var In="http://www.w3.org/1999/02/22-rdf-syntax-ns#type",Ys={rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",solid:"http://www.w3.org/ns/solid/terms#",schema:"http://schema.org/",vcard:"http://www.w3.org/2006/vcard/ns#"},Zs=class{constructor(e){this.prefixes={...Ys,...e?.prefixes},this.prefixes.xsd||(this.prefixes.xsd="http://www.w3.org/2001/XMLSchema#"),this.parser=e?.parser,this.writer=e?.writer,this.sources=Object.create(null),this.separator=e?.separator??"$"}parse(e,t,r){let{quads:i,prefixes:n}=this.parser(e,t,r);if(n)for(let l in n){let u=new URL(n[l],t).href;this.prefixes[l]||(this.prefixes[l]=u)}return this.sources[t]=new Xs(i,t,r,n,this),this.sources[t]}setType(e,t){if(!t)return e;if(typeof e=="string"?e=new String(e):typeof result=="number"&&(e=new Number(e)),typeof e!="object")throw new Error("cannot set type on ",e,t);return e.type=t,e}getType(e){return e&&typeof e=="object"?e.type:null}},Xs=class{#e=Object.create(null);constructor(e,t,r,i,n){this.mimetype=r,this.url=t,this.prefixes=i,this.context=n,this.subjects=Object.create(null);for(let l of e){let u;if(l.subject.termType=="BlankNode")switch(this.shortURI(l.predicate.id,":")){case"rdf:first":if(u=this.addCollection(l.subject.id),this.shortURI(l.object.id,":")!="rdf:nil"){let d=this.getValue(l.object);d&&u.push(d)}continue;case"rdf:rest":this.#e[l.object.id]=this.#e[l.subject.id];continue;default:u=this.addBlankNode(l.subject.id);break}else u=this.addNamedNode(l.subject.id);u.addPredicate(l.predicate.id,l.object)}this.subjects[t]?this.primary=this.subjects[t]:this.primary=null,Object.defineProperty(this,"data",{get(){return Object.values(this.subjects)}})}addNamedNode(e){let t=new URL(e,this.url).href;return this.subjects[t]||(this.subjects[t]=new Vr(t,this)),this.subjects[t]}addBlankNode(e){return this.#e[e]||(this.#e[e]=new yr(this)),this.#e[e]}addCollection(e){return this.#e[e]||(this.#e[e]=new Jr(this)),this.#e[e]}write(){return this.context.writer(this)}get(e){return this.subjects[this.fullURI(e)]}fullURI(e,t=null){t||(t=this.context.separator);let[r,i]=e.split(t);return i?this.prefixes[r]+i:e}shortURI(e,t=null){t||(t=this.context.separator);for(let r in this.context.prefixes)if(e.startsWith(this.context.prefixes[r]))return r+t+e.substring(this.context.prefixes[r].length);return this.url&&e.startsWith(this.url)?e.substring(this.url.length):e}setType(e,t){let r=this.shortURI(t);return this.context.setType(e,r)}getType(e){return this.context.getType(e)}setLanguage(e,t){if(typeof e=="string"?e=new String(e):typeof result=="number"&&(e=new Number(e)),typeof e!="object")throw new Error("cannot set language on ",e);return e.language=t,e}getValue(e){let t;if(e.termType=="Literal"){t=e.value;let r=e.datatype?.id;r&&(t=this.setType(t,r));let i=e.language;i&&(t=this.setLanguage(t,i))}else e.termType=="BlankNode"?t=this.addBlankNode(e.id):t=this.addNamedNode(e.id);return t}},yr=class{constructor(e){Object.defineProperty(this,"graph",{value:e,writable:!1,enumerable:!1})}addPredicate(e,t){if(e.id&&(e=e.id),e==In){let r=this.graph.shortURI(t.id);this.addType(r)}else{let r=this.graph.getValue(t);e=this.graph.shortURI(e),this[e]?Array.isArray(this[e])?this[e].push(r):this[e]=[this[e],r]:this[e]=r}}addType(e){this.a?(Array.isArray(this.a)||(this.a=[this.a]),this.a.push(e)):this.a=e}},Vr=class extends yr{constructor(e,t){super(t),Object.defineProperty(this,"a",{writable:!0,enumerable:!1}),Object.defineProperty(this,"id",{value:e,writable:!1,enumerable:!1})}},Jr=class extends Array{constructor(e,t){super(),Object.defineProperty(this,"graph",{value:t,writable:!1,enumerable:!1})}},eo=or(et()),to=or(qs()),Yt="http://www.w3.org/1999/02/22-rdf-syntax-ns#",Zt="http://www.w3.org/2001/XMLSchema#",Hr="http://www.w3.org/2000/10/swap/",Ue={xsd:{decimal:`${Zt}decimal`,boolean:`${Zt}boolean`,double:`${Zt}double`,integer:`${Zt}integer`,string:`${Zt}string`},rdf:{type:`${Yt}type`,nil:`${Yt}nil`,first:`${Yt}first`,rest:`${Yt}rest`,langString:`${Yt}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${Hr}reify#forSome`,forAll:`${Hr}reify#forAll`},log:{implies:`${Hr}log#implies`}},{xsd:br}=Ue,ro=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,dn={"\\":"\\","'":"'",'"':'"',n:`
`,r:"\r",t:"	",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},io=/[\x00-\x20<>\\"\{\}\|\^\`]/,no={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},so=/$0^/,Tn=class{constructor(e){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,e=e||{},this._lineMode=!!e.lineMode){this._n3Mode=!1;for(let t in this)!(t in no)&&this[t]instanceof RegExp&&(this[t]=so)}else this._n3Mode=e.n3!==!1;this.comments=!!e.comments,this._literalClosingPos=0}_tokenizeToEnd(e,t){let r=this._input,i=r.length;for(;;){let u,o;for(;u=this._newline.exec(r);)this.comments&&(o=this._comment.exec(u[0]))&&n("comment",o[1],"",this._line,u[0].length),r=r.substr(u[0].length,r.length),i=r.length,this._line++;if(!u&&(u=this._whitespace.exec(r))&&(r=r.substr(u[0].length,r.length)),this._endOfFile.test(r))return t&&(this.comments&&(o=this._comment.exec(r))&&n("comment",o[1],"",this._line,r.length),r=null,n("eof","","",this._line,0)),this._input=r;let m=this._line,d=r[0],p="",_="",y="",S=null,R=0,M=!1;switch(d){case"^":if(r.length<3)break;if(r[1]==="^"){if(this._previousMarker="^^",r=r.substr(2),r[0]!=="<"){M=!0;break}}else{this._n3Mode&&(R=1,p="^");break}case"<":if(S=this._unescapedIri.exec(r))p="IRI",_=S[1];else if(S=this._iri.exec(r)){if(_=this._unescape(S[1]),_===null||io.test(_))return l(this);p="IRI"}else r.length>1&&r[1]==="<"?(p="<<",R=2):this._n3Mode&&r.length>1&&r[1]==="="&&(p="inverse",R=2,_=">");break;case">":r.length>1&&r[1]===">"&&(p=">>",R=2);break;case"_":((S=this._blank.exec(r))||t&&(S=this._blank.exec(`${r} `)))&&(p="blank",y="_",_=S[1]);break;case'"':if(S=this._simpleQuotedString.exec(r))_=S[1];else if({value:_,matchLength:R}=this._parseLiteral(r),_===null)return l(this);(S!==null||R!==0)&&(p="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(S=this._simpleApostropheString.exec(r))_=S[1];else if({value:_,matchLength:R}=this._parseLiteral(r),_===null)return l(this);(S!==null||R!==0)&&(p="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(S=this._variable.exec(r))&&(p="var",_=S[0]);break;case"@":this._previousMarker==="literal"&&(S=this._langcode.exec(r))?(p="langcode",_=S[1]):(S=this._keyword.exec(r))&&(p=S[0]);break;case".":if(r.length===1?t:r[1]<"0"||r[1]>"9"){p=".",R=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(S=this._number.exec(r)||t&&(S=this._number.exec(`${r} `)))&&(p="literal",_=S[0],y=typeof S[1]=="string"?br.double:typeof S[2]=="string"?br.decimal:br.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(S=this._sparqlKeyword.exec(r))?p=S[0].toUpperCase():M=!0;break;case"f":case"t":(S=this._boolean.exec(r))?(p="literal",_=S[0],y=br.boolean):M=!0;break;case"a":(S=this._shortPredicates.exec(r))?(p="abbreviation",_="a"):M=!0;break;case"=":this._n3Mode&&r.length>1&&(p="abbreviation",r[1]!==">"?(R=1,_="="):(R=2,_=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"}":this._lineMode||(R=1,p=d);break;case"{":!this._lineMode&&r.length>=2&&(r[1]==="|"?(p="{|",R=2):(p=d,R=1));break;case"|":r.length>=2&&r[1]==="}"&&(p="|}",R=2);break;default:M=!0}if(M&&((this._previousMarker==="@prefix"||this._previousMarker==="PREFIX")&&(S=this._prefix.exec(r))?(p="prefix",_=S[1]||""):((S=this._prefixed.exec(r))||t&&(S=this._prefixed.exec(`${r} `)))&&(p="prefixed",y=S[1]||"",_=this._unescape(S[2]))),this._previousMarker==="^^")switch(p){case"prefixed":p="type";break;case"IRI":p="typeIRI";break;default:p=""}if(!p)return t||!/^'''|^"""/.test(r)&&/\n|\r/.test(r)?l(this):this._input=r;let N=R||S[0].length,P=n(p,_,y,m,N);this.previousToken=P,this._previousMarker=p,r=r.substr(N,r.length)}function n(u,o,m,d,p){let _=r?i-r.length:i,y=_+p,S={type:u,value:o,prefix:m,line:d,start:_,end:y};return e(null,S),S}function l(u){e(u._syntaxError(/^\S*/.exec(r)[0]))}}_unescape(e){let t=!1,r=e.replace(ro,(i,n,l,u)=>{if(typeof n=="string")return String.fromCharCode(Number.parseInt(n,16));if(typeof l=="string"){let o=Number.parseInt(l,16);return o<=65535?String.fromCharCode(Number.parseInt(l,16)):String.fromCharCode(55296+((o-=65536)>>10),56320+(o&1023))}return u in dn?dn[u]:(t=!0,"")});return t?null:r}_parseLiteral(e){if(e.length>=3){let t=e.match(/^(?:"""|"|'''|'|)/)[0],r=t.length,i=Math.max(this._literalClosingPos,r);for(;(i=e.indexOf(t,i))>0;){let n=0;for(;e[i-n-1]==="\\";)n++;if(n%2===0){let l=e.substring(r,i),u=l.split(/\r\n|\r|\n/).length-1,o=i+r;if(r===1&&u!==0||r===3&&this._lineMode)break;return this._line+=u,{value:this._unescape(l),matchLength:o}}i++}this._literalClosingPos=e.length-r+1}return{value:"",matchLength:0}}_syntaxError(e){this._input=null;let t=new Error(`Unexpected "${e}" on line ${this._line}.`);return t.context={token:void 0,line:this._line,previousToken:this.previousToken},t}_readStartingBom(e){return e.startsWith("\uFEFF")?e.substr(1):e}tokenize(e,t){if(this._line=1,typeof e=="string")if(this._input=this._readStartingBom(e),typeof t=="function")(0,to.default)(()=>this._tokenizeToEnd(t,!0));else{let r=[],i;if(this._tokenizeToEnd((n,l)=>n?i=n:r.push(l),!0),i)throw i;return r}else this._pendingBuffer=null,typeof e.setEncoding=="function"&&e.setEncoding("utf8"),e.on("data",r=>{this._input!==null&&r.length!==0&&(this._pendingBuffer&&(r=eo.Buffer.concat([this._pendingBuffer,r]),this._pendingBuffer=null),r[r.length-1]&128?this._pendingBuffer=r:(typeof this._input>"u"?this._input=this._readStartingBom(typeof r=="string"?r:r.toString()):this._input+=r,this._tokenizeToEnd(t,!1)))}),e.on("end",()=>{typeof this._input=="string"&&this._tokenizeToEnd(t,!0)}),e.on("error",t)}},{rdf:oo,xsd:gt}=Ue,Bt,ao=0,Yr={namedNode:On,blankNode:Bn,variable:Mn,literal:Cn,defaultGraph:lo,quad:Zr,triple:Zr,fromTerm:tr,fromQuad:Dn},lt=Yr,Ve=class kn{constructor(t){this.id=t}get value(){return this.id}equals(t){return t instanceof kn?this.id===t.id:!!t&&this.termType===t.termType&&this.value===t.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}},si=class extends Ve{get termType(){return"NamedNode"}},rr=class jn extends Ve{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){let t=this.id,r=t.lastIndexOf('"')+1;return r<t.length&&t[r++]==="@"?t.substr(r).toLowerCase():""}get datatype(){return new si(this.datatypeString)}get datatypeString(){let t=this.id,r=t.lastIndexOf('"')+1,i=r<t.length?t[r]:"";return i==="^"?t.substr(r+2):i!=="@"?gt.string:oo.langString}equals(t){return t instanceof jn?this.id===t.id:!!t&&!!t.datatype&&this.termType===t.termType&&this.value===t.value&&this.language===t.language&&this.datatype.value===t.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}},Nn=class extends Ve{constructor(e){super(`_:${e}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}},Pn=class extends Ve{constructor(e){super(`?${e}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}},Ln=class extends Ve{constructor(){return super(""),Bt||this}get termType(){return"DefaultGraph"}equals(e){return this===e||!!e&&this.termType===e.termType}};Bt=new Ln;function Lt(e,t,r){if(t=t||Yr,!e)return t.defaultGraph();switch(e[0]){case"?":return t.variable(e.substr(1));case"_":return t.blankNode(e.substr(2));case'"':if(t===Yr)return new rr(e);if(e[e.length-1]==='"')return t.literal(e.substr(1,e.length-2));let i=e.lastIndexOf('"',e.length-1);return t.literal(e.substr(1,i-1),e[i+1]==="@"?e.substr(i+2):t.namedNode(e.substr(i+3)));case"[":e=JSON.parse(e);break;default:if(!r||!Array.isArray(e))return t.namedNode(e)}return t.quad(Lt(e[0],t,!0),Lt(e[1],t,!0),Lt(e[2],t,!0),e[3]&&Lt(e[3],t,!0))}function wt(e,t){if(typeof e=="string")return e;if(e instanceof Ve&&e.termType!=="Quad")return e.id;if(!e)return Bt.id;switch(e.termType){case"NamedNode":return e.value;case"BlankNode":return`_:${e.value}`;case"Variable":return`?${e.value}`;case"DefaultGraph":return"";case"Literal":return`"${e.value}"${e.language?`@${e.language}`:e.datatype&&e.datatype.value!==gt.string?`^^${e.datatype.value}`:""}`;case"Quad":let r=[wt(e.subject,!0),wt(e.predicate,!0),wt(e.object,!0)];return e.graph&&e.graph.termType!=="DefaultGraph"&&r.push(wt(e.graph,!0)),t?r:JSON.stringify(r);default:throw new Error(`Unexpected termType: ${e.termType}`)}}var gr=class extends Ve{constructor(e,t,r,i){super(""),this._subject=e,this._predicate=t,this._object=r,this._graph=i||Bt}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(e){return!!e&&this._subject.equals(e.subject)&&this._predicate.equals(e.predicate)&&this._object.equals(e.object)&&this._graph.equals(e.graph)}};function On(e){return new si(e)}function Bn(e){return new Nn(e||`n3-${ao++}`)}function Cn(e,t){if(typeof t=="string")return new rr(`"${e}"@${t.toLowerCase()}`);let r=t?t.value:"";return r===""&&(typeof e=="boolean"?r=gt.boolean:typeof e=="number"&&(Number.isFinite(e)?r=Number.isInteger(e)?gt.integer:gt.double:(r=gt.double,Number.isNaN(e)||(e=e>0?"INF":"-INF")))),r===""||r===gt.string?new rr(`"${e}"`):new rr(`"${e}"^^${r}`)}function Mn(e){return new Pn(e)}function lo(){return Bt}function Zr(e,t,r,i){return new gr(e,t,r,i)}function tr(e){if(e instanceof Ve)return e;switch(e.termType){case"NamedNode":return On(e.value);case"BlankNode":return Bn(e.value);case"Variable":return Mn(e.value);case"DefaultGraph":return Bt;case"Literal":return Cn(e.value,e.language||e.datatype);case"Quad":return Dn(e);default:throw new Error(`Unexpected termType: ${e.termType}`)}}function Dn(e){if(e instanceof gr)return e;if(e.termType!=="Quad")throw new Error(`Unexpected termType: ${e.termType}`);return Zr(tr(e.subject),tr(e.predicate),tr(e.object),tr(e.graph))}var hn=0,oi=class{constructor(e){this._contextStack=[],this._graph=null,e=e||{},this._setBase(e.baseIRI),e.factory&&Un(this,e.factory);let t=typeof e.format=="string"?e.format.match(/\w*$/)[0].toLowerCase():"",r=/turtle/.test(t),i=/trig/.test(t),n=/triple/.test(t),l=/quad/.test(t),u=this._n3Mode=/n3/.test(t),o=n||l;(this._supportsNamedGraphs=!(r||u))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(r||i||n||u),this._supportsRDFStar=t===""||/star|\*$/.test(t),o&&(this._resolveRelativeIRI=m=>null),this._blankNodePrefix=typeof e.blankNodePrefix!="string"?"":e.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=e.lexer||new Tn({lineMode:o,n3:u}),this._explicitQuantifiers=!!e.explicitQuantifiers}static _resetBlankNodePrefix(){hn=0}_setBase(e){if(!e)this._base="",this._basePath="";else{let t=e.indexOf("#");t>=0&&(e=e.substr(0,t)),this._base=e,this._basePath=e.indexOf("/")<0?e:e.replace(/[^\/?]*(?:\?.*)?$/,""),e=e.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=e[0],this._baseScheme=e[1]}}_saveContext(e,t,r,i,n){let l=this._n3Mode;this._contextStack.push({type:e,subject:r,predicate:i,object:n,graph:t,inverse:l?this._inversePredicate:!1,blankPrefix:l?this._prefixes._:"",quantified:l?this._quantified:null}),l&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.value}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(e,t){let r=this._contextStack.pop();if(!r||r.type!==e)return this._error(`Unexpected ${t.type}`,t);this._subject=r.subject,this._predicate=r.predicate,this._object=r.object,this._graph=r.graph,this._n3Mode&&(this._inversePredicate=r.inverse,this._prefixes._=r.blankPrefix,this._quantified=r.quantified)}_readInTopContext(e){switch(e.type){case"eof":return this._graph!==null?this._error("Unclosed graph",e):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(e)}}_readEntity(e,t){let r;switch(e.type){case"IRI":case"typeIRI":let i=this._resolveIRI(e.value);if(i===null)return this._error("Invalid IRI",e);r=this._factory.namedNode(i);break;case"type":case"prefixed":let n=this._prefixes[e.prefix];if(n===void 0)return this._error(`Undefined prefix "${e.prefix}:"`,e);r=this._factory.namedNode(n+e.value);break;case"blank":r=this._factory.blankNode(this._prefixes[e.prefix]+e.value);break;case"var":r=this._factory.variable(e.value.substr(1));break;default:return this._error(`Expected entity but got ${e.type}`,e)}return!t&&this._n3Mode&&r.id in this._quantified&&(r=this._quantified[r.id]),r}_readSubject(e){switch(this._predicate=null,e.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._factory.blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._factory.blankNode(),null,null),this._readSubject):this._error("Unexpected graph",e);case"}":return this._readPunctuation(e);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier="blankNode",this._readQuantifierList):this._error('Unexpected "@forSome"',e);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier="variable",this._readQuantifierList):this._error('Unexpected "@forAll"',e);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",e);if(e.prefix.length===0)return this._literalValue=e.value,this._completeSubjectLiteral;this._subject=this._factory.literal(e.value,this._factory.namedNode(e.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",e);default:if((this._subject=this._readEntity(e))===void 0)return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(e){let t=e.type;switch(t){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[e.value];break;case".":case"]":case"}":return this._predicate===null?this._error(`Unexpected ${t}`,e):(this._subject=null,t==="]"?this._readBlankNodeTail(e):this._readPunctuation(e));case";":return this._predicate!==null?this._readPredicate:this._error("Expected predicate but got ;",e);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._factory.blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",e);default:if((this._predicate=this._readEntity(e))===void 0)return}return this._readObject}_readObject(e){switch(e.type){case"literal":if(e.prefix.length===0)return this._literalValue=e.value,this._readDataTypeOrLang;this._object=this._factory.literal(e.value,this._factory.namedNode(e.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._factory.blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject):this._error("Unexpected graph",e);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",e);default:if((this._object=this._readEntity(e))===void 0)return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(e){return e.type==="{"?this._readGraph(e):this._readPredicate(e)}_readGraph(e){return e.type!=="{"?this._error(`Expected graph but got ${e.type}`,e):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(e){return e.type==="]"?(this._subject=null,this._readBlankNodeTail(e)):(this._predicate=null,this._readPredicate(e))}_readBlankNodeTail(e){if(e.type!=="]")return this._readBlankNodePunctuation(e);this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph);let t=this._predicate===null;return this._restoreContext("blank",e),this._object!==null?this._getContextEndReader():this._predicate!==null?this._readObject:t?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(e){switch(e.type){case".":case"}":return this._subject=null,this._readPunctuation(e);default:return this._readPredicate(e)}}_readListItem(e){let t=null,r=null,i=this._readListItem,n=this._subject,l=this._contextStack,u=l[l.length-1];switch(e.type){case"[":this._saveContext("blank",this._graph,r=this._factory.blankNode(),this.RDF_FIRST,this._subject=t=this._factory.blankNode()),i=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,r=this._factory.blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",e),l.length!==0&&l[l.length-1].type==="list"&&this._emit(this._subject,this._predicate,this._object,this._graph),this._predicate===null){if(i=this._readPredicate,this._subject===this.RDF_NIL)return i}else if(i=this._getContextEndReader(),this._object===this.RDF_NIL)return i;r=this.RDF_NIL;break;case"literal":e.prefix.length===0?(this._literalValue=e.value,i=this._readListItemDataTypeOrLang):(t=this._factory.literal(e.value,this._factory.namedNode(e.prefix)),i=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject):this._error("Unexpected graph",e);default:if((t=this._readEntity(e))===void 0)return}if(r===null&&(this._subject=r=this._factory.blankNode()),n===null?u.predicate===null?u.subject=r:u.object=r:this._emit(n,this.RDF_REST,r,this._graph),t!==null){if(this._n3Mode&&(e.type==="IRI"||e.type==="prefixed"))return this._saveContext("item",this._graph,r,this.RDF_FIRST,t),this._subject=t,this._predicate=null,this._getPathReader(this._readListItem);this._emit(r,this.RDF_FIRST,t,this._graph)}return i}_readDataTypeOrLang(e){return this._completeObjectLiteral(e,!1)}_readListItemDataTypeOrLang(e){return this._completeObjectLiteral(e,!0)}_completeLiteral(e){let t=this._factory.literal(this._literalValue);switch(e.type){case"type":case"typeIRI":let r=this._readEntity(e);if(r===void 0)return;t=this._factory.literal(this._literalValue,r),e=null;break;case"langcode":t=this._factory.literal(this._literalValue,e.value),e=null;break}return{token:e,literal:t}}_completeSubjectLiteral(e){return this._subject=this._completeLiteral(e).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(e,t){let r=this._completeLiteral(e);if(r)return this._object=r.literal,t&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),r.token===null?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(r.token))}_readFormulaTail(e){return e.type!=="}"?this._readPunctuation(e):(this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",e),this._object===null?this._readPredicate:this._getContextEndReader())}_readPunctuation(e){let t,r=this._graph,i=this._subject,n=this._inversePredicate;switch(e.type){case"}":if(this._graph===null)return this._error("Unexpected graph closing",e);if(this._n3Mode)return this._readFormulaTail(e);this._graph=null;case".":this._subject=null,t=this._contextStack.length?this._readSubject:this._readInTopContext,n&&(this._inversePredicate=!1);break;case";":t=this._readPredicate;break;case",":t=this._readObject;break;case"{|":if(!this._supportsRDFStar)return this._error("Unexpected RDF-star syntax",e);let l=this._predicate,u=this._object;this._subject=this._factory.quad(i,l,u,this.DEFAULTGRAPH),t=this._readPredicate;break;case"|}":if(this._subject.termType!=="Quad")return this._error("Unexpected asserted triple closing",e);this._subject=null,t=this._readPunctuation;break;default:if(this._supportsQuads&&this._graph===null&&(r=this._readEntity(e))!==void 0){t=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}if(i!==null){let l=this._predicate,u=this._object;n?this._emit(u,l,i,r):this._emit(i,l,u,r)}return t}_readBlankNodePunctuation(e){let t;switch(e.type){case";":t=this._readPredicate;break;case",":t=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}return this._emit(this._subject,this._predicate,this._object,this._graph),t}_readQuadPunctuation(e){return e.type!=="."?this._error("Expected dot to follow quad",e):this._readInTopContext}_readPrefix(e){return e.type!=="prefix"?this._error("Expected prefix to follow @prefix",e):(this._prefix=e.value,this._readPrefixIRI)}_readPrefixIRI(e){if(e.type!=="IRI")return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,e);let t=this._readEntity(e);return this._prefixes[this._prefix]=t.value,this._prefixCallback(this._prefix,t),this._readDeclarationPunctuation}_readBaseIRI(e){let t=e.type==="IRI"&&this._resolveIRI(e.value);return t?(this._setBase(t),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",e)}_readNamedGraphLabel(e){switch(e.type){case"IRI":case"blank":case"prefixed":return this._readSubject(e),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",e)}}_readNamedGraphBlankLabel(e){return e.type!=="]"?this._error("Invalid graph label",e):(this._subject=this._factory.blankNode(),this._readGraph)}_readDeclarationPunctuation(e){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(e)):e.type!=="."?this._error("Expected declaration to end with a dot",e):this._readInTopContext}_readQuantifierList(e){let t;switch(e.type){case"IRI":case"prefixed":if((t=this._readEntity(e,!0))!==void 0)break;default:return this._error(`Unexpected ${e.type}`,e)}return this._explicitQuantifiers?(this._subject===null?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,t,this.QUANTIFIERS_GRAPH)):this._quantified[t.id]=this._factory[this._quantifier](this._factory.blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(e){return e.type===","?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(e))}_getPathReader(e){return this._afterPath=e,this._readPath}_readPath(e){switch(e.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:let t=this._contextStack,r=t.length&&t[t.length-1];if(r&&r.type==="item"){let i=this._subject;this._restoreContext("item",e),this._emit(this._subject,this.RDF_FIRST,i,this._graph)}return this._afterPath(e)}}_readForwardPath(e){let t,r,i=this._factory.blankNode();if((r=this._readEntity(e))!==void 0)return this._predicate===null?(t=this._subject,this._subject=i):(t=this._object,this._object=i),this._emit(t,r,i,this._graph),this._readPath}_readBackwardPath(e){let t=this._factory.blankNode(),r,i;if((r=this._readEntity(e))!==void 0)return this._predicate===null?(i=this._subject,this._subject=t):(i=this._object,this._object=t),this._emit(t,r,i,this._graph),this._readPath}_readRDFStarTailOrGraph(e){return e.type!==">>"?this._supportsQuads&&this._graph===null&&(this._graph=this._readEntity(e))!==void 0?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,e):this._readRDFStarTail(e)}_readRDFStarTail(e){if(e.type!==">>")return this._error(`Expected >> but got ${e.type}`,e);let t=this._factory.quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<",e),this._subject===null?(this._subject=t,this._readPredicate):(this._object=t,this._getContextEndReader())}_getContextEndReader(){let e=this._contextStack;if(!e.length)return this._readPunctuation;switch(e[e.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(e,t,r,i){this._callback(null,this._factory.quad(e,t,r,i||this.DEFAULTGRAPH))}_error(e,t){let r=new Error(`${e} on line ${t.line}.`);r.context={token:t,line:t.line,previousToken:this._lexer.previousToken},this._callback(r),this._callback=mr}_resolveIRI(e){return/^[a-z][a-z0-9+.-]*:/i.test(e)?e:this._resolveRelativeIRI(e)}_resolveRelativeIRI(e){if(!e.length)return this._base;switch(e[0]){case"#":return this._base+e;case"?":return this._base.replace(/(?:\?.*)?$/,e);case"/":return(e[1]==="/"?this._baseScheme:this._baseRoot)+this._removeDotSegments(e);default:return/^[^/:]*:/.test(e)?null:this._removeDotSegments(this._basePath+e)}}_removeDotSegments(e){if(!/(^|\/)\.\.?($|[/#?])/.test(e))return e;let t=e.length,r="",i=-1,n=-1,l=0,u="/";for(;i<t;){switch(u){case":":if(n<0&&e[++i]==="/"&&e[++i]==="/")for(;(n=i+1)<t&&e[n]!=="/";)i=n;break;case"?":case"#":i=t;break;case"/":if(e[i+1]===".")switch(u=e[++i+1],u){case"/":r+=e.substring(l,i-1),l=i+1;break;case void 0:case"?":case"#":return r+e.substring(l,i)+e.substr(i+1);case".":if(u=e[++i+1],u===void 0||u==="/"||u==="?"||u==="#"){if(r+=e.substring(l,i-2),(l=r.lastIndexOf("/"))>=n&&(r=r.substr(0,l)),u!=="/")return`${r}/${e.substr(i+1)}`;l=i+1}}}u=e[++i]}return r+e.substring(l)}parse(e,t,r){let i,n,l;if(t&&(t.onQuad||t.onPrefix||t.onComment)?(i=t.onQuad,n=t.onPrefix,l=t.onComment):(i=t,n=r),this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${hn++}_`,this._prefixCallback=n||mr,this._inversePredicate=!1,this._quantified=Object.create(null),!i){let o=[],m;if(this._callback=(d,p)=>{d?m=d:p&&o.push(p)},this._lexer.tokenize(e).every(d=>this._readCallback=this._readCallback(d)),m)throw m;return o}let u=(o,m)=>{o!==null?(this._callback(o),this._callback=mr):this._readCallback&&(this._readCallback=this._readCallback(m))};l&&(this._lexer.comments=!0,u=(o,m)=>{o!==null?(this._callback(o),this._callback=mr):this._readCallback&&(m.type==="comment"?l(m.value):this._readCallback=this._readCallback(m))}),this._callback=i,this._lexer.tokenize(e,u)}};function mr(){}function Un(e,t){e._factory=t,e.DEFAULTGRAPH=t.defaultGraph(),e.RDF_FIRST=t.namedNode(Ue.rdf.first),e.RDF_REST=t.namedNode(Ue.rdf.rest),e.RDF_NIL=t.namedNode(Ue.rdf.nil),e.N3_FORALL=t.namedNode(Ue.r.forAll),e.N3_FORSOME=t.namedNode(Ue.r.forSome),e.ABBREVIATIONS={a:t.namedNode(Ue.rdf.type),"=":t.namedNode(Ue.owl.sameAs),">":t.namedNode(Ue.log.implies)},e.QUANTIFIERS_GRAPH=t.namedNode("urn:n3:quantifiers")}Un(oi.prototype,lt);var $n={};$s($n,{inDefaultGraph:()=>po,isBlankNode:()=>co,isDefaultGraph:()=>sr,isLiteral:()=>fo,isNamedNode:()=>uo,isVariable:()=>ho,prefix:()=>_o,prefixes:()=>Fn});function uo(e){return!!e&&e.termType==="NamedNode"}function co(e){return!!e&&e.termType==="BlankNode"}function fo(e){return!!e&&e.termType==="Literal"}function ho(e){return!!e&&e.termType==="Variable"}function sr(e){return!!e&&e.termType==="DefaultGraph"}function po(e){return sr(e.graph)}function _o(e,t){return Fn({"":e.value||e},t)("")}function Fn(e,t){let r=Object.create(null);for(let n in e)i(n,e[n]);t=t||lt;function i(n,l){if(typeof l=="string"){let u=Object.create(null);r[n]=o=>u[o]||(u[o]=t.namedNode(l+o))}else if(!(n in r))throw new Error(`Unknown prefix: ${n}`);return r[n]}return i}var Xt=lt.defaultGraph(),{rdf:bo,xsd:Nt}=Ue,pn=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,_n=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,mo={"\\":"\\\\",'"':'\\"',"	":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"},er=class extends Ve{equals(e){return e===this}},Er=class{constructor(e,t){if(this._prefixRegex=/$0^/,e&&typeof e.write!="function"&&(t=e,e=null),t=t||{},this._lists=t.lists,e)this._outputStream=e,this._endStream=t.end===void 0?!0:!!t.end;else{let r="";this._outputStream={write(i,n,l){r+=i,l&&l()},end:i=>{i&&i(null,r)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(t.format)?(this._lineMode=!0,this._writeQuad=this._writeQuadLine):(this._lineMode=!1,this._graph=Xt,this._prefixIRIs=Object.create(null),t.prefixes&&this.addPrefixes(t.prefixes),t.baseIRI&&(this._baseMatcher=new RegExp(`^${mn(t.baseIRI)}${t.baseIRI.endsWith("/")?"":"[#?]"}`),this._baseLength=t.baseIRI.length))}get _inDefaultGraph(){return Xt.equals(this._graph)}_write(e,t){this._outputStream.write(e,"utf8",t)}_writeQuad(e,t,r,i,n){try{i.equals(this._graph)||(this._write((this._subject===null?"":this._inDefaultGraph?`.
`:`
}
`)+(Xt.equals(i)?"":`${this._encodeIriOrBlank(i)} {
`)),this._graph=i,this._subject=null),e.equals(this._subject)?t.equals(this._predicate)?this._write(`, ${this._encodeObject(r)}`,n):this._write(`;
    ${this._encodePredicate(this._predicate=t)} ${this._encodeObject(r)}`,n):this._write(`${(this._subject===null?"":`.
`)+this._encodeSubject(this._subject=e)} ${this._encodePredicate(this._predicate=t)} ${this._encodeObject(r)}`,n)}catch(l){n&&n(l)}}_writeQuadLine(e,t,r,i,n){delete this._prefixMatch,this._write(this.quadToString(e,t,r,i),n)}quadToString(e,t,r,i){return`${this._encodeSubject(e)} ${this._encodeIriOrBlank(t)} ${this._encodeObject(r)}${i&&i.value?` ${this._encodeIriOrBlank(i)} .
`:` .
`}`}quadsToString(e){let t="";for(let r of e)t+=this.quadToString(r.subject,r.predicate,r.object,r.graph);return t}_encodeSubject(e){return e.termType==="Quad"?this._encodeQuad(e):this._encodeIriOrBlank(e)}_encodeIriOrBlank(e){if(e.termType!=="NamedNode")return this._lists&&e.value in this._lists&&(e=this.list(this._lists[e.value])),"id"in e?e.id:`_:${e.value}`;let t=e.value;this._baseMatcher&&this._baseMatcher.test(t)&&(t=t.substr(this._baseLength)),pn.test(t)&&(t=t.replace(_n,bn));let r=this._prefixRegex.exec(t);return r?r[1]?this._prefixIRIs[r[1]]+r[2]:t:`<${t}>`}_encodeLiteral(e){let t=e.value;if(pn.test(t)&&(t=t.replace(_n,bn)),e.language)return`"${t}"@${e.language}`;if(this._lineMode){if(e.datatype.value===Nt.string)return`"${t}"`}else switch(e.datatype.value){case Nt.string:return`"${t}"`;case Nt.boolean:if(t==="true"||t==="false")return t;break;case Nt.integer:if(/^[+-]?\d+$/.test(t))return t;break;case Nt.decimal:if(/^[+-]?\d*\.\d+$/.test(t))return t;break;case Nt.double:if(/^[+-]?(?:\d+\.\d*|\.?\d+)[eE][+-]?\d+$/.test(t))return t;break}return`"${t}"^^${this._encodeIriOrBlank(e.datatype)}`}_encodePredicate(e){return e.value===bo.type?"a":this._encodeIriOrBlank(e)}_encodeObject(e){switch(e.termType){case"Quad":return this._encodeQuad(e);case"Literal":return this._encodeLiteral(e);default:return this._encodeIriOrBlank(e)}}_encodeQuad({subject:e,predicate:t,object:r,graph:i}){return`<<${this._encodeSubject(e)} ${this._encodePredicate(t)} ${this._encodeObject(r)}${sr(i)?"":` ${this._encodeIriOrBlank(i)}`}>>`}_blockedWrite(){throw new Error("Cannot write because the writer has been closed.")}addQuad(e,t,r,i,n){r===void 0?this._writeQuad(e.subject,e.predicate,e.object,e.graph,t):typeof i=="function"?this._writeQuad(e,t,r,Xt,i):this._writeQuad(e,t,r,i||Xt,n)}addQuads(e){for(let t=0;t<e.length;t++)this.addQuad(e[t])}addPrefix(e,t,r){let i={};i[e]=t,this.addPrefixes(i,r)}addPrefixes(e,t){if(!this._prefixIRIs)return t&&t();let r=!1;for(let i in e){let n=e[i];typeof n!="string"&&(n=n.value),r=!0,this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null,this._graph=""),this._prefixIRIs[n]=i+=":",this._write(`@prefix ${i} <${n}>.
`)}if(r){let i="",n="";for(let l in this._prefixIRIs)i+=i?`|${l}`:l,n+=(n?"|":"")+this._prefixIRIs[l];i=mn(i,/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&"),this._prefixRegex=new RegExp(`^(?:${n})[^/]*$|^(${i})([_a-zA-Z0-9][\\-_a-zA-Z0-9]*)$`)}this._write(r?`
`:"",t)}blank(e,t){let r=e,i,n;switch(e===void 0?r=[]:e.termType?r=[{predicate:e,object:t}]:"length"in e||(r=[e]),n=r.length){case 0:return new er("[]");case 1:if(i=r[0],!(i.object instanceof er))return new er(`[ ${this._encodePredicate(i.predicate)} ${this._encodeObject(i.object)} ]`);default:let l="[";for(let u=0;u<n;u++)i=r[u],i.predicate.equals(e)?l+=`, ${this._encodeObject(i.object)}`:(l+=`${(u?`;
  `:`
  `)+this._encodePredicate(i.predicate)} ${this._encodeObject(i.object)}`,e=i.predicate);return new er(`${l}
]`)}}list(e){let t=e&&e.length||0,r=new Array(t);for(let i=0;i<t;i++)r[i]=this._encodeObject(e[i]);return new er(`(${r.join(" ")})`)}end(e){this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null),this._write=this._blockedWrite;let t=e&&((r,i)=>{t=null,e(r,i)});if(this._endStream)try{return this._outputStream.end(t)}catch{}t&&t()}};function bn(e){let t=mo[e];return t===void 0&&(e.length===1?(t=e.charCodeAt(0).toString(16),t="\\u0000".substr(0,6-t.length)+t):(t=((e.charCodeAt(0)-55296)*1024+e.charCodeAt(1)+9216).toString(16),t="\\U00000000".substr(0,10-t.length)+t)),t}function mn(e){return e.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&")}var Wn=or(ni()),Kr=Symbol("iter");function ir(e,t,r=4){if(r===0)return Object.assign(e,t);for(let i in t)e[i]=ir(e[i]||Object.create(null),t[i],r-1);return e}function zn(e,t,r=4){let i=!1;for(let n in e)if(n in t){let l=r===0?null:zn(e[n],t[n],r-1);if(l!==!1)i=i||Object.create(null),i[n]=l;else if(r===3)return!1}return i}function qn(e,t,r=4){let i=!1;for(let n in e)if(!(n in t))i=i||Object.create(null),i[n]=r===0?null:ir({},e[n],r-1);else if(r!==0){let l=qn(e[n],t[n],r-1);if(l!==!1)i=i||Object.create(null),i[n]=l;else if(r===3)return!1}return i}var Gn=class{constructor(e={}){this._id=1,this._ids=Object.create(null),this._ids[""]=1,this._entities=Object.create(null),this._entities[1]="",this._blankNodeIndex=0,this._factory=e.factory||lt}_termFromId(e){if(e[0]==="."){let t=this._entities,r=e.split(".");return this._factory.quad(this._termFromId(t[r[1]]),this._termFromId(t[r[2]]),this._termFromId(t[r[3]]),r[4]&&this._termFromId(t[r[4]]))}return Lt(e,this._factory)}_termToNumericId(e){if(e.termType==="Quad"){let t=this._termToNumericId(e.subject),r=this._termToNumericId(e.predicate),i=this._termToNumericId(e.object),n;return t&&r&&i&&(sr(e.graph)||(n=this._termToNumericId(e.graph)))&&this._ids[n?`.${t}.${r}.${i}.${n}`:`.${t}.${r}.${i}`]}return this._ids[wt(e)]}_termToNewNumericId(e){let t=e&&e.termType==="Quad"?`.${this._termToNewNumericId(e.subject)}.${this._termToNewNumericId(e.predicate)}.${this._termToNewNumericId(e.object)}${sr(e.graph)?"":`.${this._termToNewNumericId(e.graph)}`}`:wt(e);return this._ids[t]||(this._ids[this._entities[++this._id]=t]=this._id)}createBlankNode(e){let t,r;if(e)for(t=e=`_:${e}`,r=1;this._ids[t];)t=e+r++;else do t=`_:b${this._blankNodeIndex++}`;while(this._ids[t]);return this._ids[t]=++this._id,this._entities[this._id]=t,this._factory.blankNode(t.substr(2))}},ai=class qe{constructor(t,r){this._size=0,this._graphs=Object.create(null),!r&&t&&!t[0]&&(r=t,t=null),r=r||{},this._factory=r.factory||lt,this._entityIndex=r.entityIndex||new Gn({factory:this._factory}),this._entities=this._entityIndex._entities,this._termFromId=this._entityIndex._termFromId.bind(this._entityIndex),this._termToNumericId=this._entityIndex._termToNumericId.bind(this._entityIndex),this._termToNewNumericId=this._entityIndex._termToNewNumericId.bind(this._entityIndex),t&&this.addQuads(t)}get size(){let t=this._size;if(t!==null)return t;t=0;let r=this._graphs,i,n;for(let l in r)for(let u in i=r[l].subjects)for(let o in n=i[u])t+=Object.keys(n[o]).length;return this._size=t}_addToIndex(t,r,i,n){let l=t[r]||(t[r]={}),u=l[i]||(l[i]={}),o=n in u;return o||(u[n]=null),!o}_removeFromIndex(t,r,i,n){let l=t[r],u=l[i];delete u[n];for(let o in u)return;delete l[i];for(let o in l)return;delete t[r]}*_findInIndex(t,r,i,n,l,u,o,m){let d,p,_,y=this._entities,S=this._termFromId(y[m]),R={subject:null,predicate:null,object:null};r&&((d=t,t={})[r]=d[r]);for(let M in t)if(p=t[M]){R[l]=this._termFromId(y[M]),i&&((d=p,p={})[i]=d[i]);for(let N in p)if(_=p[N]){R[u]=this._termFromId(y[N]);let P=n?n in _?[n]:[]:Object.keys(_);for(let f=0;f<P.length;f++)R[o]=this._termFromId(y[P[f]]),yield this._factory.quad(R.subject,R.predicate,R.object,S)}}}_loop(t,r){for(let i in t)r(i)}_loopByKey0(t,r,i){let n,l;if(n=t[r])for(l in n)i(l)}_loopByKey1(t,r,i){let n,l;for(n in t)l=t[n],l[r]&&i(n)}_loopBy2Keys(t,r,i,n){let l,u,o;if((l=t[r])&&(u=l[i]))for(o in u)n(o)}_countInIndex(t,r,i,n){let l=0,u,o,m;r&&((u=t,t={})[r]=u[r]);for(let d in t)if(o=t[d]){i&&((u=o,o={})[i]=u[i]);for(let p in o)(m=o[p])&&(n?n in m&&l++:l+=Object.keys(m).length)}return l}_getGraphs(t){return t=t===""?1:t&&(this._termToNumericId(t)||-1),typeof t!="number"?this._graphs:{[t]:this._graphs[t]}}_uniqueEntities(t){let r=Object.create(null);return i=>{i in r||(r[i]=!0,t(this._termFromId(this._entities[i],this._factory)))}}add(t){return this.addQuad(t),this}addQuad(t,r,i,n){r||(n=t.graph,i=t.object,r=t.predicate,t=t.subject),n=n?this._termToNewNumericId(n):1;let l=this._graphs[n];return l||(l=this._graphs[n]={subjects:{},predicates:{},objects:{}},Object.freeze(l)),t=this._termToNewNumericId(t),r=this._termToNewNumericId(r),i=this._termToNewNumericId(i),this._addToIndex(l.subjects,t,r,i)?(this._addToIndex(l.predicates,r,i,t),this._addToIndex(l.objects,i,t,r),this._size=null,!0):!1}addQuads(t){for(let r=0;r<t.length;r++)this.addQuad(t[r])}delete(t){return this.removeQuad(t),this}has(t,r,i,n){return t&&t.subject&&({subject:t,predicate:r,object:i,graph:n}=t),!this.readQuads(t,r,i,n).next().done}import(t){return t.on("data",r=>{this.addQuad(r)}),t}removeQuad(t,r,i,n){r||({subject:t,predicate:r,object:i,graph:n}=t),n=n?this._termToNumericId(n):1;let l=this._graphs,u,o,m;if(!(t=t&&this._termToNumericId(t))||!(r=r&&this._termToNumericId(r))||!(i=i&&this._termToNumericId(i))||!(u=l[n])||!(o=u.subjects[t])||!(m=o[r])||!(i in m))return!1;this._removeFromIndex(u.subjects,t,r,i),this._removeFromIndex(u.predicates,r,i,t),this._removeFromIndex(u.objects,i,t,r),this._size!==null&&this._size--;for(t in u.subjects)return!0;return delete l[n],!0}removeQuads(t){for(let r=0;r<t.length;r++)this.removeQuad(t[r])}remove(t){return t.on("data",r=>{this.removeQuad(r)}),t}removeMatches(t,r,i,n){let l=new Wn.Readable({objectMode:!0}),u=this.readQuads(t,r,i,n);return l._read=o=>{for(;--o>=0;){let{done:m,value:d}=u.next();if(m){l.push(null);return}l.push(d)}},this.remove(l)}deleteGraph(t){return this.removeMatches(null,null,null,t)}getQuads(t,r,i,n){return[...this.readQuads(t,r,i,n)]}*readQuads(t,r,i,n){let l=this._getGraphs(n),u,o,m,d;if(!(t&&!(o=this._termToNumericId(t))||r&&!(m=this._termToNumericId(r))||i&&!(d=this._termToNumericId(i))))for(let p in l)(u=l[p])&&(o?d?yield*this._findInIndex(u.objects,d,o,m,"object","subject","predicate",p):yield*this._findInIndex(u.subjects,o,m,null,"subject","predicate","object",p):m?yield*this._findInIndex(u.predicates,m,d,null,"predicate","object","subject",p):d?yield*this._findInIndex(u.objects,d,null,null,"object","subject","predicate",p):yield*this._findInIndex(u.subjects,null,null,null,"subject","predicate","object",p))}match(t,r,i,n){return new Pt(this,t,r,i,n,{entityIndex:this._entityIndex})}countQuads(t,r,i,n){let l=this._getGraphs(n),u=0,o,m,d,p;if(t&&!(m=this._termToNumericId(t))||r&&!(d=this._termToNumericId(r))||i&&!(p=this._termToNumericId(i)))return 0;for(let _ in l)(o=l[_])&&(t?i?u+=this._countInIndex(o.objects,p,m,d):u+=this._countInIndex(o.subjects,m,d,p):r?u+=this._countInIndex(o.predicates,d,p,m):u+=this._countInIndex(o.objects,p,m,d));return u}forEach(t,r,i,n,l){this.some(u=>(t(u,this),!1),r,i,n,l)}every(t,r,i,n,l){return!this.some(u=>!t(u,this),r,i,n,l)}some(t,r,i,n,l){for(let u of this.readQuads(r,i,n,l))if(t(u))return!0;return!1}getSubjects(t,r,i){let n=[];return this.forSubjects(l=>{n.push(l)},t,r,i),n}forSubjects(t,r,i,n){let l=this._getGraphs(n),u,o,m;if(t=this._uniqueEntities(t),!(r&&!(o=this._termToNumericId(r))||i&&!(m=this._termToNumericId(i))))for(n in l)(u=l[n])&&(o?m?this._loopBy2Keys(u.predicates,o,m,t):this._loopByKey1(u.subjects,o,t):m?this._loopByKey0(u.objects,m,t):this._loop(u.subjects,t))}getPredicates(t,r,i){let n=[];return this.forPredicates(l=>{n.push(l)},t,r,i),n}forPredicates(t,r,i,n){let l=this._getGraphs(n),u,o,m;if(t=this._uniqueEntities(t),!(r&&!(o=this._termToNumericId(r))||i&&!(m=this._termToNumericId(i))))for(n in l)(u=l[n])&&(o?m?this._loopBy2Keys(u.objects,m,o,t):this._loopByKey0(u.subjects,o,t):m?this._loopByKey1(u.predicates,m,t):this._loop(u.predicates,t))}getObjects(t,r,i){let n=[];return this.forObjects(l=>{n.push(l)},t,r,i),n}forObjects(t,r,i,n){let l=this._getGraphs(n),u,o,m;if(t=this._uniqueEntities(t),!(r&&!(o=this._termToNumericId(r))||i&&!(m=this._termToNumericId(i))))for(n in l)(u=l[n])&&(o?m?this._loopBy2Keys(u.subjects,o,m,t):this._loopByKey1(u.objects,o,t):m?this._loopByKey0(u.predicates,m,t):this._loop(u.objects,t))}getGraphs(t,r,i){let n=[];return this.forGraphs(l=>{n.push(l)},t,r,i),n}forGraphs(t,r,i,n){for(let l in this._graphs)this.some(u=>(t(u.graph),!0),r,i,n,this._termFromId(this._entities[l]))}createBlankNode(t){return this._entityIndex.createBlankNode(t)}extractLists({remove:t=!1,ignoreErrors:r=!1}={}){let i={},n=r?()=>!0:(o,m)=>{throw new Error(`${o.value} ${m}`)},l=this.getQuads(null,Ue.rdf.rest,Ue.rdf.nil,null),u=t?[...l]:[];return l.forEach(o=>{let m=[],d=!1,p,_,y=o.graph,S=o.subject;for(;S&&!d;){let R=this.getQuads(null,null,S,null),M=this.getQuads(S,null,null,null),N,P=null,f=null,v=null;for(let x=0;x<M.length&&!d;x++)N=M[x],N.graph.equals(y)?p?d=n(S,"has non-list arcs out"):N.predicate.value===Ue.rdf.first?P?d=n(S,"has multiple rdf:first arcs"):u.push(P=N):N.predicate.value===Ue.rdf.rest?f?d=n(S,"has multiple rdf:rest arcs"):u.push(f=N):R.length?d=n(S,"can't be subject and object"):(p=N,_="subject"):d=n(S,"not confined to single graph");for(let x=0;x<R.length&&!d;++x)N=R[x],p?d=n(S,"can't have coreferences"):N.predicate.value===Ue.rdf.rest?v?d=n(S,"has incoming rdf:rest arcs"):v=N:(p=N,_="object");P?m.unshift(P.object):d=n(S,"has no list head"),S=v&&v.subject}d?t=!1:p&&(i[p[_].value]=m)}),t&&this.removeQuads(u),i}addAll(t){if(t instanceof Pt&&(t=t.filtered),Array.isArray(t))this.addQuads(t);else if(t instanceof qe&&t._entityIndex===this._entityIndex)t._size!==0&&(this._graphs=ir(this._graphs,t._graphs),this._size=null);else for(let r of t)this.add(r);return this}contains(t){if(t instanceof Pt&&(t=t.filtered),t===this)return!0;if(!(t instanceof qe)||this._entityIndex!==t._entityIndex)return t.every(d=>this.has(d));let r=this._graphs,i=t._graphs,n,l,u,o,m;for(let d in i){if(!(n=r[d]))return!1;n=n.subjects;for(let p in l=i[d].subjects){if(!(u=n[p]))return!1;for(let _ in o=l[p]){if(!(m=u[_]))return!1;for(let y in o[_])if(!(y in m))return!1}}}return!0}deleteMatches(t,r,i,n){for(let l of this.match(t,r,i,n))this.removeQuad(l);return this}difference(t){if(t&&t instanceof Pt&&(t=t.filtered),t===this)return new qe({entityIndex:this._entityIndex});if(t instanceof qe&&t._entityIndex===this._entityIndex){let r=new qe({entityIndex:this._entityIndex}),i=qn(this._graphs,t._graphs);return i&&(r._graphs=i,r._size=null),r}return this.filter(r=>!t.has(r))}equals(t){return t instanceof Pt&&(t=t.filtered),t===this||this.size===t.size&&this.contains(t)}filter(t){let r=new qe({entityIndex:this._entityIndex});for(let i of this)t(i,this)&&r.add(i);return r}intersection(t){if(t instanceof Pt&&(t=t.filtered),t===this){let r=new qe({entityIndex:this._entityIndex});return r._graphs=ir(Object.create(null),this._graphs),r._size=this._size,r}else if(t instanceof qe&&this._entityIndex===t._entityIndex){let r=new qe({entityIndex:this._entityIndex}),i=zn(t._graphs,this._graphs);return i&&(r._graphs=i,r._size=null),r}return this.filter(r=>t.has(r))}map(t){let r=new qe({entityIndex:this._entityIndex});for(let i of this)r.add(t(i,this));return r}reduce(t,r){let i=this.readQuads(),n=r===void 0?i.next().value:r;for(let l of i)n=t(n,l,this);return n}toArray(){return this.getQuads()}toCanonical(){throw new Error("not implemented")}toStream(){return this.match()}toString(){return new Er().quadsToString(this)}union(t){let r=new qe({entityIndex:this._entityIndex});return r._graphs=ir(Object.create(null),this._graphs),r._size=this._size,r.addAll(t),r}*[Symbol.iterator](){yield*this.readQuads()}};function Qe(e,t,r=0){let i=t[r];if(i&&!(i in e))return!1;let n=!1;for(let l in i?{[i]:e[i]}:e){let u=r===2?null:Qe(e[l],t,r+1);u!==!1&&(n=n||Object.create(null),n[l]=u)}return n}var Pt=class Hn extends Wn.Readable{constructor(t,r,i,n,l,u){super({objectMode:!0}),Object.assign(this,{n3Store:t,subject:r,predicate:i,object:n,graph:l,options:u})}get filtered(){if(!this._filtered){let{n3Store:t,graph:r,object:i,predicate:n,subject:l}=this,u=this._filtered=new ai({factory:t._factory,entityIndex:this.options.entityIndex}),o,m,d;if(l&&!(o=u._termToNumericId(l))||n&&!(m=u._termToNumericId(n))||i&&!(d=u._termToNumericId(i)))return u;let p=t._getGraphs(r);for(let _ in p){let y,S,R;!o&&m?(S=Qe(p[_].predicates,[m,d,o]))&&(y=Qe(p[_].subjects,[o,m,d]),R=Qe(p[_].objects,[d,o,m])):d?(R=Qe(p[_].objects,[d,o,m]))&&(y=Qe(p[_].subjects,[o,m,d]),S=Qe(p[_].predicates,[m,d,o])):(y=Qe(p[_].subjects,[o,m,d]))&&(S=Qe(p[_].predicates,[m,d,o]),R=Qe(p[_].objects,[d,o,m])),y&&(u._graphs[_]={subjects:y,predicates:S,objects:R})}u._size=null}return this._filtered}get size(){return this.filtered.size}_read(t){t>0&&!this[Kr]&&(this[Kr]=this[Symbol.iterator]());let r=this[Kr];for(;--t>=0;){let{done:i,value:n}=r.next();if(i){this.push(null);return}this.push(n)}}addAll(t){return this.filtered.addAll(t)}contains(t){return this.filtered.contains(t)}deleteMatches(t,r,i,n){return this.filtered.deleteMatches(t,r,i,n)}difference(t){return this.filtered.difference(t)}equals(t){return this.filtered.equals(t)}every(t,r,i,n,l){return this.filtered.every(t,r,i,n,l)}filter(t){return this.filtered.filter(t)}forEach(t,r,i,n,l){return this.filtered.forEach(t,r,i,n,l)}import(t){return this.filtered.import(t)}intersection(t){return this.filtered.intersection(t)}map(t){return this.filtered.map(t)}some(t,r,i,n,l){return this.filtered.some(t,r,i,n,l)}toCanonical(){return this.filtered.toCanonical()}toStream(){return this._filtered?this._filtered.toStream():this.n3Store.match(this.subject,this.predicate,this.object,this.graph)}union(t){return this._filtered?this._filtered.union(t):this.n3Store.match(this.subject,this.predicate,this.object,this.graph).addAll(t)}toArray(){return this._filtered?this._filtered.toArray():this.n3Store.getQuads(this.subject,this.predicate,this.object,this.graph)}reduce(t,r){return this.filtered.reduce(t,r)}toString(){return new Er().quadsToString(this)}add(t){return this.filtered.add(t)}delete(t){return this.filtered.delete(t)}has(t){return this.filtered.has(t)}match(t,r,i,n){return new Hn(this.filtered,t,r,i,n,this.options)}*[Symbol.iterator](){yield*this._filtered||this.n3Store.readQuads(this.subject,this.predicate,this.object,this.graph)}},yo=class{dataset(e){return new ai(e)}};function go(e){let t=[];for(let{subject:r,object:i}of e.match(null,lt.namedNode("http://www.w3.org/2000/10/swap/log#implies"),null,lt.defaultGraph())){let n=[...e.match(null,null,null,r)],l=[...e.match(null,null,null,i)];t.push({premise:n,conclusion:l})}return t}var wo=class{constructor(e){this._store=e}_add(e,t,r,i,n){this._store._addToIndex(i.subjects,e,t,r)&&(this._store._addToIndex(i.predicates,t,r,e),this._store._addToIndex(i.objects,r,e,t),n())}_evaluatePremise(e,t,r,i=0){let n,l,u,o,m,[d,p,_]=e.premise[i].value,y=t[e.premise[i].content],S=!(u=d.value);for(u in S?y:{[u]:y[u]})if(o=y[u]){S&&(d.value=Number(u)),n=!(u=p.value);for(u in n?o:{[u]:o[u]})if(m=o[u]){n&&(p.value=Number(u)),l=!(u=_.value);for(u in l?m:{[u]:m[u]})l&&(_.value=Number(u)),i===e.premise.length-1?e.conclusion.forEach(R=>{this._add(R.subject.value,R.predicate.value,R.object.value,t,()=>{r(R)})}):this._evaluatePremise(e,t,r,i+1);l&&(_.value=null)}n&&(p.value=null)}S&&(d.value=null)}_evaluateRules(e,t,r){for(let i=0;i<e.length;i++)this._evaluatePremise(e[i],t,r)}_reasonGraphNaive(e,t){let r=[];function i(u){u.next&&u.next.forEach(o=>{r.push([u.subject.value,u.predicate.value,u.object.value,o])})}let n=u=>{u.forEach(o=>{this._add(o.subject.value,o.predicate.value,o.object.value,t,()=>{i(o)})})};this._evaluateRules(e,t,i);let l;for(;(l=r.pop())!==void 0;){let[u,o,m,d]=l,p=d.basePremise.subject.value;p||(d.basePremise.subject.value=u);let _=d.basePremise.predicate.value;_||(d.basePremise.predicate.value=o);let y=d.basePremise.object.value;y||(d.basePremise.object.value=m),d.premise.length===0?n(d.conclusion):this._evaluatePremise(d,t,i),p||(d.basePremise.subject.value=null),_||(d.basePremise.predicate.value=null),y||(d.basePremise.object.value=null)}}_createRule({premise:e,conclusion:t}){let r={},i=l=>l.termType==="Variable"?r[l.value]=r[l.value]||{}:{value:this._store._termToNewNumericId(l)},n=l=>({subject:i(l.subject),predicate:i(l.predicate),object:i(l.object)});return{premise:e.map(l=>n(l)),conclusion:t.map(l=>n(l)),variables:Object.values(r)}}reason(e){Array.isArray(e)||(e=go(e)),e=e.map(r=>this._createRule(r));for(let r of e)for(let i of e)for(let n=0;n<i.premise.length;n++){let l=i.premise[n];for(let u of r.conclusion){if(Qr(l.subject,u.subject)&&Qr(l.predicate,u.predicate)&&Qr(l.object,u.object)){let o=new Set,m=[];l.subject.value=l.subject.value||1,l.object.value=l.object.value||1,l.predicate.value=l.predicate.value||1;for(let d=0;d<i.premise.length;d++)d!==n&&m.push(yn(i.premise[d],o));(u.next=u.next||[]).push({premise:m,conclusion:i.conclusion,basePremise:l})}i.variables.forEach(o=>{o.value=null})}}for(let r of e){let i=new Set;r.premise=r.premise.map(n=>yn(n,i))}let t=this._store._getGraphs();for(let r in t)this._reasonGraphNaive(e,t[r]);this._store._size=null}};function yn({subject:e,predicate:t,object:r},i){let n=e.value||i.has(e)||(i.add(e),!1),l=t.value||i.has(t)||(i.add(t),!1),u=r.value||i.has(r)||(i.add(r),!1);return!n&&l?{content:"predicates",value:[t,r,e]}:u?{content:"objects",value:[r,e,t]}:{content:"subjects",value:[e,t,r]}}function Qr(e,t){return e.value===null&&(e.value=t.value),e.value===t.value}var vo=or(ni()),So=class extends vo.Transform{constructor(e){super({decodeStrings:!0}),this._readableState.objectMode=!0;let t=new oi(e),r,i,n={onQuad:(l,u)=>{l&&this.emit("error",l)||u&&this.push(u)},onPrefix:(l,u)=>{this.emit("prefix",l,u)}};e&&e.comments&&(n.onComment=l=>{this.emit("comment",l)}),t.parse({on:(l,u)=>{switch(l){case"data":r=u;break;case"end":i=u;break}}},n),this._transform=(l,u,o)=>{r(l),o()},this._flush=l=>{i(),l()}}import(e){return e.on("data",t=>{this.write(t)}),e.on("end",()=>{this.end()}),e.on("error",t=>{this.emit("error",t)}),this}},xo=or(ni()),Eo=class extends xo.Transform{constructor(e){super({encoding:"utf8",writableObjectMode:!0});let t=this._writer=new Er({write:(r,i,n)=>{this.push(r),n&&n()},end:r=>{this.push(null),r&&r()}},e);this._transform=(r,i,n)=>{t.addQuad(r,n)},this._flush=r=>{t.end(r)}}import(e){return e.on("data",t=>{this.write(t)}),e.on("end",()=>{this.end()}),e.on("error",t=>{this.emit("error",t)}),e.on("prefix",(t,r)=>{this._writer.addPrefix(t,r)}),this}},Xr={Lexer:Tn,Parser:oi,Writer:Er,Store:ai,StoreFactory:yo,EntityIndex:Gn,StreamParser:So,StreamWriter:Eo,Util:$n,Reasoner:wo,DataFactory:lt,Term:Ve,NamedNode:si,Literal:rr,BlankNode:Nn,Variable:Pn,DefaultGraph:Ln,Quad:gr,Triple:gr,termFromId:Lt,termToId:wt},Ro=(e,t,r)=>{let i=new Xr.Parser({blankNodePrefix:"",format:r}),n=Object.create(null);return{quads:i.parse(e,null,(u,o)=>{n[u]=o.id}),prefixes:n}},Ao=e=>new Promise((t,r)=>{let i=new Xr.Writer({format:e.type,prefixes:{...e.prefixes}}),n=e.context.prefixes.rdf,l=e.prefixes.xsd,{quad:u,namedNode:o,literal:m,blankNode:d}=Xr.DataFactory,p=(f,v)=>{let x=v.a;if(Array.isArray(x)||(x=[x]),x?.length)for(let A of x)A=e.fullURI(A),i.addQuad(u(o(f),o(In),o(A)))},_=(f,v)=>{if(!v)return;let x=y(v);for(let A of x){Array.isArray(A.object)||(A.object=[A.object]);for(let T of A.object)i.addQuad(u(o(f),A.predicate,T))}},y=f=>{let v=[];return Object.entries(f).forEach(x=>{let A=x[0],T=x[1],L=e.fullURI(A),z={predicate:o(L)};T instanceof Jr?z.object=M(T):Array.isArray(T)?z.object=P(T):T instanceof Vr?z.object=o(T.id):T instanceof yr?z.object=N(T):R(T)?z.object=S(T):console.log("weird object",T,id,A),v.push(z)}),v},S=f=>{let v=e.getType(f)||null;if(v)v==l+e.context.separator+"string"||v==l+e.context.separator+"number"?v=null:v=e.fullURI(v),v=o(v);else{let x=f?.language;x&&(v=x)}return f instanceof String?f=""+f:f instanceof Number&&(f=+f),m(f,v)},R=f=>f instanceof String||f instanceof Number||typeof f=="boolean"||typeof f=="string"||typeof f=="number",M=f=>{let v=[];for(let x of f)R(x)?v.push(S(x)):x.id?v.push(o(x.id)):v.push(N(x));return i.list(v)},N=f=>i.blank(y(f)),P=(f,v)=>{let x=[];for(let A of v)R(A)?x.push(S(A)):A instanceof Vr?x.push(o(A.id)):A instanceof yr?x.push(N(A)):A instanceof Jr&&x.push(M(A));return x};Object.entries(e.subjects).forEach(([f,v])=>{f=e.shortURI(f,":"),p(f,v),_(f,v)}),i.end((f,v)=>{v?t(v):r(f)})}),St=Js;St.n3Parser=Ro;St.n3Writer=Ao;window.oldm=St;function Io(e,t){let r=it({mode:"cors",headers:{Accept:"application/*"}});if(e&&e.username&&e.password)r=r.with({headers:{Authorization:"Basic "+btoa(e.username+":"+e.password)}});else if(e&&e.oidcIssuer){let i={authorize_callback:globalThis.metro.oauth2.authorizePopup,force_authorization:e.force_authorization||!1,client_info:{client_name:"Zett",redirect_uris:[e.redirect_uri]},issuer:e.oidcIssuer};r=r.with(fn(i))}return r.with(Ze()).with(To(t))}function To(e){return async(t,r)=>{t.data&&t.data.write&&(t=t.with({headers:{"Content-Type":t.data.type},body:await t.data.write()}));let i=await r(t);if(i.ok&&!i.data){let n=await rt.context.parse(await i.text(),i.url);i=i.with({body:n})}return i}}var rt={prefixes:{solid:"http://www.w3.org/ns/solid/terms#",pim:"http://www.w3.org/ns/pim/space#"},fetch:async function(e,t=null){let r=Ge(e).with({hash:""});return Io(t,rt.prefixes).get(r)},getIssuer:async function(e){return(await rt.fetch(e)).data.primary["solid:oidcIssuer"]},getStorageUrls:async function(e){return(await rt.fetch(e)).data.primary["pim:storage"]?.map(r=>r.endsWith("/")?r:r+"/")},redirectPopup:globalThis.metro.oauth2.redirectPopup};rt.context=St({parser:St.n3Parser,writer:St.n3Writer,prefixes:rt.prefixes,separator:":"});var lr={keys:{default:{Escape:function(e){this.container.querySelector(":popover-open")||this.state.openDialogs?.length&&this.actions.uiCloseDialog(this.state.openDialogs[this.state.openDialogs.length-1])&&e.preventDefault()}}},commands:{uiCloseDialog:function(e,t){let r=e.closest("dialog");this.actions.uiCloseDialog(r)},uiSelectTab:function(e,t){let r=e.dataset.uiGroup,i=this.container.querySelector("#"+t),n=i?i.dataset.uiGroup:null;this.actions.uiSelect(e,r),i&&(this.actions.uiSelect(i,n),i.scrollIntoView())}},actions:{uiCloseDialog:function(e){return e.open?(this.state.openDialogs=this.state.openDialogs?.filter(t=>t==e),e.close(),!0):!1},uiOpenDialog:function(e){e.open||(e.show(),this.state.openDialogs.push(e),e.querySelector("[autofocus]")?.focus())},uiOpenModalDialog:function(e){e.open||(e.showModal(),this.state.openDialogs.push(e),e.querySelector("[autofocus]")?.focus())},uiSelect:function(e,t){if(t)for(let r of Array.from(this.container.querySelectorAll(`[data-ui-group=${t}].ui-selected`)))r.classList.remove("ui-selected");e.classList.add("ui-selected")}},state:{openDialogs:[]}};var ct=new Map,Kn={addListener:(e,t)=>{ct.has(e)||ct.set(e,[]),ct.get(e).push(t),ko(e)},removeListener:(e,t)=>{if(!ct.has(e))return!1;ct.set(e,ct.get(e).filter(r=>r!=t))}};function ko(e){let t=document.querySelectorAll('[data-simply-activate="'+e+'"]');if(t)for(let r of t)Qn(r)}function Qn(e){let t=e?.dataset?.simplyActivate;if(t&&ct.has(t))for(let r of ct.get(t))r.call(e)}function jo(e){let t=[];for(let i of e)if(i.type=="childList"){for(let n of i.addedNodes)if(n.querySelectorAll){var r=Array.from(n.querySelectorAll("[data-simply-activate]"));n.matches("[data-simply-activate]")&&r.push(n),t=t.concat(r)}}for(let i of t)Qn(i)}var No=new MutationObserver(jo);No.observe(document,{subtree:!0,childList:!0});var ui={};Ke(ui,{actions:()=>li});function li(e){if(e.app){let t={get:(r,i)=>r[i].bind(e.app)};return new Proxy(e.actions,t)}else return e}var di={};Ke(di,{routes:()=>fi});function fi(e){return new ci(e)}var ci=class{constructor(t={}){this.root=t.root||"/",this.app=t.app,this.clear(),t.routes&&this.load(t.routes)}load(t){Lo(t,this.routeInfo)}clear(){this.routeInfo=[],this.listeners={match:{},call:{},finish:{}}}match(t,r){let i={path:t,options:r};i=this.runListeners("match",i),t=i.path?i.path:t;let n;if(!t)return this.match(document.location.pathname+document.location.hash)?!0:this.match(document.location.pathname);t=xt(t);for(let u of this.routeInfo)if(n=u.match.exec(t),n&&n.length){var l={};return u.params.forEach((o,m)=>{o=="*"&&(o="remainder"),l[o]=n[m+1]}),Object.assign(l,r),i.route=u,i.params=l,i=this.runListeners("call",i),l=i.params?i.params:l,i.result=u.action.call(u,l),this.runListeners("finish",i),i.result}return t&&t[t.length-1]!="/"?this.match(t+"/",r):!1}runListeners(t,r){if(Object.keys(this.listeners[t]))return Object.keys(this.listeners[t]).forEach(i=>{var n=Vn(i);if(n.exec(r.path)){var l;for(let u of this.listeners[t][i])l=u.call(this.app,r),l&&(r=l)}}),r}handleEvents(){globalThis.addEventListener("popstate",()=>{this.match(xt(document.location.pathname+document.location.hash,this.root))===!1&&this.match(xt(document.location.pathname,this.root))}),globalThis.document.addEventListener("click",t=>{if(!t.ctrlKey&&t.which==1){for(var r=t.target;r&&r.tagName!="A";)r=r.parentElement;if(r&&r.pathname&&r.hostname==globalThis.location.hostname&&!r.link&&!r.dataset.simplyCommand){let i=xt(r.pathname+r.hash,this.root);if(this.has(i)||(i=xt(r.pathname,this.root)),this.has(i)){let n=this.runListeners("goto",{path:i});return n.path&&this.goto(n.path),t.preventDefault(),!1}}}})}goto(t){return history.pushState({},"",Po(t)),this.match(t)}has(t){t=xt(t,this.root);for(let i of this.routeInfo){var r=i.match.exec(t);if(r&&r.length)return!0}return!1}addListener(t,r,i){if(["goto","match","call","finish"].indexOf(t)==-1)throw new Error("Unknown action "+t);this.listeners[t][r]||(this.listeners[t][r]=[]),this.listeners[t][r].push(i)}removeListener(t,r,i){if(["match","call","finish"].indexOf(t)==-1)throw new Error("Unknown action "+t);this.listeners[t][r]&&(this.listeners[t][r]=this.listeners[t][r].filter(n=>n!=i))}init(t){t.root&&(this.root=t.root)}};function xt(e,t="/"){return(e.substring(0,t.length)==t||t[t.length-1]=="/"&&e.length==t.length-1&&e==t.substring(0,e.length))&&(e=e.substring(t.length)),e[0]!="/"&&e[0]!="#"&&(e="/"+e),e}function Po(e,t){return e=xt(e,t),t[t.length-1]==="/"&&e[0]==="/"&&(e=e.substring(1)),t+e}function Vn(e){return new RegExp("^"+e.replace(/:\w+/g,"([^/]+)").replace(/:\*/,"(.*)"))}function Lo(e){let t=[],r=Object.keys(e),i=/:(\w+|\*)/g;for(let n of r){let l=[],u=[];do l=i.exec(n),l&&u.push(l[1]);while(l);t.push({match:Vn(n),params:u,action:e[n]})}return t}var _i={};Ke(_i,{commands:()=>pi});var hi=class{constructor(t={}){t.app||(t.app={}),t.app.container||(t.app.container=document.body),this.$handlers=t.handlers||Bo,t.commands&&Object.assign(this,t.commands);let r=i=>{let n=Oo(i,this.$handlers);if(!n)return;if(!this[n.name]){console.error("simply.command: undefined command "+n.name,n.source);return}if(this[n.name].call(t.app,n.source,n.value)===!1)return i.preventDefault(),i.stopPropagation(),!1};t.app.container.addEventListener("click",r),t.app.container.addEventListener("submit",r),t.app.container.addEventListener("change",r),t.app.container.addEventListener("input",r)}};function pi(e={}){return new hi(e)}function Oo(e,t){var r=e.target.closest("[data-simply-command]");if(r){for(let i of t)if(r.matches(i.match))return i.check(r,e)?{name:r.dataset.simplyCommand,source:r,value:i.get(r)}:null}return null}var Bo=[{match:"input,select,textarea",get:function(e){if(e.tagName==="SELECT"&&e.multiple){let t=[];for(let r of e.options)r.selected&&t.push(r.value);return t}return e.dataset.simplyValue||e.value},check:function(e,t){return t.type=="change"||e.dataset.simplyImmediate&&t.type=="input"}},{match:"a,button",get:function(e){return e.dataset.simplyValue||e.href||e.value},check:function(e,t){return t.type=="click"&&t.ctrlKey==!1&&t.button==0}},{match:"form",get:function(e){let t={};for(let r of Array.from(e.elements)){if(r.tagName=="INPUT"&&(r.type=="checkbox"||r.type=="radio")&&!r.checked)return;t[r.name]&&!Array.isArray(t[r.name])&&(t[r.name]=[t[r.name]]),Array.isArray(t[r.name])?t[r.name].push(r.value):t[r.name]=r.value}return t},check:function(e,t){return t.type=="submit"}},{match:"*",get:function(e){return e.dataset.simplyValue},check:function(e,t){return t.type=="click"&&t.ctrlKey==!1&&t.button==0}}];var yi={};Ke(yi,{keys:()=>mi});var bi=class{constructor(t={}){t.app||(t.app={}),t.app.container||(t.app.container=document.body),Object.assign(this,t.keys);let r=i=>{if(i.isComposing||i.keyCode===229||i.defaultPrevented||!i.target)return;let n="default";i.target.closest("[data-simply-keyboard]")&&(n=i.target.closest("[data-simply-keyboard]").dataset.simplyKeyboard);let l="";i.ctrlKey&&i.keyCode!=17&&(l+="Control+"),i.metaKey&&i.keyCode!=224&&(l+="Meta+"),i.altKey&&i.keyCode!=18&&(l+="Alt+"),i.shiftKey&&i.keyCode!=16&&(l+="Shift+"),l+=i.key,this[n]&&this[n][l]&&this[n][l].call(t.app,i)};t.app.container.addEventListener("keydown",r)}};function mi(e={}){return new bi(e)}var Ri={};Ke(Ri,{batch:()=>xi,clockEffect:()=>$o,destroy:()=>Si,effect:()=>Mt,signal:()=>Je,throttledEffect:()=>Ei,untracked:()=>Fo});var gi=Symbol("iterate");Symbol.xRay||(Symbol.xRay=Symbol("xRay"));var Co={get:(e,t,r)=>{if(t===Symbol.xRay)return e;let i=e?.[t];return wi(r,t),typeof i=="function"?Array.isArray(e)?(...n)=>{let l=e.length,u=i.apply(r,n);return l!=e.length&&Et(r,ft("length",{was:l,now:e.length})),u}:e instanceof Set||e instanceof Map?(...n)=>{let l=e.size,u=i.apply(e,n);return l!=e.size&&Et(r,ft("size",{was:l,now:e.size})),["set","add","clear","delete"].includes(t)&&Et(r,ft({entries:{},forEach:{},has:{},keys:{},values:{},[Symbol.iterator]:{}})),u}:e instanceof HTMLElement||e instanceof Number||e instanceof String||e instanceof Boolean?i.bind(e):i.bind(r):i&&typeof i=="object"?Je(i):i},set:(e,t,r,i)=>{r=r?.[Symbol.xRay]||r;let n=e[t];return n!==r&&(e[t]=r,Et(i,ft(t,{was:n,now:r}))),typeof n>"u"&&Et(i,ft(gi,{})),!0},has:(e,t)=>{let r=We.get(e);return r&&wi(r,t),Object.hasOwn(e,t)},deleteProperty:(e,t)=>{if(typeof e[t]<"u"){let r=e[t];delete e[t];let i=We.get(e);Et(i,ft(t,{delete:!0,was:r}))}return!0},defineProperty:(e,t,r)=>{if(typeof e[t]>"u"){let i=We.get(e);Et(i,ft(gi,{}))}return Object.defineProperty(e,t,r)},ownKeys:e=>{let t=We.get(e);return wi(t,gi),Reflect.ownKeys(e)}},We=new WeakMap;function Je(e){return We.has(e)||We.set(e,new Proxy(e,Co)),We.get(e)}var Ar=new Set,Ct=0;function Et(e,t={}){let r=[];if(t.forEach((i,n)=>{let l=Do(e,n);if(l?.length){for(let u of l)Mo(u,ft(n,i));r=r.concat(l)}}),r=new Set(r.filter(Boolean)),r)if(Ct)Ar=Ar.union(r);else{let i=Be[Be.length-1];for(let n of Array.from(r))n!=i&&n?.needsUpdate&&n(),Yn(n)}}function ft(e,t){let r=new Map;if(typeof e=="object")for(let i in e)r.set(i,e[i]);else r.set(e,t);return r}function Mo(e,t){e.context?t.forEach((r,i)=>{e.context.set(i,r)}):e.context=t,e.needsUpdate=!0}function Yn(e){delete e.context,delete e.needsUpdate}function wi(e,t){let r=Be[Be.length-1];r&&Uo(e,t,r)}var ur=new WeakMap,Rr=new WeakMap;function Do(e,t){let r=ur.get(e);return r?Array.from(r.get(t)||[]):[]}function Uo(e,t,r){ur.has(e)||ur.set(e,new Map);let i=ur.get(e);i.has(t)||i.set(t,new Set),i.get(t).add(r),Rr.has(r)||Rr.set(r,new Map);let n=Rr.get(r);n.has(t)||n.set(t,new Set),n.get(t).add(e)}function Tr(e){let t=Rr.get(e);t&&t.forEach(r=>{r.forEach(i=>{let n=ur.get(i);n.has(r)&&n.get(r).delete(e)})})}var Be=[],Ir=[],vi=new WeakMap,dt=[];function Mt(e){if(Ir.findIndex(i=>e==i)!==-1)throw new Error("Recursive update() call",{cause:e});Ir.push(e);let t=We.get(e);t||(t=Je({current:null}),We.set(e,t));let r=function i(){if(dt.findIndex(l=>l==t)!==-1)throw new Error("Cyclical dependency in update() call",{cause:e});Tr(i),Be.push(i),dt.push(t);let n;try{n=e(i,Be,dt)}finally{Be.pop(),dt.pop(),n instanceof Promise?n.then(l=>{t.current=l}):t.current=n}};return r.fn=e,vi.set(t,r),r(),t}function Si(e){let t=vi.get(e)?.deref();if(!t)return;Tr(t);let r=t.fn;We.remove(r),vi.delete(e)}function xi(e){Ct++;let t;try{t=e()}finally{t instanceof Promise?t.then(()=>{Ct--,Ct||Jn()}):(Ct--,Ct||Jn())}return t}function Jn(){let e=Array.from(Ar);Ar=new Set;let t=Be[Be.length-1];for(let r of e)r!=t&&r?.needsUpdate&&r(),Yn(r)}function Ei(e,t){if(Ir.findIndex(u=>e==u)!==-1)throw new Error("Recursive update() call",{cause:e});Ir.push(e);let r=We.get(e);r||(r=Je({current:null}),We.set(e,r));let i=!1,n=!0;return function u(){if(dt.findIndex(m=>m==r)!==-1)throw new Error("Cyclical dependency in update() call",{cause:e});if(i&&i>Date.now()){n=!0;return}Tr(u),Be.push(u),dt.push(r);let o;try{o=e(u,Be,dt)}finally{n=!1,Be.pop(),dt.pop(),o instanceof Promise?o.then(m=>{r.current=m}):r.current=o}i=Date.now()+t,globalThis.setTimeout(()=>{n&&u()},t)}(),r}function $o(e,t){let r=We.get(e);r||(r=Je({current:null}),We.set(e,r));let i=-1,n=!0;return function u(){if(i<t.time)if(n){Tr(u),Be.push(u),i=t.time;let o;try{o=e(u,Be)}finally{Be.pop(),o instanceof Promise?o.then(m=>{r.current=m}):r.current=o,n=!1}}else i=t.time;else n=!0}(),r}function Fo(e){let t=Be.slice();Be=[];try{return e()}finally{Be=t}}var Ii=class{constructor(t){this.bindings=new Map;let r={container:document.body,attribute:"data-bind",transformers:[],defaultTransformers:[Wo]};if(!t?.root)throw new Error("bind needs at least options.root set");this.options=Object.assign({},r,t);let i=this.options.attribute,n=d=>{this.bindings.set(d,Ei(()=>{let p={templates:d.querySelectorAll(":scope > template"),path:this.getBindingPath(d)};p.value=Ai(this.options.root,p.path),p.element=d,l(p)},100))},l=d=>{let p=this.options.defaultTransformers||[];d.element.dataset.transform&&d.element.dataset.transform.split(" ").filter(Boolean).forEach(y=>{this.options.transformers[y]?p.push(this.options.transformers[y]):console.warn("No transformer with name "+y+" configured",{cause:d.element})});let _;for(let y of p)_=((S,R)=>M=>R.call(this,M,S))(_,y);_(d)},u=d=>{for(let p of d)n(p)},o=d=>{for(let p of d)if(p.type=="childList"&&p.addedNodes){for(let _ of p.addedNodes)if(_ instanceof HTMLElement){let y=Array.from(_.querySelectorAll(`[${i}]`));_.matches(`[${i}]`)&&y.unshift(_),y.length&&u(y)}}};this.observer=new MutationObserver(d=>{o(d)}),this.observer.observe(t.container,{subtree:!0,childList:!0});let m=this.options.container.querySelectorAll("["+this.options.attribute+"]:not(template)");m.length&&u(m)}applyTemplate(t){let r=t.path,i=t.templates,n=t.list,l=t.index,u=t.parent,o=n?n[l]:t.value,m=this.findTemplate(i,o);if(!m){let y=new DocumentFragment;return y.innerHTML="<!-- no matching template -->",y}let d=m.content.cloneNode(!0);if(!d.children?.length)throw new Error("template must contain a single html element",{cause:m});if(d.children.length>1)throw new Error("template must contain a single root node",{cause:m});let p=d.querySelectorAll("["+this.options.attribute+"]"),_=this.options.attribute;for(let y of p){let S=y.getAttribute(_);S.substring(0,6)=="#root."?y.setAttribute(_,S.substring(6)):S=="#value"&&l!=null?y.setAttribute(_,r+"."+l):l!=null?y.setAttribute(_,r+"."+l+"."+S):y.setAttribute(_,u+"."+S)}return typeof l<"u"&&d.children[0].setAttribute(_+"-key",l),d.children[0].$bindTemplate=m,d}getBindingPath(t){return t.getAttribute(this.options.attribute)}findTemplate(t,r){let i=u=>{let o=this.getBindingPath(u),m;o?o.substr(0,6)=="#root."?m=Ai(this.options.root,o):m=Ai(r,o):m=r;let d=""+m,p=u.getAttribute(this.options.attribute+"-match");if(p){if(p==="#empty"&&!m)return u;if(p==="#notempty"&&m||d.match(p))return u}if(!p)return u},n=Array.from(t).find(i),l=n?.getAttribute("rel");if(l){let u=document.querySelector("template#"+l);if(!u)throw new Error("Could not find template with id "+l);n=u}return n}destroy(){this.bindings.forEach(t=>{Si(t)}),this.bindings=new Map,this.observer.disconnect()}};function kr(e){return new Ii(e)}function Rt(e,t){return e=="#empty"&&!t||t=="#empty"&&!e||""+e==""+t}function Ai(e,t){let r=t.split("."),i=e,n,l;for(;r.length&&i;){if(n=r.shift(),n=="#key")return l;if(n=="#value")return i;n=="#root"?i=e:(n=decodeURIComponent(n),i=i[n],l=n)}return i}function Wo(e){let t=e.element,r=e.templates,i=r.length,n=e.path,l=e.value,u=this.options.attribute;return Array.isArray(l)&&r?.length?zo.call(this,e):typeof l=="object"&&r?.length?qo.call(this,e):r?.length?Go.call(this,e):t.tagName=="INPUT"?Ho.call(this,e):t.tagName=="BUTTON"?Ko.call(this,e):t.tagName=="SELECT"?Qo.call(this,e):t.tagName=="A"?Vo.call(this,e):Jo.call(this,e),e}function zo(e){let t=e.element,r=e.templates,i=r.length,n=e.path,l=e.value,u=this.options.attribute,o=t.querySelectorAll(":scope > ["+u+"-key]"),m=0,d=0;e.list=l;for(let _ of o){let y=parseInt(_.getAttribute(u+"-key"));if(y>m)e.index=m,t.insertBefore(this.applyTemplate(e),_);else if(y<m)_.remove();else{let S=Array.from(_.querySelectorAll(`[${u}]`));_.matches(`[${u}]`)&&S.unshift(_);let R=S.find(M=>{let N=M.getAttribute(u);return N.substr(0,5)!=="#root"&&N.substr(0,n.length)!==n});if(!R&&_.$bindTemplate){let M=this.findTemplate(r,l[m]);M!=_.$bindTemplate&&(R=!0,M||d++)}R&&(e.index=m,t.replaceChild(this.applyTemplate(e),_))}if(m++,m>=l.length)break}o=t.querySelectorAll(":scope > ["+u+"-key]");let p=o.length+d;if(p>l.length)for(;p>l.length;)t.querySelectorAll(":scope > :not(template)")?.[p-1]?.remove(),p--;else if(p<l.length)for(;p<l.length;)e.index=p,t.appendChild(this.applyTemplate(e)),p++}function qo(e){let t=e.element,r=e.templates,i=r.length,n=e.path,l=e.value,u=this.options.attribute;e.list=l;let o=Array.from(t.querySelectorAll(":scope > ["+u+"-key]"));for(let m in e.list){e.index=m;let d=o.shift();if(!d){t.appendChild(this.applyTemplate(e));continue}if(d.getAttribute[u+"-key"]!=m){o.unshift(d);let _=t.querySelector(":scope > ["+u+'-key="'+m+'"]');if(_)t.insertBefore(_,d),d=_,o=o.filter(y=>y!=_);else{let y=this.applyTemplate(e);y.firstElementChild&&t.insertBefore(y,d);continue}}if(this.findTemplate(r,l[m])!=d.$bindTemplate){let _=this.applyTemplate(e);t.replaceChild(_,d)}}for(;o.length;)item=o.shift(),item.remove()}function Go(e){let t=e.element,r=e.templates,i=e.value,n=this.options.attribute,l=t.querySelector(":scope > :not(template)"),u=this.findTemplate(r,i);if(e.parent=t.parentElement?.closest(`[${n}]`)?.getAttribute(n)||"#root",l)if(u){if(l?.$bindTemplate!=u){let o=this.applyTemplate(e);t.replaceChild(o,l)}}else t.removeChild(l);else if(u){let o=this.applyTemplate(e);t.appendChild(o)}}function Ho(e){let t=e.element,r=e.value;t.type=="checkbox"||t.type=="radio"?Rt(t.value,r)?t.checked=!0:t.checked=!1:Rt(t.value,r)||(t.value=""+r)}function Ko(e){let t=e.element,r=e.value;Rt(t.value,r)||(t.value=""+r)}function Qo(e){let t=e.element,r=e.value;if(t.multiple){if(Array.isArray(r))for(let i of t.options)r.indexOf(i.value)===!1?i.selected=!1:i.selected=!0}else{let i=t.options.find(n=>Rt(n.value,r));i&&(i.selected=!0)}}function Vo(e){let t=e.element,r=e.value;r?.innerHTML&&!Rt(t.innerHTML,r.innerHTML)&&(t.innerHTML=""+r.innerHTML),r?.href&&!Rt(t.href,r.href)&&(t.href=""+r.href)}function Jo(e){let t=e.element,r=e.value;Rt(t.innerHTML,r)||(typeof r>"u"||r==null?t.innerHTML="":t.innerHTML=""+r)}var Ti=class{constructor(t={}){this.container=t.container||document.body,t.state||(t.state={}),this.state=Je(t.state),t.commands&&(this.commands=pi({app:this,container:this.container,commands:t.commands})),t.keys&&(this.keys=mi({app:this,keys:t.keys})),t.routes&&(this.routes=fi({app:this,routes:t.routes})),t.actions&&(this.actions=li({app:this,actions:t.actions}));let r={container:this.container,root:this.state};t.defaultTransformers&&(r.defaultTransformers=t.defaultTransformers),t.transformers&&(r.transformers=t.transformers),this.bind=kr(r)}};function Zn(e={}){return new Ti(e)}function Yo(e,t){let r=0;return()=>{let i=arguments;r||(r=globalThis.setTimeout(()=>{e.apply(this,i),r=0},t))}}var Zo=globalThis.requestIdleCallback?e=>{globalThis.requestIdleCallback(e,{timeout:500})}:globalThis.requestAnimationFrame;function Xn(e,t){let r=new URL(e,t);return Dt.cacheBuster&&r.searchParams.set("cb",Dt.cacheBuster),r.href}var es,Xo={},ki=globalThis.document.querySelector("head"),ts=globalThis.document.currentScript,rs,is;ts?is=ts.src:(rs=(()=>{var e=document.getElementsByTagName("script"),t=e.length-1,r=e[t];return()=>r.src})(),is=rs());var ea=async()=>new Promise(function(e){var t=globalThis.document.createElement("script");t.src="javascript:document.dispatchEvent(new Event('simply-include-next'))",t.async=!1,globalThis.document.addEventListener("simply-include-next",()=>{ki.removeChild(t),e()},{once:!0,passive:!0}),ki.appendChild(t)}),jr=[],Dt={cacheBuster:null,scripts:(e,t)=>{let r=e.slice(),i=()=>{let n=r.shift();if(!n)return;let l=[].map.call(n.attributes,o=>o.name),u=globalThis.document.createElement("script");for(let o of l)u.setAttribute(o,n.getAttribute(o));if(u.removeAttribute("data-simply-location"),!u.src)u.innerHTML=n.innerHTML,ea().then(()=>{let o=jr[n.dataset.simplyLocation];o.parentNode.insertBefore(u,o),o.parentNode.removeChild(o),i()});else{u.src=Xn(u.src,t),!u.hasAttribute("async")&&!u.hasAttribute("defer")&&(u.async=!1);let o=jr[n.dataset.simplyLocation];o.parentNode.insertBefore(u,o),o.parentNode.removeChild(o),Xo[u.src]=!0,i()}};r.length&&i()},html:(e,t)=>{let r=globalThis.document.createRange().createContextualFragment(e),i=r.querySelectorAll('link[rel="stylesheet"],style');for(let u of i)u.href&&(u.href=Xn(u.href,t.href)),ki.appendChild(u);let n=globalThis.document.createDocumentFragment(),l=r.querySelectorAll("script");for(let u of l){let o=globalThis.document.createComment(u.src||"inline script");u.parentNode.insertBefore(o,u),u.dataset.simplyLocation=jr.length,jr.push(o),n.appendChild(u)}t.parentNode.insertBefore(r,t||null),globalThis.setTimeout(function(){Dt.scripts(n.childNodes,t?t.href:globalThis.location.href)},10)}},ns={},ta=async e=>{let t=[].reduce.call(e,(r,i)=>(i.rel=="simply-include-once"&&ns[i.href]?i.parentNode.removeChild(i):(ns[i.href]=!0,i.rel="simply-include-loading",r.push(i)),r),[]);for(let r of t){if(!r.href)return;let i=await fetch(r.href);if(!i.ok){console.log("simply-include: failed to load "+r.href);continue}console.log("simply-include: loaded "+r.href);let n=await i.text();Dt.html(n,r),r.parentNode.removeChild(r)}},ss=Yo(()=>{Zo(()=>{var e=globalThis.document.querySelectorAll('link[rel="simply-include"],link[rel="simply-include-once"]');e.length&&ta(e)})}),ra=()=>{es=new MutationObserver(ss),es.observe(globalThis.document,{subtree:!0,childList:!0})};ra();ss();var Ni={};Ke(Ni,{columns:()=>aa,filter:()=>oa,model:()=>ia,paging:()=>sa,sort:()=>na});var ji=class{constructor(t){this.state=Je(t),this.state.options||(this.state.options={}),this.effects=[{current:t.data}],this.view=Je(t.data)}addEffect(t){let r=this.effects[this.effects.length-1];this.view=t.call(this,r),this.effects.push(this.view)}};function ia(e){return new ji(e)}function na(e={}){return function(t){return this.state.options.sort=Object.assign({direction:"asc",sortBy:null,sortFn:(r,i)=>{let n=this.state.options.sort,l=n.sortBy;if(!n.sortBy)return 0;let u=n.direction=="asc"?1:-1,o=n.direction=="asc"?-1:1;return typeof r?.[l]>"u"?typeof i?.[l]>"u"?0:u:typeof i?.[l]>"u"||r[l]<i[l]?o:r[l]>i[l]?u:0}},e),Mt(()=>{let r=this.state.options.sort;return r?.sortBy&&r?.direction?t.current.toSorted(r?.sortFn):t.current})}}function sa(e={}){return function(t){return this.state.options.paging=Object.assign({page:1,pageSize:20,max:1},e),Mt(()=>xi(()=>{let r=this.state.options.paging;r.pageSize||(r.pageSize=20),r.max=Math.ceil(this.state.data.length/r.pageSize),r.page=Math.max(1,Math.min(r.max,r.page));let i=(r.page-1)*r.pageSize,n=i+r.pageSize;return t.current.slice(i,n)}))}}function oa(e){if(!e?.name||typeof e.name!="string")throw new Error("filter requires options.name to be a string");if(!e.matches||typeof e.matches!="function")throw new Error("filter requires options.matches to be a function");return function(t){return this.state.options[e.name]=e,Mt(()=>{if(this.state.options[e.name].enabled)return t.filter(this.state.options.matches)})}}function aa(e={}){if(!e||typeof e!="object"||Object.keys(e).length===0)throw new Error("columns requires options to be an object with at least one property");return function(t){return this.state.options.columns=e,Mt(()=>t.current.map(r=>{let i={};for(let n of Object.keys(this.state.options.columns))this.state.options.columns[n].hidden||(i[n]=r[n]);return i}))}}var os={activate:Kn,action:ui,app:Zn,bind:kr,command:_i,include:Dt,key:yi,model:Ni,route:di,state:Ri};window.simply=os;var as=os;var Ut={keys:{default:{...lr.keys.default}},routes:{},commands:{...lr.commands},actions:{...lr.actions},state:{...lr.state},transformers:{...$i}},Nr=as.app({routes:{...Ut.routes},keys:{default:{...Ut.keys.default,"Control+ ":function(e){this.menu.showPopover(),this.menu.querySelector("a").focus()}}},commands:{...Ut.commands,openLink:async function(e,t){let r=la(e);try{if(!await this.actions.openLink(e.href))return;this.state.worksheets[0].files[Nr.state.file].position={x:r.left,y:r.top}}catch(i){alert(i.message)}},addFile:async function(e,t){this.actions.uiCloseDialog(this.dialogs.addFile);try{let r=await this.actions.addFile(t.url);window.setTimeout(()=>{document.querySelector(".zett-entity").classList.remove("zett-pre-entity"),document.querySelector('.zett-entity [name="value"]').focus()},100)}catch{this.state.fetchUrl=t.url,this.actions.uiOpenModalDialog(this.dialogs.setIssuer)}},zettMenu:async function(e,t){this.menu.togglePopover()},zettAddFileDialog:async function(e,t){this.menu.hidePopover(),this.actions.uiOpenModalDialog(this.dialogs.addFile)}},actions:{...Ut.actions,openLink:async function(e){e=new URL(e);let t=await this.actions.addFile(e);if(t)return e.hash,t},addFile:async function(e){let t=await rt.fetch(e,this.state.login),r=rt.mergeSubjects(t.data,e,t.prefixes);this.state.worksheetIndex||(this.state.worksheetIndex=0);let i=this.state.worksheetIndex;this.state.worksheets[i]||(this.state.worksheets[i]={name:"new worksheet",files:[]});let n=this.state.worksheets[i];return n.files.push({name:e.href.split("/").pop(),url:e,data:r,prefixes:t.prefixes}),this.state.file=n.files.length-1,t}},transformers:{...Ut.transformers},state:{...Ut.state,worksheets:[{title:"A worksheet",files:[]}]}});Nr.dialogs={addFile:document.getElementById("zettAddFileDialog"),setIssuer:document.getElementById("zettSetIssuerDialog")};Nr.menu=document.getElementById("zett-menu");function la(e){let t=e.getBoundingClientRect();return{left:t.left+window.scrollX,top:t.top+window.scrollY}}window.zett=Nr;})();
/*! Bundled license information:

@muze-nl/oldm/dist/oldm.mjs:
  (*! Bundled license information:
  
  ieee754/index.js:
    (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)
  
  buffer/index.js:
    (*!
     * The buffer module from node.js, for the browser.
     *
     * @author   Feross Aboukhadijeh <https://feross.org>
     * @license  MIT
     *)
  
  queue-microtask/index.js:
    (*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)
  
  safe-buffer/index.js:
    (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)
  *)
*/
//# sourceMappingURL=app.min.js.map
